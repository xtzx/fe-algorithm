/**
 * ğŸ“ é¢˜ç›®ï¼šå­—æ¯å¤§å°å†™å…¨æ’åˆ—
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/letter-case-permutation/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šä½è¿ç®—ã€å­—ç¬¦ä¸²ã€å›æº¯
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œé€šè¿‡å°†å­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªå­—æ¯è½¬å˜å¤§å°å†™ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚
 * è¿”å›æ‰€æœ‰å¯èƒ½å¾—åˆ°çš„å­—ç¬¦ä¸²é›†åˆã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šs = "a1b2"
 * è¾“å‡ºï¼š["a1b2","a1B2","A1b2","A1B2"]
 *
 * è¾“å…¥ï¼šs = "3z4"
 * è¾“å‡ºï¼š["3z4","3Z4"]
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å¯¹äºæ¯ä¸ªå­—ç¬¦ï¼š
// - å¦‚æœæ˜¯æ•°å­—ï¼šä¿æŒä¸å˜
// - å¦‚æœæ˜¯å­—æ¯ï¼šæœ‰ä¸¤ç§é€‰æ‹©ï¼ˆå¤§å†™æˆ–å°å†™ï¼‰
//
// è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„"å­é›†"ç±»å‹é—®é¢˜ï¼š
// - æ¯ä¸ªå­—æ¯éƒ½æœ‰"é€‰æ‹©å¤§å†™"æˆ–"é€‰æ‹©å°å†™"ä¸¤ç§æƒ…å†µ
// - éå†æ‰€æœ‰ç»„åˆ

// ============================================================
// è§£æ³•ä¸€ï¼šå›æº¯
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(2^n Ã— n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * s = "a1b"
 *
 *                     ""
 *                  /      \
 *                "a"      "A"
 *                |         |
 *              "a1"      "A1"
 *              /  \      /  \
 *          "a1b" "a1B" "A1b" "A1B"
 *
 * ç»“æœï¼š["a1b", "a1B", "A1b", "A1B"]
 */
function letterCasePermutation(s: string): string[] {
  const result: string[] = [];

  function backtrack(index: number, current: string) {
    // ç»“æŸæ¡ä»¶ï¼šå¤„ç†å®Œæ‰€æœ‰å­—ç¬¦
    if (index === s.length) {
      result.push(current);
      return;
    }

    const char = s[index];

    if (/[0-9]/.test(char)) {
      // æ•°å­—ï¼šåªæœ‰ä¸€ç§é€‰æ‹©
      backtrack(index + 1, current + char);
    } else {
      // å­—æ¯ï¼šä¸¤ç§é€‰æ‹©
      backtrack(index + 1, current + char.toLowerCase());
      backtrack(index + 1, current + char.toUpperCase());
    }
  }

  backtrack(0, '');
  return result;
}

// ============================================================
// è§£æ³•äºŒï¼šBFSï¼ˆè¿­ä»£ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(2^n Ã— n) | ç©ºé—´å¤æ‚åº¦ï¼šO(2^n)
function letterCasePermutation_bfs(s: string): string[] {
  let result: string[] = [''];

  for (const char of s) {
    const newResult: string[] = [];

    for (const str of result) {
      if (/[0-9]/.test(char)) {
        newResult.push(str + char);
      } else {
        newResult.push(str + char.toLowerCase());
        newResult.push(str + char.toUpperCase());
      }
    }

    result = newResult;
  }

  return result;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³• | æ—¶é—´      | ç©ºé—´    | ç‰¹ç‚¹              |
 * |------|-----------|---------|-------------------|
 * | å›æº¯ | O(2^n Ã— n)| O(n)    | é€’å½’æ ˆç©ºé—´ï¼Œæ¨è   |
 * | BFS  | O(2^n Ã— n)| O(2^n)  | éœ€è¦å­˜å‚¨ä¸­é—´ç»“æœ   |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. å­—ç¬¦åˆ¤æ–­ï¼š
 *    - ç”¨æ­£åˆ™ /[0-9]/ æˆ– /[a-zA-Z]/
 *    - æˆ–è€…ç”¨ isNaN(parseInt(char))
 *
 * 2. å­—ç¬¦ä¸²æ‹¼æ¥ï¼š
 *    - å­—ç¬¦ä¸²ä¸å¯å˜ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°å»º
 *    - å¯ä»¥ç”¨æ•°ç»„ + join ä¼˜åŒ–
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - å­é›† â†’ æ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰
 * - ç”µè¯å·ç çš„å­—æ¯ç»„åˆ â†’ æ¯ä¸ªæ•°å­—å¯¹åº”å¤šä¸ªå­—æ¯
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æœç´¢å»ºè®®ï¼šç”¨æˆ·è¾“å…¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„åŒ¹é…
 * 2. å¯†ç å˜ä½“ï¼šç”Ÿæˆå¯†ç çš„å¤§å°å†™å˜ä½“
 */

export { letterCasePermutation, letterCasePermutation_bfs };
export default letterCasePermutation;

