/**
 * ğŸ“ é¢˜ç›®ï¼šæœç´¢æ’å…¥ä½ç½®
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/search-insert-position/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ•°ç»„ã€äºŒåˆ†æŸ¥æ‰¾
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚
 * å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚
 *
 * è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥: nums = [1,3,5,6], target = 5
 * è¾“å‡º: 2
 *
 * è¾“å…¥: nums = [1,3,5,6], target = 2
 * è¾“å‡º: 1
 *
 * è¾“å…¥: nums = [1,3,5,6], target = 7
 * è¾“å‡º: 4
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// æœ¬è´¨ï¼šæ‰¾ç¬¬ä¸€ä¸ª >= target çš„ä½ç½®ï¼ˆå·¦è¾¹ç•Œï¼‰
//
// å¦‚æœ target å­˜åœ¨ï¼Œè¿”å›å®ƒçš„ä½ç½®
// å¦‚æœ target ä¸å­˜åœ¨ï¼Œè¿”å›å®ƒåº”è¯¥æ’å…¥çš„ä½ç½®
// ä¸¤ç§æƒ…å†µéƒ½æ˜¯"ç¬¬ä¸€ä¸ª >= target çš„ä½ç½®"

// ============================================================
// è§£æ³•ï¼šå·¦è¾¹ç•ŒäºŒåˆ†
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(log n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * nums = [1, 3, 5, 6], target = 2
 *         0  1  2  3
 *
 * æ‰¾ç¬¬ä¸€ä¸ª >= 2 çš„ä½ç½®
 *
 * åˆå§‹: left=0, right=4ï¼ˆæ³¨æ„ right æ˜¯ nï¼‰
 *
 * Step 1: mid = 2
 *         nums[2] = 5 >= 2
 *         right = 2
 *
 * Step 2: mid = 1
 *         nums[1] = 3 >= 2
 *         right = 1
 *
 * Step 3: mid = 0
 *         nums[0] = 1 < 2
 *         left = 1
 *
 * left == right == 1ï¼Œè¿”å› 1
 */
function searchInsert(nums: number[], target: number): number {
  let left = 0;
  let right = nums.length; // æ³¨æ„ï¼šright å¯ä»¥æ˜¯ nï¼ˆæ’å…¥æœ«å°¾çš„æƒ…å†µï¼‰

  while (left < right) {
    const mid = left + ((right - left) >> 1);

    if (nums[mid] >= target) {
      right = mid; // mid å¯èƒ½æ˜¯ç­”æ¡ˆï¼Œç»§ç»­å¾€å·¦æ‰¾
    } else {
      left = mid + 1; // mid ä¸æ˜¯ç­”æ¡ˆï¼Œæ’é™¤
    }
  }

  return left;
}

// ============================================================
// è§£æ³•äºŒï¼šæ ‡å‡†äºŒåˆ†æŸ¥æ‰¾å˜ä½“
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(log n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)
function searchInsert_v2(nums: number[], target: number): number {
  let left = 0;
  let right = nums.length - 1;

  while (left <= right) {
    const mid = left + ((right - left) >> 1);

    if (nums[mid] === target) {
      return mid;
    } else if (nums[mid] < target) {
      left = mid + 1;
    } else {
      right = mid - 1;
    }
  }

  // å¾ªç¯ç»“æŸæ—¶ï¼Œleft å°±æ˜¯æ’å…¥ä½ç½®
  return left;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•       | æ—¶é—´     | ç©ºé—´  | ç‰¹ç‚¹                     |
 * |-----------|----------|-------|-------------------------|
 * | å·¦è¾¹ç•ŒäºŒåˆ† | O(log n) | O(1)  | æ¨èï¼Œç»Ÿä¸€çš„è¾¹ç•Œæ¨¡æ¿      |
 * | æ ‡å‡†å˜ä½“   | O(log n) | O(1)  | æ›´å¥½ç†è§£                 |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. right çš„åˆå§‹å€¼ï¼š
 *    - right = nums.lengthï¼Œä¸æ˜¯ nums.length - 1
 *    - å› ä¸ºå¯èƒ½æ’å…¥åˆ°æœ«å°¾
 *
 * 2. å¾ªç¯æ¡ä»¶ï¼š
 *    - left < rightï¼Œä¸æ˜¯ left <= right
 *    - è¿™æ˜¯è¾¹ç•ŒäºŒåˆ†çš„æ ‡å‡†å†™æ³•
 *
 * 3. è¿”å›å€¼ï¼š
 *    - è¿”å› leftï¼Œæ­¤æ—¶ left == right
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - äºŒåˆ†æŸ¥æ‰¾ â†’ åŸºç¡€ç‰ˆ
 * - åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® â†’ å·¦å³è¾¹ç•Œ
 * - ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ â†’ å·¦è¾¹ç•Œå˜ä½“
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æ’è¡Œæ¦œæ’å…¥ï¼šæ–°åˆ†æ•°æ’å…¥åˆ°æ­£ç¡®ä½ç½®
 * 2. æ—¶é—´çº¿æ’å…¥ï¼šæ–°äº‹ä»¶æ’å…¥åˆ°æ—¶é—´è½´
 * 3. æœ‰åºåˆ—è¡¨ç»´æŠ¤ï¼šä¿æŒåˆ—è¡¨æœ‰åº
 */

export { searchInsert, searchInsert_v2 };
export default searchInsert;

