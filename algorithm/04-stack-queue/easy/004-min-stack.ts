/**
 * ğŸ“ é¢˜ç›®ï¼šæœ€å°æ ˆ
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/min-stack/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ ˆã€è®¾è®¡
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * è®¾è®¡ä¸€ä¸ªæ”¯æŒ pushã€popã€top æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚
 *
 * å®ç° MinStack ç±»:
 * - MinStack() åˆå§‹åŒ–å †æ ˆå¯¹è±¡
 * - void push(int val) å°†å…ƒç´  val æ¨å…¥å †æ ˆ
 * - void pop() åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ 
 * - int top() è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ 
 * - int getMin() è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ 
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼š
 * ["MinStack","push","push","push","getMin","pop","top","getMin"]
 * [[],[-2],[0],[-3],[],[],[],[]]
 * è¾“å‡ºï¼š
 * [null,null,null,null,-3,null,0,-2]
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å…³é”®ï¼šå¦‚ä½•åœ¨ O(1) æ—¶é—´å†…è·å–æœ€å°å€¼ï¼Ÿ
//
// é—®é¢˜ï¼šå¦‚æœåªç”¨ä¸€ä¸ªå˜é‡è®°å½•æœ€å°å€¼ï¼Œpop æ‰æœ€å°å€¼åï¼Œæ€ä¹ˆçŸ¥é“æ–°çš„æœ€å°å€¼ï¼Ÿ
//
// è§£å†³æ–¹æ¡ˆï¼š
// 1. è¾…åŠ©æ ˆï¼šç”¨ä¸€ä¸ªé¢å¤–çš„æ ˆåŒæ­¥è®°å½•å½“å‰æœ€å°å€¼
// 2. å•æ ˆå­˜å‚¨ï¼šæ¯æ¬¡ push æ—¶ï¼Œå­˜å‚¨ [å€¼, å½“å‰æœ€å°å€¼]

// ============================================================
// è§£æ³•ä¸€ï¼šè¾…åŠ©æ ˆï¼ˆæ¨èï¼‰
// ============================================================
// â±ï¸ æ‰€æœ‰æ“ä½œ O(1) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * push(-2):
 *   stack:    [-2]
 *   minStack: [-2]
 *
 * push(0):
 *   stack:    [-2, 0]
 *   minStack: [-2, -2]  â† min(-2, 0) = -2
 *
 * push(-3):
 *   stack:    [-2, 0, -3]
 *   minStack: [-2, -2, -3]  â† min(-2, -3) = -3
 *
 * getMin(): è¿”å› minStack æ ˆé¡¶ = -3
 *
 * pop():
 *   stack:    [-2, 0]
 *   minStack: [-2, -2]
 *
 * getMin(): è¿”å› minStack æ ˆé¡¶ = -2
 */
class MinStack {
  private stack: number[] = [];
  private minStack: number[] = [];

  push(val: number): void {
    this.stack.push(val);

    // minStack å­˜å‚¨å½“å‰æœ€å°å€¼
    if (this.minStack.length === 0) {
      this.minStack.push(val);
    } else {
      // å­˜å‚¨å½“å‰å€¼å’Œ minStack æ ˆé¡¶çš„è¾ƒå°å€¼
      this.minStack.push(Math.min(val, this.minStack[this.minStack.length - 1]));
    }
  }

  pop(): void {
    this.stack.pop();
    this.minStack.pop();
  }

  top(): number {
    return this.stack[this.stack.length - 1];
  }

  getMin(): number {
    return this.minStack[this.minStack.length - 1];
  }
}

// ============================================================
// è§£æ³•äºŒï¼šå•æ ˆå­˜å‚¨å…ƒç»„
// ============================================================
// â±ï¸ æ‰€æœ‰æ“ä½œ O(1) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)
class MinStack2 {
  private stack: Array<[number, number]> = []; // [å€¼, å½“å‰æœ€å°å€¼]

  push(val: number): void {
    if (this.stack.length === 0) {
      this.stack.push([val, val]);
    } else {
      const currentMin = this.stack[this.stack.length - 1][1];
      this.stack.push([val, Math.min(val, currentMin)]);
    }
  }

  pop(): void {
    this.stack.pop();
  }

  top(): number {
    return this.stack[this.stack.length - 1][0];
  }

  getMin(): number {
    return this.stack[this.stack.length - 1][1];
  }
}

// ============================================================
// è§£æ³•ä¸‰ï¼šminStack åªå­˜æ›´å°å€¼ï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰
// ============================================================
// â±ï¸ æ‰€æœ‰æ“ä½œ O(1) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œä½†å®é™…ä½¿ç”¨æ›´å°‘
class MinStack3 {
  private stack: number[] = [];
  private minStack: number[] = [];

  push(val: number): void {
    this.stack.push(val);

    // åªåœ¨ val <= å½“å‰æœ€å°å€¼æ—¶æ‰ push åˆ° minStack
    if (
      this.minStack.length === 0 ||
      val <= this.minStack[this.minStack.length - 1]
    ) {
      this.minStack.push(val);
    }
  }

  pop(): void {
    const val = this.stack.pop();

    // å¦‚æœ pop çš„å€¼ç­‰äºå½“å‰æœ€å°å€¼ï¼ŒminStack ä¹Ÿè¦ pop
    if (val === this.minStack[this.minStack.length - 1]) {
      this.minStack.pop();
    }
  }

  top(): number {
    return this.stack[this.stack.length - 1];
  }

  getMin(): number {
    return this.minStack[this.minStack.length - 1];
  }
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•         | æ—¶é—´  | ç©ºé—´      | ç‰¹ç‚¹                  |
 * |-------------|-------|-----------|----------------------|
 * | è¾…åŠ©æ ˆ       | O(1)  | O(n)      | æ¨èï¼Œæ€è·¯æ¸…æ™°         |
 * | å­˜å…ƒç»„       | O(1)  | O(n)      | å•æ ˆå®ç°              |
 * | ä¼˜åŒ–è¾…åŠ©æ ˆ   | O(1)  | O(n)*     | ç©ºé—´ç•¥ä¼˜ï¼Œä½†é€»è¾‘å¤æ‚   |
 *
 * * æœ€åæƒ…å†µä»æ˜¯ O(n)ï¼Œä½†å¹³å‡æƒ…å†µæ›´ä¼˜
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. åŒæ­¥æ“ä½œï¼š
 *    - push å’Œ pop æ—¶ï¼Œstack å’Œ minStack è¦åŒæ­¥
 *    - ä¸è¦å¿˜è®° minStack çš„æ“ä½œ
 *
 * 2. ç›¸ç­‰å…ƒç´ çš„å¤„ç†ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ï¼š
 *    - push æ—¶æ¡ä»¶æ˜¯ <=ï¼Œä¸æ˜¯ <
 *    - å› ä¸ºå¯èƒ½æœ‰é‡å¤çš„æœ€å°å€¼
 *
 * 3. ç©ºæ ˆæ£€æŸ¥ï¼š
 *    - push ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ minStack ä¸ºç©º
 *    - éœ€è¦ç‰¹æ®Šå¤„ç†
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - æœ€å¤§æ ˆ â†’ ç±»ä¼¼æ€è·¯
 * - æ ˆæ’åº â†’ è¾…åŠ©æ ˆ
 * - ç”¨æ ˆå®ç°é˜Ÿåˆ— â†’ æ•°æ®ç»“æ„è®¾è®¡
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. çŠ¶æ€ç®¡ç†ï¼šéœ€è¦å¿«é€Ÿè·å–æœ€å°/æœ€å¤§çŠ¶æ€å€¼
 * 2. æ’¤é”€æ“ä½œï¼šä¿æŒæœ€å°å€¼çš„æ’¤é”€æ ˆ
 * 3. æ€§èƒ½ç›‘æ§ï¼šå®æ—¶è·å–æœ€å°å“åº”æ—¶é—´
 */

export { MinStack, MinStack2, MinStack3 };
export default MinStack;

