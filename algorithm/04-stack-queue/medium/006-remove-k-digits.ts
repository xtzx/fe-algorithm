/**
 * ğŸ“ é¢˜ç›®ï¼šç§»æ‰ K ä½æ•°å­—
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/remove-k-digits/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ ˆã€è´ªå¿ƒã€å­—ç¬¦ä¸²ã€å•è°ƒæ ˆ
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™ä½ ä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num å’Œä¸€ä¸ªæ•´æ•° kï¼Œ
 * ç§»é™¤è¿™ä¸ªæ•°ä¸­çš„ k ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚
 * è¯·ä½ ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¿™ä¸ªæœ€å°çš„æ•°å­—ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šnum = "1432219", k = 3
 * è¾“å‡ºï¼š"1219"
 * è§£é‡Šï¼šç§»é™¤æ‰ä¸‰ä¸ªæ•°å­— 4, 3, å’Œ 2 å½¢æˆä¸€ä¸ªæ–°çš„æœ€å°çš„æ•°å­— 1219
 *
 * è¾“å…¥ï¼šnum = "10200", k = 1
 * è¾“å‡ºï¼š"200"
 * è§£é‡Šï¼šç§»æ‰é¦–ä½çš„ 1 å‰©ä¸‹çš„æ•°å­—ä¸º 200
 *
 * è¾“å…¥ï¼šnum = "10", k = 2
 * è¾“å‡ºï¼š"0"
 * è§£é‡Šï¼šä»åŸæ•°å­—ç§»é™¤æ‰€æœ‰çš„æ•°å­—ï¼Œå‰©ä½™ä¸ºç©ºå°±æ˜¯ 0
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// è´ªå¿ƒæ€æƒ³ï¼š
// - å¯¹äºä¸¤ä¸ªä½æ•°ç›¸åŒçš„æ•°ï¼Œå·¦è¾¹çš„æ•°å­—è¶Šå°ï¼Œæ•´ä½“è¶Šå°
// - æ‰€ä»¥è¦å°½é‡è®©å·¦è¾¹çš„æ•°å­—å°
//
// ä»€ä¹ˆæ—¶å€™åº”è¯¥åˆ é™¤ä¸€ä¸ªæ•°å­—ï¼Ÿ
// - å½“å‰æ•°å­—æ¯”åé¢çš„æ•°å­—å¤§æ—¶ï¼Œåˆ é™¤å½“å‰æ•°å­—
// - ä¾‹å¦‚ "1432"ï¼Œ4 > 3ï¼Œåˆ é™¤ 4 å¾—åˆ° "132"
//
// è¿™æ­£æ˜¯å•è°ƒæ ˆçš„æ€æƒ³ï¼ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å¢æ ˆ

// ============================================================
// è§£æ³•ï¼šå•è°ƒæ ˆ + è´ªå¿ƒ
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * num = "1432219", k = 3
 *
 * å­—ç¬¦  æ“ä½œ                          æ ˆ           k
 * '1'   å…¥æ ˆ                         ['1']        3
 * '4'   4>1ï¼Œå…¥æ ˆ                    ['1','4']    3
 * '3'   3<4ï¼Œå¼¹4ï¼Œå…¥3                ['1','3']    2
 * '2'   2<3ï¼Œå¼¹3ï¼Œå…¥2                ['1','2']    1
 * '2'   2>=2ï¼Œå…¥æ ˆ                   ['1','2','2'] 1
 * '1'   1<2ï¼Œå¼¹2ï¼Œå…¥1                ['1','2','1'] 0
 * '9'   k=0ï¼Œç›´æ¥å…¥æ ˆ                ['1','2','1','9'] 0
 *
 * ç»“æœ: "1219"
 *
 * num = "10200", k = 1
 *
 * å­—ç¬¦  æ“ä½œ                          æ ˆ           k
 * '1'   å…¥æ ˆ                         ['1']        1
 * '0'   0<1ï¼Œå¼¹1ï¼Œå…¥0                ['0']        0
 * '2'   å…¥æ ˆ                         ['0','2']    0
 * '0'   å…¥æ ˆ                         ['0','2','0'] 0
 * '0'   å…¥æ ˆ                         ['0','2','0','0'] 0
 *
 * å»é™¤å‰å¯¼é›¶: "200"
 */
function removeKdigits(num: string, k: number): string {
  const stack: string[] = [];

  for (const digit of num) {
    // è´ªå¿ƒï¼šå½“å‰æ•°å­—æ¯”æ ˆé¡¶å°ï¼Œå¼¹å‡ºæ ˆé¡¶
    while (k > 0 && stack.length > 0 && stack[stack.length - 1] > digit) {
      stack.pop();
      k--;
    }
    stack.push(digit);
  }

  // å¦‚æœ k è¿˜æœ‰å‰©ä½™ï¼Œä»æœ«å°¾åˆ é™¤
  // ï¼ˆè¯´æ˜æ•°å­—æ˜¯é€’å¢çš„ï¼Œå¦‚ "12345"ï¼‰
  while (k > 0) {
    stack.pop();
    k--;
  }

  // å»é™¤å‰å¯¼é›¶
  let result = stack.join('').replace(/^0+/, '');

  return result || '0';
}

// ============================================================
// è§£æ³•äºŒï¼šæ›´æ¸…æ™°çš„å†™æ³•
// ============================================================
function removeKdigits_v2(num: string, k: number): string {
  if (k >= num.length) return '0';

  const stack: string[] = [];
  let remaining = k;

  for (const digit of num) {
    while (
      remaining > 0 &&
      stack.length > 0 &&
      stack[stack.length - 1] > digit
    ) {
      stack.pop();
      remaining--;
    }
    stack.push(digit);
  }

  // åˆ é™¤æœ«å°¾å¤šä½™çš„æ•°å­—
  const finalLength = num.length - k;
  const result = stack.slice(0, finalLength).join('');

  // å»é™¤å‰å¯¼é›¶
  let i = 0;
  while (i < result.length - 1 && result[i] === '0') {
    i++;
  }

  return result.slice(i) || '0';
}

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. k æ²¡ç”¨å®Œçš„æƒ…å†µï¼š
 *    - æ•°å­—é€’å¢æ—¶ï¼ˆå¦‚ "12345"ï¼‰ï¼Œæ ˆä¸­ä¸ä¼šå¼¹å‡º
 *    - éœ€è¦ä»æœ«å°¾åˆ é™¤å‰©ä½™çš„ k ä¸ª
 *
 * 2. å‰å¯¼é›¶å¤„ç†ï¼š
 *    - "10200" åˆ é™¤ 1 åæ˜¯ "0200"
 *    - éœ€è¦å»é™¤å‰å¯¼é›¶å¾—åˆ° "200"
 *
 * 3. ç»“æœä¸ºç©ºçš„æƒ…å†µï¼š
 *    - æ‰€æœ‰æ•°å­—éƒ½åˆ é™¤ååº”è¿”å› "0"
 *    - ä¸æ˜¯ç©ºå­—ç¬¦ä¸²
 *
 * 4. k >= num.lengthï¼š
 *    - åˆ é™¤æ‰€æœ‰æ•°å­—ï¼Œè¿”å› "0"
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - ç§»é™¤é‡å¤å­—æ¯ â†’ å•è°ƒæ ˆ + è´ªå¿ƒ
 * - æ‹¼æ¥æœ€å¤§æ•° â†’ ç±»ä¼¼æ€è·¯
 * - å»é™¤é‡å¤å­—æ¯ â†’ ç±»ä¼¼çš„æ ˆå¤„ç†
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æ•°å­—æ ¼å¼åŒ–ï¼šå¤„ç†æ•°å­—æ˜¾ç¤º
 * 2. ç‰ˆæœ¬å·å¤„ç†ï¼šåˆ é™¤å‰å¯¼é›¶
 * 3. è¾“å…¥éªŒè¯ï¼šå¤„ç†æ•°å­—è¾“å…¥
 */

export { removeKdigits, removeKdigits_v2 };
export default removeKdigits;

