# åŸºæ•°æ’åº (Radix Sort)

## ğŸ“Œ æ ¸å¿ƒæ€æƒ³

æŒ‰ç…§**æ¯ä¸€ä½**ï¼ˆä»ä½ä½åˆ°é«˜ä½æˆ–ä»é«˜ä½åˆ°ä½ä½ï¼‰è¿›è¡Œç¨³å®šæ’åºï¼Œå¤šè½®æ’åºåå¾—åˆ°æœ‰åºç»“æœã€‚

> å…³é”®æ´å¯Ÿï¼šåˆ©ç”¨ç¨³å®šæ’åºçš„æ€§è´¨ï¼Œä½ä½æ’åºåé«˜ä½å†æ’ï¼Œä¸ä¼šæ‰“ä¹±ä½ä½çš„ç›¸å¯¹é¡ºåºã€‚

---

## ğŸš¨ é€‚ç”¨è¾¹ç•Œï¼ˆå¿…é¡»æ»¡è¶³ï¼‰

| æ¡ä»¶ | è¦æ±‚ | åŸå›  |
|------|------|------|
| **æ•°æ®ç±»å‹** | æ•´æ•°æˆ–å®šé•¿å­—ç¬¦ä¸² | éœ€è¦æŒ‰ä½å¤„ç† |
| **ä½æ•°æœ‰é™** | d ä¸å¤ªå¤§ | æ—¶é—´ O(dÂ·n) |
| **éè´Ÿ** | é»˜è®¤éè´Ÿï¼ˆè´Ÿæ•°éœ€ç‰¹æ®Šå¤„ç†ï¼‰ | æŒ‰ä½æ¯”è¾ƒ |

### âš ï¸ ä»€ä¹ˆæ—¶å€™åˆ«ç”¨

- æµ®ç‚¹æ•°ï¼ˆä½è¡¨ç¤ºå¤æ‚ï¼‰
- ä½æ•°æå¤šï¼ˆå¦‚ 64 ä½æ•´æ•°ï¼‰
- æ··åˆæ­£è´Ÿæ•°ï¼ˆéœ€è¦é¢å¤–å¤„ç†ï¼‰

---

## ğŸ¯ åœºæ™¯è¯†åˆ«ä¿¡å·

| ä¿¡å· | æ¨èåº¦ |
|------|-------|
| å›ºå®šä½æ•°çš„æ•´æ•°ï¼ˆå¦‚æ‰‹æœºå·ã€IDï¼‰ | â­â­â­â­â­ |
| éœ€è¦ç¨³å®šæ’åºçš„æ•´æ•°æ•°æ® | â­â­â­â­ |
| å®šé•¿å­—ç¬¦ä¸²æ’åº | â­â­â­â­ |
| ä½æ•°å˜åŒ–æå¤§çš„æ•°æ® | âš ï¸ éœ€è¦å¡«å…… |

---

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| **æ—¶é—´å¤æ‚åº¦** | O(d Â· (n + k)) | d æ˜¯ä½æ•°ï¼Œk æ˜¯åŸºæ•°ï¼ˆé€šå¸¸ 10ï¼‰ |
| **ç©ºé—´å¤æ‚åº¦** | O(n + k) | è®¡æ•°æ’åºè¾…åŠ©ç©ºé—´ |
| **ç¨³å®šæ€§** | âœ… ç¨³å®š | æ¯è½®ä½¿ç”¨ç¨³å®šå­æ’åº |

---

## ğŸ”„ LSD vs MSD

| ç±»å‹ | æ–¹å‘ | ç‰¹ç‚¹ |
|------|------|------|
| **LSD** (Least Significant Digit) | ä½ä½ â†’ é«˜ä½ | ç®€å•ï¼Œé€‚åˆç­‰é•¿æ•°æ® |
| **MSD** (Most Significant Digit) | é«˜ä½ â†’ ä½ä½ | å¯æå‰ç»ˆæ­¢ï¼Œé€‚åˆå˜é•¿ |

æœ¬å®ç°ä½¿ç”¨ **LSD**ï¼ˆæ›´å¸¸ç”¨ï¼‰ã€‚

---

## ğŸ”„ ç®—æ³•æµç¨‹ï¼ˆMermaidï¼‰

```mermaid
flowchart TD
    A["è¾“å…¥: [170, 45, 75, 90, 802, 24, 2, 66]"]

    subgraph "ç¬¬1è½®: æŒ‰ä¸ªä½æ’åº"
        B1["170, 90 â†’ æ¡¶0"]
        B2["802, 2 â†’ æ¡¶2"]
        B3["24 â†’ æ¡¶4"]
        B4["45, 75 â†’ æ¡¶5"]
        B5["66 â†’ æ¡¶6"]
    end

    A --> B1
    B1 --> C["ç»“æœ: [170, 90, 802, 2, 24, 45, 75, 66]"]

    subgraph "ç¬¬2è½®: æŒ‰åä½æ’åº"
        D1["802, 2 â†’ æ¡¶0"]
        D2["24 â†’ æ¡¶2"]
        D3["45 â†’ æ¡¶4"]
        D4["66 â†’ æ¡¶6"]
        D5["170, 75 â†’ æ¡¶7"]
        D6["90 â†’ æ¡¶9"]
    end

    C --> D1
    D1 --> E["ç»“æœ: [802, 2, 24, 45, 66, 170, 75, 90]"]

    subgraph "ç¬¬3è½®: æŒ‰ç™¾ä½æ’åº"
        F1["2, 24, 45, 66, 75, 90 â†’ æ¡¶0"]
        F2["170 â†’ æ¡¶1"]
        F3["802 â†’ æ¡¶8"]
    end

    E --> F1
    F1 --> G["æœ€ç»ˆ: [2, 24, 45, 66, 75, 90, 170, 802]"]

    style G fill:#90EE90
```

### ç¨³å®šæ€§ä¿è¯ç¤ºæ„

```mermaid
graph LR
    subgraph "ç¬¬1è½®å"
        A["170"] --> B["90"]
        note1["ä¸ªä½éƒ½æ˜¯0ï¼Œ170åœ¨90å‰é¢ï¼ˆç¨³å®šï¼‰"]
    end

    subgraph "ç¬¬2è½®å"
        C["170"] --> D["75"]
        note2["åä½éƒ½æ˜¯7ï¼Œ170åœ¨75å‰é¢ï¼ˆç»§ç»­ç¨³å®šï¼‰"]
    end
```

---

## ğŸ’» æ ¸å¿ƒå®ç°

```typescript
/**
 * åŸºæ•°æ’åºï¼ˆLSDï¼Œéè´Ÿæ•´æ•°ï¼‰
 */
export function radixSort(arr: readonly number[]): number[] {
  const n = arr.length;
  if (n <= 1) return [...arr];

  // æ‰¾æœ€å¤§å€¼ç¡®å®šä½æ•°
  let max = 0;
  for (const num of arr) {
    if (num < 0) throw new Error('åŸºæ•°æ’åºä¸æ”¯æŒè´Ÿæ•°');
    if (num > max) max = num;
  }

  let result = [...arr];
  const RADIX = 10;

  // æŒ‰æ¯ä¸€ä½è¿›è¡Œè®¡æ•°æ’åº
  for (let exp = 1; max / exp >= 1; exp *= RADIX) {
    result = countingSortByDigit(result, exp, RADIX);
  }

  return result;
}

/**
 * æŒ‰æŸä¸€ä½è¿›è¡Œè®¡æ•°æ’åº
 */
function countingSortByDigit(
  arr: number[],
  exp: number,
  radix: number
): number[] {
  const n = arr.length;
  const output = new Array(n);
  const count = new Array(radix).fill(0);

  // è®¡æ•°
  for (const num of arr) {
    const digit = Math.floor(num / exp) % radix;
    count[digit]++;
  }

  // å‰ç¼€å’Œ
  for (let i = 1; i < radix; i++) {
    count[i] += count[i - 1];
  }

  // ä»åå¾€å‰å›å¡«ï¼ˆç¨³å®šï¼‰
  for (let i = n - 1; i >= 0; i--) {
    const digit = Math.floor(arr[i] / exp) % radix;
    output[count[digit] - 1] = arr[i];
    count[digit]--;
  }

  return output;
}
```

---

## ğŸ”§ å¯¹è±¡æ’åºç‰ˆæœ¬

```typescript
/**
 * æŒ‰æ•´æ•°å­—æ®µè¿›è¡ŒåŸºæ•°æ’åº
 */
export function radixSortBy<T>(
  arr: readonly T[],
  keyFn: (item: T) => number
): T[] {
  const n = arr.length;
  if (n <= 1) return [...arr];

  // æ‰¾æœ€å¤§ key
  let max = 0;
  for (const item of arr) {
    const key = keyFn(item);
    if (key < 0) throw new Error('key ä¸èƒ½ä¸ºè´Ÿ');
    if (key > max) max = key;
  }

  let result = [...arr];
  const RADIX = 10;

  for (let exp = 1; max / exp >= 1; exp *= RADIX) {
    result = countingSortByDigitGeneric(result, keyFn, exp, RADIX);
  }

  return result;
}

function countingSortByDigitGeneric<T>(
  arr: T[],
  keyFn: (item: T) => number,
  exp: number,
  radix: number
): T[] {
  const n = arr.length;
  const output = new Array(n);
  const count = new Array(radix).fill(0);

  for (const item of arr) {
    const digit = Math.floor(keyFn(item) / exp) % radix;
    count[digit]++;
  }

  for (let i = 1; i < radix; i++) {
    count[i] += count[i - 1];
  }

  for (let i = n - 1; i >= 0; i--) {
    const digit = Math.floor(keyFn(arr[i]) / exp) % radix;
    output[count[digit] - 1] = arr[i];
    count[digit]--;
  }

  return output;
}
```

---

## ğŸ”§ æ”¯æŒè´Ÿæ•°

```typescript
/**
 * åŸºæ•°æ’åºï¼ˆæ”¯æŒè´Ÿæ•°ï¼‰
 */
export function radixSortWithNegative(arr: readonly number[]): number[] {
  // åˆ†ç¦»æ­£è´Ÿæ•°
  const negative: number[] = [];
  const nonNegative: number[] = [];

  for (const num of arr) {
    if (num < 0) {
      negative.push(-num); // å–ç»å¯¹å€¼
    } else {
      nonNegative.push(num);
    }
  }

  // åˆ†åˆ«æ’åº
  const sortedNegative = radixSort(negative).reverse().map(x => -x);
  const sortedNonNegative = radixSort(nonNegative);

  // åˆå¹¶ï¼šè´Ÿæ•°åœ¨å‰ï¼ˆå·²åè½¬ï¼‰ï¼Œéè´Ÿæ•°åœ¨å
  return [...sortedNegative, ...sortedNonNegative];
}
```

---

## ğŸŒ å‰ç«¯ä¸šåŠ¡åœºæ™¯

### 1. æ‰‹æœºå·æ’åº

```typescript
// æ‰‹æœºå·éƒ½æ˜¯ 11 ä½æ•°å­—
const phoneNumbers = ['13812345678', '15987654321', '13698765432'];

// è½¬ä¸ºæ•°å­—ååŸºæ•°æ’åº
const sorted = radixSort(phoneNumbers.map(Number));
```

### 2. è®¢å•å·æ’åº

```typescript
interface Order {
  id: number; // 8ä½è®¢å•å·
  amount: number;
}

// æŒ‰è®¢å•å·æ’åº
const sorted = radixSortBy(orders, o => o.id);
```

### 3. æ—¶é—´æˆ³æ’åº

```typescript
interface Event {
  name: string;
  timestamp: number; // Unix æ—¶é—´æˆ³
}

// æŒ‰æ—¶é—´æˆ³æ’åºï¼ˆç¨³å®šï¼‰
const sorted = radixSortBy(events, e => e.timestamp);
```

---

## ğŸ†š ä¸è®¡æ•°æ’åºå¯¹æ¯”

| ç‰¹æ€§ | è®¡æ•°æ’åº | åŸºæ•°æ’åº |
|------|---------|---------|
| é€‚ç”¨èŒƒå›´ | å°èŒƒå›´æ•´æ•° | ä»»æ„ä½æ•°æ•´æ•° |
| æ—¶é—´ | O(n + k) | O(d Â· (n + k)) |
| ç©ºé—´ | O(k) | O(n + k) |
| ç¨³å®šæ€§ | âœ… | âœ… |
| å€¼åŸŸé™åˆ¶ | ä¸¥æ ¼ | è¾ƒå®½æ¾ |

---

## âœ… è‡ªæ£€æ¸…å•

- [ ] ç†è§£ LSD ä»ä½ä½åˆ°é«˜ä½çš„æ’åºè¿‡ç¨‹
- [ ] çŸ¥é“æ¯è½®å¿…é¡»ä½¿ç”¨ç¨³å®šæ’åº
- [ ] èƒ½åˆ†ææ—¶é—´å¤æ‚åº¦ O(dÂ·(n+k))
- [ ] èƒ½å¤„ç†è´Ÿæ•°ï¼ˆåˆ†ç¦»æˆ–åç§»ï¼‰
- [ ] çŸ¥é“åŸºæ•°é€‰æ‹©å¯¹æ€§èƒ½çš„å½±å“ï¼ˆé€šå¸¸ç”¨ 10 æˆ– 256ï¼‰

