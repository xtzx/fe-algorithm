# 基准测试框架

> 对排序算法进行统一的性能基准测试。

---

## 📁 目录结构

```
基准测试/
├── README.md          # 本文件
└── src/
    ├── 测试用例集.ts   # 测试数据定义
    └── 运行基准.ts     # 基准测试运行器
```

---

## 🚀 使用方式

### 运行基准测试

```bash
# 使用 ts-node 运行
npx ts-node 基准测试/src/运行基准.ts

# 或编译后运行
npx tsc
node 基准测试/dist/运行基准.js
```

### 添加新算法

1. 在 `算法包/` 下创建新算法目录
2. 实现标准接口（`sort` 函数和 `meta` 元信息）
3. 在 `运行基准.ts` 中注册算法

```typescript
import { sort as mySort, meta as myMeta } from '../../算法包/我的算法/src';

const algorithms = [
  // ... 已有算法
  { name: myMeta.name, sort: mySort, stable: myMeta.stable },
];
```

---

## 📊 测试用例

### 数据规模

| 规模 | 元素数量 | 用途 |
|------|----------|------|
| 小 | 100 | 快速验证 |
| 中小 | 1,000 | 常规测试 |
| 中 | 10,000 | 性能对比 |
| 大 | 100,000 | 压力测试 |
| 超大 | 1,000,000 | O(n log n) 算法 |

### 数据分布

| 分布 | 描述 | 测试目的 |
|------|------|----------|
| random | 完全随机 | 平均情况 |
| sorted | 已排序 | 最好情况 |
| reversed | 完全逆序 | 最坏情况 |
| nearlySorted | 近乎有序 | TimSort 等 |
| fewUnique | 重复多 | 三路快排等 |

---

## 📈 报告示例

```
┌──────────────┬────────┬─────────┬──────────┬──────────┐
│ 算法         │ n=1000 │ n=10000 │ n=100000 │ 稳定性   │
├──────────────┼────────┼─────────┼──────────┼──────────┤
│ 冒泡排序     │ 5ms    │ 450ms   │ 跳过     │ ✅       │
│ 选择排序     │ 3ms    │ 280ms   │ 跳过     │ ❌       │
│ 插入排序     │ 2ms    │ 180ms   │ 跳过     │ ✅       │
│ 希尔排序     │ 1ms    │ 15ms    │ 250ms    │ ❌       │
│ 归并排序     │ 1ms    │ 12ms    │ 150ms    │ ✅       │
│ 快速排序     │ 0.5ms  │ 8ms     │ 100ms    │ ❌       │
│ 堆排序       │ 1ms    │ 15ms    │ 180ms    │ ❌       │
│ TimSort      │ 0.8ms  │ 10ms    │ 120ms    │ ✅       │
└──────────────┴────────┴─────────┴──────────┴──────────┘
```

---

## 🔧 自定义测试

```typescript
import { TestSuite } from './src/测试用例集';
import { runBenchmark } from './src/运行基准';

// 自定义测试套件
const mySuite: TestSuite = {
  name: '我的测试',
  sizes: [100, 1000],
  distributions: ['random', 'sorted'],
};

runBenchmark(mySuite);
```

---

## ⚠️ 注意事项

1. **预热**：每个算法先运行 3 次预热，让 JIT 优化
2. **多次运行**：每个配置运行 5-10 次，取平均值
3. **去除异常值**：去掉最高和最低值
4. **隔离环境**：避免其他进程干扰
5. **大规模慎用**：O(n²) 算法在大规模时非常慢

---

## 📋 开发计划

- [x] 基础框架
- [ ] S1a 算法接入（冒泡/选择/插入/希尔）
- [ ] S1b 算法接入（归并/快排/堆排）
- [ ] S2 算法接入（三路快排/Introsort/TimSort）
- [ ] S3 算法接入（计数/桶/基数）
- [ ] HTML 报告输出
- [ ] 图表可视化

