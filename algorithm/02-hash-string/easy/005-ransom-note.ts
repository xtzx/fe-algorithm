/**
 * ğŸ“ é¢˜ç›®ï¼šèµé‡‘ä¿¡
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/ransom-note/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šå“ˆå¸Œè¡¨ã€å­—ç¬¦ä¸²ã€è®¡æ•°
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼šransomNote å’Œ magazineï¼Œ
 * åˆ¤æ–­ ransomNote èƒ½ä¸èƒ½ç”± magazine é‡Œé¢çš„å­—ç¬¦æ„æˆã€‚
 * magazine ä¸­çš„æ¯ä¸ªå­—ç¬¦åªèƒ½åœ¨ ransomNote ä¸­ä½¿ç”¨ä¸€æ¬¡ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šransomNote = "a", magazine = "b"
 * è¾“å‡ºï¼šfalse
 *
 * è¾“å…¥ï¼šransomNote = "aa", magazine = "ab"
 * è¾“å‡ºï¼šfalse
 *
 * è¾“å…¥ï¼šransomNote = "aa", magazine = "aab"
 * è¾“å‡ºï¼štrue
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æ
// ============================================================
//
// æ ¸å¿ƒé—®é¢˜ï¼šmagazine çš„å­—ç¬¦èƒ½å¦è¦†ç›– ransomNote çš„å­—ç¬¦
//
// æ€è·¯ï¼š
// 1. ç»Ÿè®¡ magazine ä¸­æ¯ä¸ªå­—ç¬¦çš„æ•°é‡
// 2. éå† ransomNoteï¼Œæ¯ç”¨ä¸€ä¸ªå­—ç¬¦å°±å‡ 1
// 3. å¦‚æœæŸä¸ªå­—ç¬¦æ•°é‡ä¸è¶³ï¼Œè¿”å› false
//
// ä¸å¼‚ä½è¯åˆ¤æ–­çš„åŒºåˆ«ï¼š
// - å¼‚ä½è¯ï¼šä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦é¢‘ç‡å®Œå…¨ç›¸åŒ
// - èµé‡‘ä¿¡ï¼šmagazine çš„é¢‘ç‡ >= ransomNote çš„é¢‘ç‡

// ============================================================
// è§£æ³•ä¸€ï¼šå“ˆå¸Œè¡¨è®¡æ•°
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(m + n) | ç©ºé—´å¤æ‚åº¦ï¼šO(k)ï¼Œk ä¸ºå­—ç¬¦é›†å¤§å°

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * ransomNote = "aa", magazine = "aab"
 *
 * Step 1: ç»Ÿè®¡ magazine
 *         {a: 2, b: 1}
 *
 * Step 2: éå† ransomNoteï¼Œé€ä¸ªæ‰£å‡
 *         'a': {a: 1, b: 1}  âœ“
 *         'a': {a: 0, b: 1}  âœ“
 *
 * æ‰€æœ‰å­—ç¬¦éƒ½å¤Ÿç”¨ï¼Œè¿”å› true
 */
function canConstruct_v1(ransomNote: string, magazine: string): boolean {
  // ç»Ÿè®¡ magazine çš„å­—ç¬¦é¢‘ç‡
  const count = new Map<string, number>();

  for (const char of magazine) {
    count.set(char, (count.get(char) || 0) + 1);
  }

  // éå† ransomNoteï¼Œæ£€æŸ¥æ˜¯å¦å¤Ÿç”¨
  for (const char of ransomNote) {
    const cnt = count.get(char) || 0;

    if (cnt === 0) {
      return false; // å­—ç¬¦ä¸å¤Ÿç”¨
    }

    count.set(char, cnt - 1);
  }

  return true;
}

// ============================================================
// è§£æ³•äºŒï¼šæ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨ï¼ˆæ›´å¿«ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(m + n) | ç©ºé—´å¤æ‚åº¦ï¼šO(26) = O(1)
// ğŸ“ å› ä¸ºåªæœ‰å°å†™å­—æ¯ï¼Œç”¨æ•°ç»„æ›´é«˜æ•ˆ

function canConstruct_v2(ransomNote: string, magazine: string): boolean {
  // å¦‚æœ ransomNote æ›´é•¿ï¼Œä¸€å®šä¸è¡Œ
  if (ransomNote.length > magazine.length) {
    return false;
  }

  const count = new Array(26).fill(0);
  const aCode = 'a'.charCodeAt(0);

  // ç»Ÿè®¡ magazine
  for (const char of magazine) {
    count[char.charCodeAt(0) - aCode]++;
  }

  // æ£€æŸ¥ ransomNote
  for (const char of ransomNote) {
    const idx = char.charCodeAt(0) - aCode;
    if (count[idx] === 0) {
      return false;
    }
    count[idx]--;
  }

  return true;
}

// ============================================================
// è§£æ³•ä¸‰ï¼šä¸€æ¬¡éå†ï¼ˆæŠµæ¶ˆæ³•ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(m + n) | ç©ºé—´å¤æ‚åº¦ï¼šO(k)
// ğŸ“ å…ˆç»™ ransomNote çš„å­—ç¬¦ -1ï¼Œå†ç»™ magazine çš„å­—ç¬¦ +1

function canConstruct_v3(ransomNote: string, magazine: string): boolean {
  const count = new Map<string, number>();

  // ransomNote çš„å­—ç¬¦ -1
  for (const char of ransomNote) {
    count.set(char, (count.get(char) || 0) - 1);
  }

  // magazine çš„å­—ç¬¦ +1
  for (const char of magazine) {
    count.set(char, (count.get(char) || 0) + 1);
  }

  // æ£€æŸ¥æ˜¯å¦æœ‰è´Ÿæ•°
  for (const value of count.values()) {
    if (value < 0) {
      return false;
    }
  }

  return true;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•      | æ—¶é—´     | ç©ºé—´  | ç‰¹ç‚¹                    |
 * |----------|---------|-------|------------------------|
 * | å“ˆå¸Œè¡¨    | O(m+n)  | O(k)  | é€šç”¨ï¼Œä»£ç æ¸…æ™°           |
 * | æ•°ç»„      | O(m+n)  | O(1)  | æ›´å¿«ï¼Œé€‚åˆå›ºå®šå­—ç¬¦é›†     |
 * | æŠµæ¶ˆæ³•    | O(m+n)  | O(k)  | ä¸€ä¸ª Map è§£å†³          |
 *
 * æ¨èè§£æ³•äºŒï¼ˆæ•°ç»„ï¼‰ï¼Œå› ä¸ºé¢˜ç›®æ˜ç¡®æ˜¯å°å†™å­—æ¯ã€‚
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. é•¿åº¦é¢„æ£€æŸ¥ï¼š
 *    å¦‚æœ ransomNote.length > magazine.lengthï¼Œç›´æ¥è¿”å› false
 *
 * 2. å­—ç¬¦é¡ºåºä¸é‡è¦ï¼š
 *    ä¸éœ€è¦è€ƒè™‘å­—ç¬¦çš„é¡ºåºï¼Œåªå…³å¿ƒæ•°é‡
 *
 * 3. æ¯ä¸ªå­—ç¬¦åªèƒ½ç”¨ä¸€æ¬¡ï¼š
 *    ç”¨äº†å°±è¦å‡ 1
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ â†’ é¢‘ç‡å®Œå…¨ç›¸ç­‰
 * - æ‰¾ä¸åŒ â†’ ä¸¤ä¸ªå­—ç¬¦ä¸²åªå·®ä¸€ä¸ªå­—ç¬¦
 * - å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ â†’ é¢‘ç‡ä¸º 1 çš„ç¬¬ä¸€ä¸ª
 *
 * å…±åŒæ¨¡å¼ï¼šå­—ç¬¦é¢‘ç‡ç»Ÿè®¡
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æƒé™æ£€æŸ¥ï¼šæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™æ˜¯å¦è¦†ç›–æ‰€éœ€æƒé™
 * 2. åº“å­˜æ£€æŸ¥ï¼šæ£€æŸ¥åº“å­˜æ˜¯å¦æ»¡è¶³è®¢å•éœ€æ±‚
 * 3. èµ„æºåˆ†é…ï¼šæ£€æŸ¥èµ„æºæ˜¯å¦è¶³å¤Ÿåˆ†é…
 * 4. æ ‡ç­¾åŒ¹é…ï¼šæ£€æŸ¥æ–‡ç« æ˜¯å¦åŒ…å«æ‰€éœ€çš„æ ‡ç­¾
 */

export { canConstruct_v1, canConstruct_v2, canConstruct_v3 };
export default canConstruct_v2;

