/**
 * ğŸ“ é¢˜ç›®ï¼šé“¾è¡¨çš„ä¸­é—´ç»“ç‚¹
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/middle-of-the-linked-list/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šé“¾è¡¨ã€åŒæŒ‡é’ˆ
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™ä½ å•é“¾è¡¨çš„å¤´ç»“ç‚¹ headï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚
 * å¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šhead = [1,2,3,4,5]
 * è¾“å‡ºï¼š[3,4,5]
 * è§£é‡Šï¼šé“¾è¡¨åªæœ‰ä¸€ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼ä¸º 3
 *
 * è¾“å…¥ï¼šhead = [1,2,3,4,5,6]
 * è¾“å‡ºï¼š[4,5,6]
 * è§£é‡Šï¼šè¯¥é“¾è¡¨æœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼åˆ†åˆ«ä¸º 3 å’Œ 4ï¼Œè¿”å›ç¬¬äºŒä¸ªç»“ç‚¹
 */

// é“¾è¡¨èŠ‚ç‚¹å®šä¹‰
class ListNode {
  val: number;
  next: ListNode | null;
  constructor(val?: number, next?: ListNode | null) {
    this.val = val === undefined ? 0 : val;
    this.next = next === undefined ? null : next;
  }
}

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æ
// ============================================================
//
// å¿«æ…¢æŒ‡é’ˆæ˜¯æ‰¾é“¾è¡¨ä¸­ç‚¹çš„æœ€ä½³æ–¹æ¡ˆï¼
//
// æ ¸å¿ƒæ€æƒ³ï¼š
// - å¿«æŒ‡é’ˆæ¯æ¬¡èµ° 2 æ­¥
// - æ…¢æŒ‡é’ˆæ¯æ¬¡èµ° 1 æ­¥
// - å½“å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨ä¸­é—´
//
// ä¸ºä»€ä¹ˆï¼Ÿ
// - å¿«æŒ‡é’ˆèµ°çš„è·ç¦»æ˜¯æ…¢æŒ‡é’ˆçš„ 2 å€
// - æ‰€ä»¥æ…¢æŒ‡é’ˆåœ¨å¿«æŒ‡é’ˆèµ°å®Œä¸€åŠæ—¶åˆ°è¾¾ä¸­ç‚¹

// ============================================================
// è§£æ³•ä¸€ï¼šå¿«æ…¢æŒ‡é’ˆï¼ˆæ¨èï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * ã€å¥‡æ•°é•¿åº¦ã€‘[1, 2, 3, 4, 5]
 *
 * åˆå§‹:     1 -> 2 -> 3 -> 4 -> 5 -> null
 *           â†‘
 *          s,f
 *
 * Step 1:  1 -> 2 -> 3 -> 4 -> 5 -> null
 *               â†‘         â†‘
 *               s         f
 *
 * Step 2:  1 -> 2 -> 3 -> 4 -> 5 -> null
 *                    â†‘              â†‘
 *                    s              f(null)
 *
 * è¿”å› slow (å€¼ä¸º 3)
 *
 * ã€å¶æ•°é•¿åº¦ã€‘[1, 2, 3, 4, 5, 6]
 *
 * åˆå§‹:     1 -> 2 -> 3 -> 4 -> 5 -> 6 -> null
 *           â†‘
 *          s,f
 *
 * Step 1:  1 -> 2 -> 3 -> 4 -> 5 -> 6 -> null
 *               â†‘         â†‘
 *               s         f
 *
 * Step 2:  1 -> 2 -> 3 -> 4 -> 5 -> 6 -> null
 *                    â†‘              â†‘
 *                    s              f
 *
 * Step 3:  1 -> 2 -> 3 -> 4 -> 5 -> 6 -> null
 *                         â†‘              â†‘
 *                         s              f(null)
 *
 * è¿”å› slow (å€¼ä¸º 4ï¼Œå³ç¬¬äºŒä¸ªä¸­é—´èŠ‚ç‚¹)
 */
function middleNode_v1(head: ListNode | null): ListNode | null {
  if (!head) return null;

  let slow: ListNode | null = head;
  let fast: ListNode | null = head;

  // fast && fast.nextï¼šå¶æ•°é•¿åº¦æ—¶è¿”å›ç¬¬äºŒä¸ªä¸­é—´èŠ‚ç‚¹
  while (fast && fast.next) {
    slow = slow!.next;
    fast = fast.next.next;
  }

  return slow;
}

// ============================================================
// è§£æ³•äºŒï¼šè¿”å›ç¬¬ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹çš„å˜ä½“
// ============================================================
// ğŸ“ å¦‚æœå¶æ•°é•¿åº¦æ—¶è¦è¿”å›ç¬¬ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹

function middleNodeLeft(head: ListNode | null): ListNode | null {
  if (!head) return null;

  let slow: ListNode | null = head;
  let fast: ListNode | null = head;

  // fast.next && fast.next.nextï¼šå¶æ•°é•¿åº¦æ—¶è¿”å›ç¬¬ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹
  while (fast.next && fast.next.next) {
    slow = slow!.next;
    fast = fast.next.next;
  }

  return slow;
}

// ============================================================
// è§£æ³•ä¸‰ï¼šä¸¤æ¬¡éå†ï¼ˆå¯¹æ¯”ç”¨ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)
// ğŸ“ å…ˆè®¡ç®—é•¿åº¦ï¼Œå†èµ°åˆ°ä¸­é—´

function middleNode_v2(head: ListNode | null): ListNode | null {
  if (!head) return null;

  // ç¬¬ä¸€æ¬¡éå†ï¼šè®¡ç®—é•¿åº¦
  let length = 0;
  let current: ListNode | null = head;
  while (current) {
    length++;
    current = current.next;
  }

  // ç¬¬äºŒæ¬¡éå†ï¼šèµ°åˆ°ä¸­é—´
  const mid = Math.floor(length / 2);
  current = head;
  for (let i = 0; i < mid; i++) {
    current = current!.next;
  }

  return current;
}

// ============================================================
// è§£æ³•ä¸‰ï¼šè½¬æˆæ•°ç»„
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)
// âŒ ä¸æ¨èï¼Œä½†æ€è·¯ç®€å•

function middleNode_v3(head: ListNode | null): ListNode | null {
  const nodes: ListNode[] = [];
  let current = head;

  while (current) {
    nodes.push(current);
    current = current.next;
  }

  return nodes[Math.floor(nodes.length / 2)] || null;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•       | æ—¶é—´  | ç©ºé—´  | ç‰¹ç‚¹                        |
 * |-----------|-------|-------|----------------------------|
 * | å¿«æ…¢æŒ‡é’ˆ   | O(n)  | O(1)  | æ¨èï¼Œä¸€æ¬¡éå†              |
 * | ä¸¤æ¬¡éå†   | O(n)  | O(1)  | ç®€å•ä½†éœ€è¦ä¸¤æ¬¡éå†          |
 * | æ•°ç»„       | O(n)  | O(n)  | ç®€å•ä½†ç©ºé—´ä¸ä¼˜              |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. å¾ªç¯æ¡ä»¶å†³å®šè¿”å›å“ªä¸ªä¸­é—´èŠ‚ç‚¹ï¼š
 *    - fast && fast.nextï¼šè¿”å›ç¬¬äºŒä¸ªï¼ˆé å³ï¼‰
 *    - fast.next && fast.next.nextï¼šè¿”å›ç¬¬ä¸€ä¸ªï¼ˆé å·¦ï¼‰
 *
 * 2. ç©ºé“¾è¡¨æ£€æŸ¥ï¼š
 *    - å…ˆæ£€æŸ¥ head æ˜¯å¦ä¸º null
 *
 * 3. é¢˜ç›®è¦æ±‚ï¼š
 *    - æœ¬é¢˜è¦æ±‚å¶æ•°é•¿åº¦æ—¶è¿”å›ç¬¬äºŒä¸ªä¸­é—´èŠ‚ç‚¹
 *    - å…¶ä»–é¢˜ç›®å¯èƒ½è¦æ±‚ç¬¬ä¸€ä¸ªï¼Œæ³¨æ„çœ‹æ¸…æ¥š
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - å›æ–‡é“¾è¡¨ â†’ æ‰¾ä¸­ç‚¹ + åè½¬ååŠéƒ¨åˆ†
 * - æ’åºé“¾è¡¨ â†’ æ‰¾ä¸­ç‚¹ + åˆ†æ²»å½’å¹¶
 * - é‡æ’é“¾è¡¨ â†’ æ‰¾ä¸­ç‚¹ + åè½¬ + åˆå¹¶
 *
 * å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹æ˜¯å¾ˆå¤šé“¾è¡¨é¢˜ç›®çš„ç¬¬ä¸€æ­¥ï¼
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. åˆ†é¡µï¼šå°†åˆ—è¡¨åˆ†æˆå‰åä¸¤éƒ¨åˆ†
 * 2. ç€‘å¸ƒæµï¼šå¹³å‡åˆ†é…å…ƒç´ åˆ°ä¸¤åˆ—
 * 3. äºŒåˆ†å±•ç¤ºï¼šå¦‚"æ›´å¤š"æŒ‰é’®å±•å¼€å‰åå†…å®¹
 * 4. åŠ¨ç”»åˆ†ç»„ï¼šåˆ†ç»„æ‰§è¡ŒåŠ¨ç”»æ•ˆæœ
 */

export { ListNode, middleNode_v1, middleNode_v2, middleNode_v3, middleNodeLeft };
export default middleNode_v1;

