/**
 * ğŸ“ é¢˜ç›®ï¼šäºŒå‰æ ‘çš„å±‚åºéå†
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/binary-tree-level-order-traversal/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ ‘ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ã€äºŒå‰æ ‘
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ rootï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ å±‚åºéå†ã€‚
 * ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚
 *
 * ç¤ºä¾‹ï¼š
 *        3
 *       / \
 *      9  20
 *        /  \
 *       15   7
 *
 * è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
 * è¾“å‡ºï¼š[[3],[9,20],[15,7]]
 */

class TreeNode {
  val: number;
  left: TreeNode | null;
  right: TreeNode | null;
  constructor(val?: number, left?: TreeNode | null, right?: TreeNode | null) {
    this.val = val === undefined ? 0 : val;
    this.left = left === undefined ? null : left;
    this.right = right === undefined ? null : right;
  }
}

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å±‚åºéå† = BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰
//
// å…³é”®ï¼šå¦‚ä½•çŸ¥é“ä¸€å±‚çš„ç»“æŸï¼Ÿ
// - åœ¨å¤„ç†æ¯ä¸€å±‚å‰ï¼Œè®°å½•å½“å‰é˜Ÿåˆ—å¤§å°
// - åªå¤„ç†è¿™ä¹ˆå¤šä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯ä¸€å±‚
//
// ä¹Ÿå¯ä»¥ç”¨é€’å½’ï¼Œä¼ é€’å±‚çº§å‚æ•°

// ============================================================
// è§£æ³•ä¸€ï¼šBFSï¼ˆæ¨èï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š BFS æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 *        3
 *       / \
 *      9  20
 *        /  \
 *       15   7
 *
 * åˆå§‹ï¼šqueue = [3]
 *
 * ç¬¬ 1 å±‚ï¼šlevelSize = 1
 *   å¤„ç† 3ï¼Œå­èŠ‚ç‚¹å…¥é˜Ÿ
 *   queue = [9, 20]
 *   level = [3]
 *
 * ç¬¬ 2 å±‚ï¼šlevelSize = 2
 *   å¤„ç† 9ï¼ˆæ— å­èŠ‚ç‚¹ï¼‰
 *   å¤„ç† 20ï¼Œå­èŠ‚ç‚¹å…¥é˜Ÿ
 *   queue = [15, 7]
 *   level = [9, 20]
 *
 * ç¬¬ 3 å±‚ï¼šlevelSize = 2
 *   å¤„ç† 15, 7ï¼ˆå‡æ— å­èŠ‚ç‚¹ï¼‰
 *   queue = []
 *   level = [15, 7]
 *
 * ç»“æœï¼š[[3], [9, 20], [15, 7]]
 */
function levelOrder_v1(root: TreeNode | null): number[][] {
  if (!root) return [];

  const result: number[][] = [];
  const queue: TreeNode[] = [root];

  while (queue.length > 0) {
    const levelSize = queue.length; // å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
    const currentLevel: number[] = [];

    for (let i = 0; i < levelSize; i++) {
      const node = queue.shift()!;
      currentLevel.push(node.val);

      // å­èŠ‚ç‚¹å…¥é˜Ÿ
      if (node.left) queue.push(node.left);
      if (node.right) queue.push(node.right);
    }

    result.push(currentLevel);
  }

  return result;
}

// ============================================================
// è§£æ³•äºŒï¼šé€’å½’ï¼ˆDFSï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(h)
function levelOrder_v2(root: TreeNode | null): number[][] {
  const result: number[][] = [];

  function traverse(node: TreeNode | null, level: number) {
    if (!node) return;

    // å¦‚æœå½“å‰å±‚è¿˜æ²¡æœ‰æ•°ç»„ï¼Œåˆ›å»ºä¸€ä¸ª
    if (result.length === level) {
      result.push([]);
    }

    // æŠŠå½“å‰èŠ‚ç‚¹åŠ å…¥å¯¹åº”å±‚
    result[level].push(node.val);

    // é€’å½’å¤„ç†å·¦å³å­èŠ‚ç‚¹
    traverse(node.left, level + 1);
    traverse(node.right, level + 1);
  }

  traverse(root, 0);
  return result;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•     | æ—¶é—´  | ç©ºé—´  | ç‰¹ç‚¹                     |
 * |---------|-------|-------|-------------------------|
 * | BFS     | O(n)  | O(n)  | æ¨èï¼Œæœ€ç›´è§‚              |
 * | DFS     | O(n)  | O(h)  | é€’å½’å®ç°                 |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. levelSize è¦åœ¨å¾ªç¯å‰è®°å½•ï¼š
 *    - ä¸èƒ½ç”¨ queue.length ä½œä¸ºå¾ªç¯æ¡ä»¶
 *    - å› ä¸ºå¾ªç¯ä¸­ä¼šæœ‰æ–°èŠ‚ç‚¹å…¥é˜Ÿ
 *
 * 2. é€’å½’æ–¹å¼çš„å±‚çº§ï¼š
 *    - æ ¹èŠ‚ç‚¹æ˜¯ç¬¬ 0 å±‚
 *    - level === result.length æ—¶åˆ›å»ºæ–°æ•°ç»„
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - å±‚åºéå† IIï¼ˆä»åº•å‘ä¸Šï¼‰â†’ ç»“æœåè½¬
 * - é”¯é½¿å½¢å±‚åºéå† â†’ å¥‡æ•°å±‚åè½¬
 * - äºŒå‰æ ‘çš„å³è§†å›¾ â†’ æ¯å±‚æœ€åä¸€ä¸ª
 * - äºŒå‰æ ‘æ¯å±‚çš„å¹³å‡å€¼ â†’ è®¡ç®—å¹³å‡
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. ç»„ç»‡æ¶æ„å›¾ï¼šæŒ‰å±‚çº§å±•ç¤º
 * 2. ç›®å½•æ ‘å±•å¼€ï¼šé€å±‚åŠ è½½
 * 3. èœå•æ¸²æŸ“ï¼šæŒ‰å±‚çº§æ¸²æŸ“èœå•
 */

export { TreeNode, levelOrder_v1, levelOrder_v2 };
export default levelOrder_v1;

