/**
 * ğŸ“ é¢˜ç›®ï¼šæœ€å°è·¯å¾„å’Œ
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/minimum-path-sum/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ•°ç»„ã€åŠ¨æ€è§„åˆ’ã€çŸ©é˜µ
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ m x n ç½‘æ ¼ gridï¼Œ
 * è¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚
 *
 * è¯´æ˜ï¼šæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]
 * è¾“å‡ºï¼š7
 * è§£é‡Šï¼šè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// ä¸"ä¸åŒè·¯å¾„"ç±»ä¼¼ï¼Œä½†è¿™æ¬¡æ±‚æœ€å°å’Œè€Œä¸æ˜¯è·¯å¾„æ•°
//
// dp[i][j] = åˆ°è¾¾ (i, j) çš„æœ€å°è·¯å¾„å’Œ
//
// çŠ¶æ€è½¬ç§»ï¼šdp[i][j] = min(dp[i-1][j], dp[i][j-1]) + grid[i][j]
//
// åˆå§‹æ¡ä»¶ï¼š
// - ç¬¬ä¸€è¡Œï¼šdp[0][j] = dp[0][j-1] + grid[0][j]
// - ç¬¬ä¸€åˆ—ï¼šdp[i][0] = dp[i-1][0] + grid[i][0]

// ============================================================
// è§£æ³•ä¸€ï¼šäºŒç»´ DP
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(mÃ—n) | ç©ºé—´å¤æ‚åº¦ï¼šO(mÃ—n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * grid:
 * â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
 * â”‚ 1 â”‚ 3 â”‚ 1 â”‚
 * â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
 * â”‚ 1 â”‚ 5 â”‚ 1 â”‚
 * â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
 * â”‚ 4 â”‚ 2 â”‚ 1 â”‚
 * â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
 *
 * dp:
 * â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
 * â”‚ 1 â”‚ 4 â”‚ 5 â”‚
 * â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
 * â”‚ 2 â”‚ 7 â”‚ 6 â”‚
 * â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
 * â”‚ 6 â”‚ 8 â”‚ 7 â”‚
 * â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
 *
 * ç­”æ¡ˆï¼š7
 */
function minPathSum(grid: number[][]): number {
  const m = grid.length;
  const n = grid[0].length;

  const dp: number[][] = Array.from({ length: m }, () => Array(n).fill(0));

  // åˆå§‹åŒ–èµ·ç‚¹
  dp[0][0] = grid[0][0];

  // åˆå§‹åŒ–ç¬¬ä¸€è¡Œ
  for (let j = 1; j < n; j++) {
    dp[0][j] = dp[0][j - 1] + grid[0][j];
  }

  // åˆå§‹åŒ–ç¬¬ä¸€åˆ—
  for (let i = 1; i < m; i++) {
    dp[i][0] = dp[i - 1][0] + grid[i][0];
  }

  // å¡«è¡¨
  for (let i = 1; i < m; i++) {
    for (let j = 1; j < n; j++) {
      dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];
    }
  }

  return dp[m - 1][n - 1];
}

// ============================================================
// è§£æ³•äºŒï¼šä¸€ç»´ DPï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(mÃ—n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)
function minPathSum_optimized(grid: number[][]): number {
  const m = grid.length;
  const n = grid[0].length;

  const dp: number[] = Array(n).fill(0);

  // åˆå§‹åŒ–ç¬¬ä¸€è¡Œ
  dp[0] = grid[0][0];
  for (let j = 1; j < n; j++) {
    dp[j] = dp[j - 1] + grid[0][j];
  }

  // é€è¡Œæ›´æ–°
  for (let i = 1; i < m; i++) {
    dp[0] += grid[i][0]; // ç¬¬ä¸€åˆ—åªèƒ½ä»ä¸Šé¢æ¥
    for (let j = 1; j < n; j++) {
      dp[j] = Math.min(dp[j], dp[j - 1]) + grid[i][j];
    }
  }

  return dp[n - 1];
}

// ============================================================
// è§£æ³•ä¸‰ï¼šåŸåœ°ä¿®æ”¹ï¼ˆä¸æ¨èï¼Œä¼šæ”¹å˜è¾“å…¥ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(mÃ—n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)
function minPathSum_inplace(grid: number[][]): number {
  const m = grid.length;
  const n = grid[0].length;

  // åˆå§‹åŒ–ç¬¬ä¸€è¡Œ
  for (let j = 1; j < n; j++) {
    grid[0][j] += grid[0][j - 1];
  }

  // åˆå§‹åŒ–ç¬¬ä¸€åˆ—
  for (let i = 1; i < m; i++) {
    grid[i][0] += grid[i - 1][0];
  }

  // å¡«è¡¨
  for (let i = 1; i < m; i++) {
    for (let j = 1; j < n; j++) {
      grid[i][j] += Math.min(grid[i - 1][j], grid[i][j - 1]);
    }
  }

  return grid[m - 1][n - 1];
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•     | æ—¶é—´    | ç©ºé—´    | ç‰¹ç‚¹              |
 * |----------|---------|---------|-------------------|
 * | äºŒç»´DP   | O(mÃ—n)  | O(mÃ—n)  | å¥½ç†è§£            |
 * | ä¸€ç»´DP   | O(mÃ—n)  | O(n)    | æ¨è              |
 * | åŸåœ°ä¿®æ”¹ | O(mÃ—n)  | O(1)    | ä¸æ¨è            |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. åˆå§‹åŒ–è¦æ­£ç¡®ï¼š
 *    - dp[0][0] = grid[0][0]
 *    - ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯ç´¯åŠ ï¼Œä¸æ˜¯å–åŸå€¼
 *
 * 2. ä¸€ç»´ä¼˜åŒ–æ—¶çš„æ›´æ–°é¡ºåºï¼š
 *    - å…ˆæ›´æ–° dp[0]ï¼ˆç¬¬ä¸€åˆ—ï¼‰
 *    - å†ä»å·¦åˆ°å³æ›´æ–°å…¶ä»–
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - ä¸åŒè·¯å¾„ â†’ è®¡æ•°è€Œéæœ€å°å€¼
 * - ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ â†’ ä¸‰è§’å½¢ç»“æ„
 * - ä¸‹é™è·¯å¾„æœ€å°å’Œ â†’ å¯ä»¥èµ°æ–œçº¿
 */

export { minPathSum, minPathSum_optimized, minPathSum_inplace };
export default minPathSum;

