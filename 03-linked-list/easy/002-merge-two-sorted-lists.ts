/**
 * ğŸ“ é¢˜ç›®ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/merge-two-sorted-lists/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šé€’å½’ã€é“¾è¡¨
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚
 * æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]
 * è¾“å‡ºï¼š[1,1,2,3,4,4]
 */

class ListNode {
  val: number;
  next: ListNode | null;
  constructor(val?: number, next?: ListNode | null) {
    this.val = val === undefined ? 0 : val;
    this.next = next === undefined ? null : next;
  }
}

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// ç±»ä¼¼å½’å¹¶æ’åºçš„åˆå¹¶è¿‡ç¨‹
//
// 1. è¿­ä»£æ³•ï¼š
//    - ä½¿ç”¨è™šæ‹Ÿå¤´èŠ‚ç‚¹ç®€åŒ–æ“ä½œ
//    - æ¯”è¾ƒä¸¤ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œå–è¾ƒå°çš„
//    - ç§»åŠ¨æŒ‡é’ˆï¼Œé‡å¤ç›´åˆ°ä¸€ä¸ªé“¾è¡¨ä¸ºç©º
//
// 2. é€’å½’æ³•ï¼š
//    - æ¯”è¾ƒå¤´èŠ‚ç‚¹ï¼Œå–è¾ƒå°çš„ä½œä¸ºç»“æœå¤´
//    - é€’å½’åˆå¹¶å‰©ä½™éƒ¨åˆ†

// ============================================================
// è§£æ³•ä¸€ï¼šè¿­ä»£æ³•ï¼ˆæ¨èï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n+m) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * l1: 1 -> 2 -> 4 -> null
 * l2: 1 -> 3 -> 4 -> null
 *
 * dummy -> null
 *    â†‘
 *   curr
 *
 * Step 1: æ¯”è¾ƒ 1 å’Œ 1ï¼Œå– l1 çš„ 1
 *         dummy -> 1 -> null
 *                  â†‘
 *                 curr
 *         l1: 2 -> 4
 *
 * Step 2: æ¯”è¾ƒ 2 å’Œ 1ï¼Œå– l2 çš„ 1
 *         dummy -> 1 -> 1 -> null
 *                       â†‘
 *                      curr
 *         l2: 3 -> 4
 *
 * Step 3: æ¯”è¾ƒ 2 å’Œ 3ï¼Œå– l1 çš„ 2
 *         dummy -> 1 -> 1 -> 2 -> null
 *                            â†‘
 *                           curr
 *         l1: 4
 *
 * Step 4: æ¯”è¾ƒ 4 å’Œ 3ï¼Œå– l2 çš„ 3
 *         dummy -> 1 -> 1 -> 2 -> 3 -> null
 *                                 â†‘
 *                                curr
 *         l2: 4
 *
 * Step 5: æ¯”è¾ƒ 4 å’Œ 4ï¼Œå– l1 çš„ 4
 *         dummy -> 1 -> 1 -> 2 -> 3 -> 4 -> null
 *                                      â†‘
 *                                     curr
 *         l1: null
 *
 * Step 6: l1 ä¸ºç©ºï¼Œè¿æ¥ l2 å‰©ä½™éƒ¨åˆ†
 *         dummy -> 1 -> 1 -> 2 -> 3 -> 4 -> 4 -> null
 *
 * è¿”å› dummy.next
 */
function mergeTwoLists_v1(
  l1: ListNode | null,
  l2: ListNode | null
): ListNode | null {
  // è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œç®€åŒ–è¾¹ç•Œå¤„ç†
  const dummy = new ListNode(0);
  let curr = dummy;

  while (l1 && l2) {
    if (l1.val <= l2.val) {
      curr.next = l1;
      l1 = l1.next;
    } else {
      curr.next = l2;
      l2 = l2.next;
    }
    curr = curr.next;
  }

  // è¿æ¥å‰©ä½™éƒ¨åˆ†ï¼ˆåªæœ‰ä¸€ä¸ªè¿˜æœ‰å‰©ä½™ï¼‰
  curr.next = l1 || l2;

  return dummy.next;
}

// ============================================================
// è§£æ³•äºŒï¼šé€’å½’æ³•
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n+m) | ç©ºé—´å¤æ‚åº¦ï¼šO(n+m) é€’å½’æ ˆ

/**
 * ğŸ“Š é€’å½’è¿‡ç¨‹å›¾è§£ï¼š
 *
 * merge([1,2,4], [1,3,4])
 *   = 1 -> merge([2,4], [1,3,4])   // æ¯”è¾ƒ 1 å’Œ 1ï¼Œå– l1
 *   = 1 -> 1 -> merge([2,4], [3,4]) // æ¯”è¾ƒ 2 å’Œ 1ï¼Œå– l2
 *   = 1 -> 1 -> 2 -> merge([4], [3,4]) // æ¯”è¾ƒ 2 å’Œ 3ï¼Œå– l1
 *   = 1 -> 1 -> 2 -> 3 -> merge([4], [4]) // æ¯”è¾ƒ 4 å’Œ 3ï¼Œå– l2
 *   = 1 -> 1 -> 2 -> 3 -> 4 -> merge([], [4]) // æ¯”è¾ƒ 4 å’Œ 4ï¼Œå– l1
 *   = 1 -> 1 -> 2 -> 3 -> 4 -> 4 // l1 ä¸ºç©ºï¼Œè¿”å› l2
 */
function mergeTwoLists_v2(
  l1: ListNode | null,
  l2: ListNode | null
): ListNode | null {
  // åŸºæœ¬æƒ…å†µ
  if (!l1) return l2;
  if (!l2) return l1;

  // æ¯”è¾ƒå¤´èŠ‚ç‚¹ï¼Œé€’å½’åˆå¹¶
  if (l1.val <= l2.val) {
    l1.next = mergeTwoLists_v2(l1.next, l2);
    return l1;
  } else {
    l2.next = mergeTwoLists_v2(l1, l2.next);
    return l2;
  }
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•     | æ—¶é—´    | ç©ºé—´    | ç‰¹ç‚¹                    |
 * |---------|---------|---------|------------------------|
 * | è¿­ä»£    | O(n+m)  | O(1)    | æ¨èï¼Œç©ºé—´æœ€ä¼˜           |
 * | é€’å½’    | O(n+m)  | O(n+m)  | ä»£ç ç®€æ´               |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. ä½¿ç”¨è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼š
 *    - ä¸éœ€è¦ç‰¹æ®Šå¤„ç†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
 *    - æœ€åè¿”å› dummy.next
 *
 * 2. è¿æ¥å‰©ä½™éƒ¨åˆ†ï¼š
 *    - curr.next = l1 || l2
 *    - åªæœ‰ä¸€ä¸ªé“¾è¡¨æœ‰å‰©ä½™
 *
 * 3. ç©ºé“¾è¡¨å¤„ç†ï¼š
 *    - l1 æˆ– l2 ä¸º null æ—¶ç›´æ¥è¿”å›å¦ä¸€ä¸ª
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - åˆå¹¶ K ä¸ªå‡åºé“¾è¡¨ â†’ åˆ†æ²» / ä¼˜å…ˆé˜Ÿåˆ—
 * - åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ â†’ åŒæŒ‡é’ˆ
 * - æ’åºé“¾è¡¨ â†’ å½’å¹¶æ’åº
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æ•°æ®åˆå¹¶ï¼šåˆå¹¶å¤šä¸ªæœ‰åºæ•°æ®æº
 * 2. æ—¥å¿—åˆå¹¶ï¼šåˆå¹¶å¤šä¸ªæ—¶é—´æœ‰åºçš„æ—¥å¿—æµ
 * 3. æ¶ˆæ¯æ•´åˆï¼šåˆå¹¶å¤šä¸ªä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨
 * 4. æœç´¢ç»“æœï¼šåˆå¹¶å¤šä¸ªæœç´¢å¼•æ“çš„ç»“æœ
 */

export { ListNode, mergeTwoLists_v1, mergeTwoLists_v2 };
export default mergeTwoLists_v1;

