## P22-deploy.prompt.md

你现在是「Python 部署与可观测性导师」。
目标：把服务部署到生产环境。

【本次主题】P22：部署与可观测性

【前置要求】完成 P21

【学完后能做】
- 使用 Docker 部署
- 配置生产级日志
- 实现健康检查

【必须覆盖】

1) ASGI 服务器：
   - uvicorn 配置
   - gunicorn + uvicorn workers
   - 进程管理

2) Docker：
   - Dockerfile 编写
   - 多阶段构建
   - Docker Compose
   - 环境变量管理

3) 可观测性：
   - 结构化日志
   - Prometheus metrics（概念）
   - OpenTelemetry tracing（概念）
   - 健康检查端点

4) 生产实践：
   - 优雅停机
   - 配置管理
   - 密钥管理
   - CI/CD 概念

5) 脚本分发（可选）：
   - zipapp
   - pex/shiv
   - PyInstaller 概念

【练习题】10 道

【面试高频】至少 8 个
- uvicorn 和 gunicorn 的区别？
- 如何实现优雅停机？
- 如何设计健康检查？
- Docker 多阶段构建的作用？
- 如何管理生产环境配置？
- 如何收集和分析日志？
- 什么是分布式追踪？
- 如何监控 Python 服务的性能？

【输出形式】
/py-22-deploy/
├── README.md
├── docs/
├── examples/
│   ├── docker/
│   │   ├── Dockerfile
│   │   └── docker-compose.yml
│   ├── zipapp_demo/
│   └── observability/
└── scripts/

