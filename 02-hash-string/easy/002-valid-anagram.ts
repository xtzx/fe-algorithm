/**
 * ğŸ“ é¢˜ç›®ï¼šæœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/valid-anagram/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šå“ˆå¸Œè¡¨ã€å­—ç¬¦ä¸²ã€æ’åº
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ tï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯ã€‚
 *
 * æ³¨æ„ï¼šè‹¥ s å’Œ t ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°éƒ½ç›¸åŒï¼Œåˆ™ç§° s å’Œ t äº’ä¸ºå­—æ¯å¼‚ä½è¯ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šs = "anagram", t = "nagaram"
 * è¾“å‡ºï¼štrue
 *
 * è¾“å…¥ï¼šs = "rat", t = "car"
 * è¾“å‡ºï¼šfalse
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å¼‚ä½è¯çš„å®šä¹‰ï¼šå­—ç¬¦ç›¸åŒï¼Œä½†é¡ºåºä¸åŒ
//
// 1. æ’åºæ€è·¯ï¼š
//    - æ’åºåç›¸ç­‰ â†’ æ˜¯å¼‚ä½è¯
//    - æ—¶é—´ O(n log n)ï¼Œç©ºé—´ O(n)
//
// 2. å“ˆå¸Œè®¡æ•°æ€è·¯ï¼ˆæ¨èï¼‰ï¼š
//    - ç»Ÿè®¡ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦é¢‘ç‡
//    - é¢‘ç‡ç›¸åŒ â†’ æ˜¯å¼‚ä½è¯
//    - æ—¶é—´ O(n)ï¼Œç©ºé—´ O(k)ï¼Œk æ˜¯å­—ç¬¦é›†å¤§å°
//
// 3. ä¼˜åŒ–ï¼šåªç”¨ä¸€ä¸ªè®¡æ•°å™¨
//    - s ä¸­çš„å­—ç¬¦ +1
//    - t ä¸­çš„å­—ç¬¦ -1
//    - æœ€åæ£€æŸ¥æ˜¯å¦å…¨ä¸º 0

// ============================================================
// è§£æ³•ä¸€ï¼šæ’åº
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n log n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)
function isAnagram_v1(s: string, t: string): boolean {
  if (s.length !== t.length) return false;

  const sortedS = s.split('').sort().join('');
  const sortedT = t.split('').sort().join('');

  return sortedS === sortedT;
}

// ============================================================
// è§£æ³•äºŒï¼šä¸¤ä¸ªå“ˆå¸Œè¡¨
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(k)
function isAnagram_v2(s: string, t: string): boolean {
  if (s.length !== t.length) return false;

  const countS = new Map<string, number>();
  const countT = new Map<string, number>();

  // ç»Ÿè®¡ s çš„å­—ç¬¦é¢‘ç‡
  for (const char of s) {
    countS.set(char, (countS.get(char) || 0) + 1);
  }

  // ç»Ÿè®¡ t çš„å­—ç¬¦é¢‘ç‡
  for (const char of t) {
    countT.set(char, (countT.get(char) || 0) + 1);
  }

  // æ¯”è¾ƒä¸¤ä¸ªé¢‘ç‡è¡¨
  if (countS.size !== countT.size) return false;

  for (const [char, count] of countS) {
    if (countT.get(char) !== count) return false;
  }

  return true;
}

// ============================================================
// è§£æ³•ä¸‰ï¼šä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆæ¨èï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(k)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * s = "anagram", t = "nagaram"
 *
 * Step 1: ç»Ÿè®¡ s çš„å­—ç¬¦ï¼ˆ+1ï¼‰
 *         count = {a: 3, n: 1, g: 1, r: 1, m: 1}
 *
 * Step 2: å‡å» t çš„å­—ç¬¦ï¼ˆ-1ï¼‰
 *         n: 1-1=0, a: 3-1=2, g: 1-1=0, a: 2-1=1, r: 1-1=0, a: 1-1=0, m: 1-1=0
 *         count = {a: 0, n: 0, g: 0, r: 0, m: 0}
 *
 * Step 3: æ£€æŸ¥æ‰€æœ‰å€¼æ˜¯å¦ä¸º 0 â†’ æ˜¯
 *
 * è¿”å› true
 */
function isAnagram_v3(s: string, t: string): boolean {
  if (s.length !== t.length) return false;

  const count = new Map<string, number>();

  // s ä¸­çš„å­—ç¬¦ +1
  for (const char of s) {
    count.set(char, (count.get(char) || 0) + 1);
  }

  // t ä¸­çš„å­—ç¬¦ -1
  for (const char of t) {
    const newCount = (count.get(char) || 0) - 1;

    // å¦‚æœå‡åˆ°è´Ÿæ•°ï¼Œè¯´æ˜ t ä¸­æœ‰ s æ²¡æœ‰çš„å­—ç¬¦
    if (newCount < 0) return false;

    count.set(char, newCount);
  }

  // å› ä¸ºé•¿åº¦ç›¸ç­‰ï¼Œå¦‚æœ t æ²¡æœ‰é¢å¤–å­—ç¬¦ï¼Œs çš„å­—ç¬¦ä¹Ÿä¸€å®šå…¨éƒ¨è¢«æŠµæ¶ˆ
  return true;
}

// ============================================================
// è§£æ³•å››ï¼šæ•°ç»„è®¡æ•°ï¼ˆä»…é™å°å†™å­—æ¯ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(26) = O(1)
// âœ… å¦‚æœåªæœ‰å°å†™å­—æ¯ï¼Œç”¨æ•°ç»„æ›´é«˜æ•ˆ
function isAnagram_v4(s: string, t: string): boolean {
  if (s.length !== t.length) return false;

  const count = new Array(26).fill(0);
  const aCode = 'a'.charCodeAt(0);

  for (let i = 0; i < s.length; i++) {
    count[s.charCodeAt(i) - aCode]++;
    count[t.charCodeAt(i) - aCode]--;
  }

  // æ£€æŸ¥æ‰€æœ‰è®¡æ•°æ˜¯å¦ä¸º 0
  return count.every((c) => c === 0);
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•         | æ—¶é—´       | ç©ºé—´  | ç‰¹ç‚¹                     |
 * |-------------|------------|-------|-------------------------|
 * | æ’åº        | O(n log n) | O(n)  | ç®€å•ç›´è§‚                 |
 * | ä¸¤ä¸ªå“ˆå¸Œè¡¨   | O(n)       | O(k)  | åˆ†å¼€ç»Ÿè®¡                 |
 * | ä¸€ä¸ªå“ˆå¸Œè¡¨   | O(n)       | O(k)  | æ¨èï¼Œä»£ç ç®€æ´           |
 * | æ•°ç»„è®¡æ•°    | O(n)       | O(1)  | ä»…é™å°å†™å­—æ¯ï¼Œæœ€é«˜æ•ˆ      |
 *
 * k æ˜¯å­—ç¬¦é›†å¤§å°
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. é•¿åº¦åˆ¤æ–­ï¼š
 *    - é•¿åº¦ä¸åŒç›´æ¥è¿”å› false
 *    - è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–ï¼Œé¿å…æ— æ•ˆè®¡ç®—
 *
 * 2. è®¡æ•°å½’é›¶çš„åˆ¤æ–­ï¼š
 *    - æ–¹æ³•ä¸€ï¼šæ£€æŸ¥æ‰€æœ‰å€¼æ˜¯å¦ä¸º 0
 *    - æ–¹æ³•äºŒï¼šå‡åˆ°è´Ÿæ•°æ—¶ç›´æ¥è¿”å› falseï¼ˆæ›´ä¼˜ï¼‰
 *
 * 3. è¿›é˜¶ï¼šUnicode å­—ç¬¦
 *    - å¦‚æœåŒ…å« Unicode å­—ç¬¦ï¼Œéœ€è¦ç”¨ Map
 *    - æ•°ç»„åªé€‚ç”¨äº ASCII å­—ç¬¦
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ â†’ æ»‘åŠ¨çª—å£ + å“ˆå¸Œè®¡æ•°
 * - å­—æ¯å¼‚ä½è¯åˆ†ç»„ â†’ æ’åºä½œä¸º key / è®¡æ•°ä½œä¸º key
 * - å­—ç¬¦ä¸²çš„æ’åˆ— â†’ æ»‘åŠ¨çª—å£ + å“ˆå¸Œè®¡æ•°
 *
 * å…±åŒæ¨¡å¼ï¼šå­—ç¬¦è®¡æ•° / é¢‘ç‡æ¯”è¾ƒ
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. æ‹¼å†™æ£€æŸ¥ï¼šåˆ¤æ–­ç”¨æˆ·è¾“å…¥æ˜¯å¦æ˜¯æŸä¸ªè¯çš„å˜å½¢
 * 2. æœç´¢å»ºè®®ï¼šæ‰¾å‡ºä¸è¾“å…¥å­—ç¬¦ç›¸åŒçš„å€™é€‰è¯
 * 3. æ¸¸æˆé€»è¾‘ï¼šåˆ¤æ–­ç©å®¶æ˜¯å¦ç”¨ç›¸åŒçš„å­—æ¯æ‹¼å‡ºäº†ä¸åŒçš„è¯
 * 4. æ•°æ®éªŒè¯ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ç›¸åŒçš„å­—ç¬¦é›†
 */

// å¯¼å‡ºä¸»è§£æ³•
export { isAnagram_v1, isAnagram_v2, isAnagram_v3, isAnagram_v4 };
export default isAnagram_v3;

