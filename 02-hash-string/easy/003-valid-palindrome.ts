/**
 * ðŸ“ é¢˜ç›®ï¼šéªŒè¯å›žæ–‡ä¸²
 * ðŸ”— é“¾æŽ¥ï¼šhttps://leetcode.cn/problems/valid-palindrome/
 * ðŸ·ï¸ éš¾åº¦ï¼šEasy
 * ðŸ·ï¸ æ ‡ç­¾ï¼šåŒæŒ‡é’ˆã€å­—ç¬¦ä¸²
 *
 * ðŸ“‹ é¢˜ç›®æè¿°ï¼š
 * å¦‚æžœåœ¨å°†æ‰€æœ‰å¤§å†™å­—ç¬¦è½¬æ¢ä¸ºå°å†™å­—ç¬¦ã€å¹¶ç§»é™¤æ‰€æœ‰éžå­—æ¯æ•°å­—å­—ç¬¦ä¹‹åŽï¼Œ
 * çŸ­è¯­æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·ã€‚åˆ™å¯ä»¥è®¤ä¸ºè¯¥çŸ­è¯­æ˜¯ä¸€ä¸ª å›žæ–‡ä¸²ã€‚
 *
 * å­—æ¯å’Œæ•°å­—éƒ½å±žäºŽå­—æ¯æ•°å­—å­—ç¬¦ã€‚
 * ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå¦‚æžœå®ƒæ˜¯ å›žæ–‡ä¸²ï¼Œè¿”å›ž trueï¼›å¦åˆ™ï¼Œè¿”å›ž falseã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šs = "A man, a plan, a canal: Panama"
 * è¾“å‡ºï¼štrue
 * è§£é‡Šï¼š"amanaplanacanalpanama" æ˜¯å›žæ–‡ä¸²
 *
 * è¾“å…¥ï¼šs = "race a car"
 * è¾“å‡ºï¼šfalse
 * è§£é‡Šï¼š"raceacar" ä¸æ˜¯å›žæ–‡ä¸²
 */

// ============================================================
// ðŸ’¡ æ€è·¯åˆ†æžï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€Žä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å›žæ–‡çš„å®šä¹‰ï¼šæ­£ç€è¯»å’Œåç€è¯»ç›¸åŒ
//
// å…³é”®ç‚¹ï¼šéœ€è¦å¿½ç•¥å¤§å°å†™å’Œéžå­—æ¯æ•°å­—å­—ç¬¦
//
// 1. é¢„å¤„ç† + åè½¬æ¯”è¾ƒï¼š
//    - å…ˆè¿‡æ»¤å‡ºå­—æ¯æ•°å­—ï¼Œè½¬å°å†™
//    - ç„¶åŽåè½¬æ¯”è¾ƒ
//    - æ—¶é—´ O(n)ï¼Œç©ºé—´ O(n)
//
// 2. åŒæŒ‡é’ˆï¼ˆæŽ¨èï¼‰ï¼š
//    - å·¦å³æŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨
//    - è·³è¿‡éžå­—æ¯æ•°å­—å­—ç¬¦
//    - æ¯”è¾ƒå­—ç¬¦ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰
//    - æ—¶é—´ O(n)ï¼Œç©ºé—´ O(1)

// ============================================================
// è§£æ³•ä¸€ï¼šé¢„å¤„ç† + åè½¬
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)
function isPalindrome_v1(s: string): boolean {
  // è¿‡æ»¤å‡ºå­—æ¯æ•°å­—ï¼Œè½¬å°å†™
  const filtered = s.toLowerCase().replace(/[^a-z0-9]/g, '');

  // åè½¬æ¯”è¾ƒ
  return filtered === filtered.split('').reverse().join('');
}

// ============================================================
// è§£æ³•äºŒï¼šåŒæŒ‡é’ˆï¼ˆæŽ¨èï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ðŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * s = "A man, a plan, a canal: Panama"
 *
 *   "A man, a plan, a canal: Panama"
 *    â†‘                            â†‘
 *   left                        right
 *
 *   left='A', right='a' (è½¬å°å†™åŽéƒ½æ˜¯'a')ï¼Œç›¸ç­‰ï¼Œç»§ç»­
 *   è·³è¿‡ç©ºæ ¼å’Œé€—å·...
 *   left='m', right='m'ï¼Œç›¸ç­‰ï¼Œç»§ç»­
 *   ...
 *   ç›´åˆ° left >= rightï¼Œè¿”å›ž true
 *
 * ðŸ”„ æµç¨‹å›¾ (Mermaid):
 * ```mermaid
 * flowchart TD
 *     A[left=0, right=n-1] --> B{left < right?}
 *     B -->|Yes| C{s[left] æ˜¯å­—æ¯æ•°å­—?}
 *     C -->|No| D[left++]
 *     D --> B
 *     C -->|Yes| E{s[right] æ˜¯å­—æ¯æ•°å­—?}
 *     E -->|No| F[right--]
 *     F --> B
 *     E -->|Yes| G{s[left].lower == s[right].lower?}
 *     G -->|Yes| H[left++, right--]
 *     H --> B
 *     G -->|No| I[è¿”å›ž false]
 *     B -->|No| J[è¿”å›ž true]
 * ```
 */
function isPalindrome_v2(s: string): boolean {
  let left = 0;
  let right = s.length - 1;

  while (left < right) {
    // è·³è¿‡å·¦è¾¹çš„éžå­—æ¯æ•°å­—å­—ç¬¦
    while (left < right && !isAlphanumeric(s[left])) {
      left++;
    }

    // è·³è¿‡å³è¾¹çš„éžå­—æ¯æ•°å­—å­—ç¬¦
    while (left < right && !isAlphanumeric(s[right])) {
      right--;
    }

    // æ¯”è¾ƒå­—ç¬¦ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰
    if (s[left].toLowerCase() !== s[right].toLowerCase()) {
      return false;
    }

    left++;
    right--;
  }

  return true;
}

// åˆ¤æ–­å­—ç¬¦æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—
function isAlphanumeric(char: string): boolean {
  const code = char.charCodeAt(0);
  return (
    (code >= 48 && code <= 57) || // 0-9
    (code >= 65 && code <= 90) || // A-Z
    (code >= 97 && code <= 122) // a-z
  );
}

// ============================================================
// è§£æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ + æ­£åˆ™
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)
// ðŸ“ ä½¿ç”¨æ­£åˆ™åˆ¤æ–­å­—ç¬¦ç±»åž‹ï¼Œä»£ç æ›´ç®€æ´
function isPalindrome_v3(s: string): boolean {
  let left = 0;
  let right = s.length - 1;
  const regex = /[a-zA-Z0-9]/;

  while (left < right) {
    while (left < right && !regex.test(s[left])) {
      left++;
    }

    while (left < right && !regex.test(s[right])) {
      right--;
    }

    if (s[left].toLowerCase() !== s[right].toLowerCase()) {
      return false;
    }

    left++;
    right--;
  }

  return true;
}

// ============================================================
// ðŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³•           | æ—¶é—´  | ç©ºé—´  | ç‰¹ç‚¹                     |
 * |---------------|-------|-------|-------------------------|
 * | é¢„å¤„ç†+åè½¬    | O(n)  | O(n)  | ç®€å•ç›´è§‚                 |
 * | åŒæŒ‡é’ˆ+æ‰‹åŠ¨åˆ¤æ–­ | O(n)  | O(1)  | ç©ºé—´æœ€ä¼˜                 |
 * | åŒæŒ‡é’ˆ+æ­£åˆ™    | O(n)  | O(1)  | ä»£ç ç®€æ´ï¼ˆæ­£åˆ™æœ‰æ€§èƒ½å¼€é”€ï¼‰|
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. å­—ç¬¦ç±»åž‹åˆ¤æ–­ï¼š
 *    - å­—æ¯æ•°å­— = å­—æ¯ + æ•°å­—
 *    - æ³¨æ„ï¼šç©ºæ ¼ã€æ ‡ç‚¹éƒ½ä¸æ˜¯å­—æ¯æ•°å­—
 *
 * 2. å¤§å°å†™å¤„ç†ï¼š
 *    - 'A' å’Œ 'a' åº”è¯¥è¢«è®¤ä¸ºç›¸ç­‰
 *    - ç»Ÿä¸€è½¬å°å†™å†æ¯”è¾ƒ
 *
 * 3. ç©ºå­—ç¬¦ä¸²ï¼š
 *    - ç©ºå­—ç¬¦ä¸²è¢«è®¤ä¸ºæ˜¯å›žæ–‡
 *
 * 4. å…¨æ˜¯éžå­—æ¯æ•°å­—ï¼š
 *    - ä¾‹å¦‚ ",,,..." è¿‡æ»¤åŽä¸ºç©ºï¼Œåº”è¯¥è¿”å›ž true
 */

// ============================================================
// ðŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - éªŒè¯å›žæ–‡ä¸² IIï¼ˆå¯åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼‰â†’ åŒæŒ‡é’ˆ + é€’å½’
 * - æœ€é•¿å›žæ–‡å­ä¸² â†’ ä¸­å¿ƒæ‰©å±• / åŠ¨æ€è§„åˆ’
 * - å›žæ–‡é“¾è¡¨ â†’ å¿«æ…¢æŒ‡é’ˆ + åè½¬
 * - åˆ†å‰²å›žæ–‡ä¸² â†’ å›žæº¯
 *
 * å…±åŒæ¨¡å¼ï¼šåŒæŒ‡é’ˆä»Žä¸¤ç«¯å‘ä¸­é—´æ¯”è¾ƒ
 */

// ============================================================
// ðŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. ç”¨æˆ·åéªŒè¯ï¼šåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦æ˜¯å›žæ–‡ï¼ˆæŸäº›ç³»ç»Ÿç¦æ­¢ï¼‰
 * 2. å¯†ç å¼ºåº¦ï¼šæ£€æµ‹å¯†ç æ˜¯å¦æ˜¯å›žæ–‡ï¼ˆä¸æŽ¨èä½¿ç”¨ï¼‰
 * 3. æ–‡æœ¬æ¸¸æˆï¼šåˆ¤æ–­ç”¨æˆ·è¾“å…¥æ˜¯å¦æ˜¯å›žæ–‡
 * 4. æ•°æ®æ¸…æ´—ï¼šè¯†åˆ«å›žæ–‡ç±»åž‹çš„æ•°æ®
 */

// å¯¼å‡ºä¸»è§£æ³•
export { isPalindrome_v1, isPalindrome_v2, isPalindrome_v3, isAlphanumeric };
export default isPalindrome_v2;

