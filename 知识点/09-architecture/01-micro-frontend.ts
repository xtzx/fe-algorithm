/**
 * ============================================================
 * ğŸ“š å¾®å‰ç«¯æ¶æ„
 * ============================================================
 *
 * é¢è¯•è€ƒå¯Ÿé‡ç‚¹ï¼š
 * 1. å¾®å‰ç«¯çš„æ¦‚å¿µå’Œä»·å€¼
 * 2. ä¸»æµæ–¹æ¡ˆå¯¹æ¯”
 * 3. æ ¸å¿ƒé—®é¢˜è§£å†³ï¼ˆæ²™ç®±ã€æ ·å¼éš”ç¦»ã€é€šä¿¡ï¼‰
 * 4. å®è·µä¸­çš„å‘å’Œè§£å†³æ–¹æ¡ˆ
 */

// ============================================================
// 1. æ ¸å¿ƒæ¦‚å¿µ
// ============================================================

/**
 * ğŸ“– ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ
 *
 * å°†å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å­åº”ç”¨ï¼Œå¯ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€è¿è¡Œã€‚
 *
 * ğŸ“Š å¾®å‰ç«¯çš„ä»·å€¼
 *
 * 1. æŠ€æœ¯æ ˆæ— å…³ï¼šä¸åŒå­åº”ç”¨å¯ç”¨ä¸åŒæ¡†æ¶
 * 2. ç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼šå›¢é˜Ÿè‡ªæ²»
 * 3. å¢é‡å‡çº§ï¼šæ¸è¿›å¼é‡æ„
 * 4. ç‹¬ç«‹è¿è¡Œæ—¶ï¼šå­åº”ç”¨éš”ç¦»
 *
 * ğŸ“Š é€‚ç”¨åœºæ™¯
 *
 * âœ… é€‚åˆï¼š
 * - å¤§å‹ç³»ç»Ÿæ‹†åˆ†
 * - å¤šå›¢é˜Ÿåä½œ
 * - è€ç³»ç»Ÿæ¸è¿›é‡æ„
 * - èšåˆå¤šä¸ªç‹¬ç«‹ç³»ç»Ÿ
 *
 * âŒ ä¸é€‚åˆï¼š
 * - å°å‹é¡¹ç›®
 * - å•ä¸€å›¢é˜Ÿç»´æŠ¤
 * - å¯¹æ€§èƒ½è¦æ±‚æé«˜
 */

// ============================================================
// 2. ä¸»æµæ–¹æ¡ˆå¯¹æ¯”
// ============================================================

/**
 * ğŸ“Š å¾®å‰ç«¯æ–¹æ¡ˆå¯¹æ¯”
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ æ–¹æ¡ˆ              â”‚ ç‰¹ç‚¹                                            â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ iframe           â”‚ å¤©ç„¶éš”ç¦»ï¼Œä½†ä½“éªŒå·®ï¼ˆç™½å±ã€é€šä¿¡å¤æ‚ã€SEO å·®ï¼‰       â”‚
 * â”‚ qiankun          â”‚ åŸºäº single-spaï¼Œæˆç†Ÿç¨³å®šï¼Œé˜¿é‡Œå‡ºå“               â”‚
 * â”‚ micro-app        â”‚ ç±» WebComponentï¼Œäº¬ä¸œå‡ºå“ï¼Œæ¥å…¥ç®€å•               â”‚
 * â”‚ Module Federationâ”‚ Webpack 5 åŸç”Ÿï¼Œè¿è¡Œæ—¶å…±äº«æ¨¡å—                    â”‚
 * â”‚ wujie            â”‚ åŸºäº WebComponent + iframeï¼Œè…¾è®¯å‡ºå“             â”‚
 * â”‚ Garfish          â”‚ å­—èŠ‚å‡ºå“ï¼Œæ”¯æŒå¤šæ¡†æ¶                             â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

// ============================================================
// 3. qiankun æ ¸å¿ƒåŸç†
// ============================================================

/**
 * ğŸ“Š qiankun å·¥ä½œæµç¨‹
 *
 * 1. æ³¨å†Œå­åº”ç”¨ï¼ˆè·¯ç”± + å…¥å£ï¼‰
 * 2. åŠ è½½å­åº”ç”¨ï¼ˆHTML Entryï¼‰
 * 3. è§£æå¹¶æ‰§è¡Œå­åº”ç”¨çš„ JS/CSS
 * 4. åˆ›å»ºæ²™ç®±éš”ç¦»ç¯å¢ƒ
 * 5. æŒ‚è½½å­åº”ç”¨åˆ°æŒ‡å®šå®¹å™¨
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         ä¸»åº”ç”¨                                  â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚                    è·¯ç”±åˆ†å‘                              â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                 â”‚                  â”‚                          â”‚
 * â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
 * â”‚       â”‚   å­åº”ç”¨ A     â”‚  â”‚   å­åº”ç”¨ B      â”‚                  â”‚
 * â”‚       â”‚  (React)      â”‚  â”‚   (Vue)        â”‚                  â”‚
 * â”‚       â”‚  [JS æ²™ç®±]     â”‚  â”‚  [JS æ²™ç®±]      â”‚                  â”‚
 * â”‚       â”‚  [æ ·å¼éš”ç¦»]    â”‚  â”‚  [æ ·å¼éš”ç¦»]     â”‚                  â”‚
 * â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
 * â”‚                                                               â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

// ä¸»åº”ç”¨é…ç½®
const qiankunMainApp = `
// main.ts
import { registerMicroApps, start } from 'qiankun';

registerMicroApps([
  {
    name: 'app-react',
    entry: '//localhost:3001',
    container: '#subapp-container',
    activeRule: '/react',
    props: { token: 'xxx' },
  },
  {
    name: 'app-vue',
    entry: '//localhost:3002',
    container: '#subapp-container',
    activeRule: '/vue',
  },
]);

// å¯åŠ¨
start({
  sandbox: {
    strictStyleIsolation: true, // Shadow DOM éš”ç¦»
    // experimentalStyleIsolation: true, // scoped CSS
  },
  prefetch: 'all', // é¢„åŠ è½½
});
`;

// å­åº”ç”¨é…ç½®
const qiankunSubApp = `
// React å­åº”ç”¨
// src/index.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

let root: ReactDOM.Root | null = null;

// ç‹¬ç«‹è¿è¡Œæ—¶
if (!window.__POWERED_BY_QIANKUN__) {
  root = ReactDOM.createRoot(document.getElementById('root')!);
  root.render(<App />);
}

// ç”Ÿå‘½å‘¨æœŸé’©å­
export async function bootstrap() {
  console.log('React app bootstrapped');
}

export async function mount(props: any) {
  const { container, token } = props;
  const dom = container 
    ? container.querySelector('#root') 
    : document.getElementById('root');
  
  root = ReactDOM.createRoot(dom);
  root.render(<App token={token} />);
}

export async function unmount() {
  root?.unmount();
  root = null;
}

// webpack é…ç½®
module.exports = {
  output: {
    library: 'app-react',
    libraryTarget: 'umd',
    // jsonpFunction: 'webpackJsonp_app_react', // Webpack 4
    chunkLoadingGlobal: 'webpackJsonp_app_react', // Webpack 5
  },
  devServer: {
    headers: {
      'Access-Control-Allow-Origin': '*', // å…è®¸è·¨åŸŸ
    },
  },
};
`;

// ============================================================
// 4. JS æ²™ç®±å®ç°
// ============================================================

/**
 * ğŸ“Š JS æ²™ç®±ç±»å‹
 *
 * 1. å¿«ç…§æ²™ç®±ï¼ˆSnapshotSandboxï¼‰
 *    - è¿›å…¥æ—¶ä¿å­˜ window å¿«ç…§
 *    - é€€å‡ºæ—¶æ¢å¤å¿«ç…§
 *    - ä¸æ”¯æŒå¤šå®ä¾‹
 *
 * 2. ä»£ç†æ²™ç®±ï¼ˆProxySandboxï¼‰
 *    - åŸºäº Proxy æ‹¦æˆª
 *    - æ”¯æŒå¤šå®ä¾‹
 *    - qiankun é»˜è®¤æ–¹æ¡ˆ
 */

// å¿«ç…§æ²™ç®±å®ç°
class SnapshotSandbox {
  private windowSnapshot: Record<string, any> = {};
  private modifyPropsMap: Record<string, any> = {};
  private active = false;

  activate() {
    // 1. ä¿å­˜å½“å‰ window å¿«ç…§
    this.windowSnapshot = {};
    for (const key in window) {
      this.windowSnapshot[key] = (window as any)[key];
    }

    // 2. æ¢å¤ä¹‹å‰çš„ä¿®æ”¹
    Object.keys(this.modifyPropsMap).forEach(key => {
      (window as any)[key] = this.modifyPropsMap[key];
    });

    this.active = true;
  }

  deactivate() {
    // è®°å½•ä¿®æ”¹ï¼Œæ¢å¤å¿«ç…§
    this.modifyPropsMap = {};
    for (const key in window) {
      if ((window as any)[key] !== this.windowSnapshot[key]) {
        this.modifyPropsMap[key] = (window as any)[key];
        (window as any)[key] = this.windowSnapshot[key];
      }
    }

    this.active = false;
  }
}

// ä»£ç†æ²™ç®±å®ç°
class ProxySandbox {
  private proxy: Window;
  private running = false;
  private fakeWindow: Record<string, any> = {};

  constructor() {
    const rawWindow = window;
    const fakeWindow = this.fakeWindow;

    this.proxy = new Proxy(fakeWindow, {
      get(target, key) {
        // ä¼˜å…ˆä» fakeWindow è·å–
        if (key in target) {
          return target[key as string];
        }
        // å¦åˆ™ä»çœŸå® window è·å–
        const value = (rawWindow as any)[key];
        return typeof value === 'function' ? value.bind(rawWindow) : value;
      },

      set(target, key, value) {
        if (this.running) {
          target[key as string] = value;
        }
        return true;
      },

      has(target, key) {
        return key in target || key in rawWindow;
      },
    }) as unknown as Window;
  }

  activate() {
    this.running = true;
  }

  deactivate() {
    this.running = false;
  }

  getProxy() {
    return this.proxy;
  }
}

// ============================================================
// 5. æ ·å¼éš”ç¦»
// ============================================================

/**
 * ğŸ“Š æ ·å¼éš”ç¦»æ–¹æ¡ˆ
 *
 * 1. Shadow DOM
 *    - å®Œå…¨éš”ç¦»
 *    - ä½†å¼¹çª—ç­‰æŒ‚è½½åˆ° body çš„ç»„ä»¶ä¼šæœ‰é—®é¢˜
 *
 * 2. CSS Scoped
 *    - ç»™é€‰æ‹©å™¨åŠ å‰ç¼€
 *    - ç±»ä¼¼ Vue scoped
 *
 * 3. CSS Modules
 *    - ç¼–è¯‘æ—¶å¤„ç†
 *    - ç±»å hash åŒ–
 *
 * 4. CSS-in-JS
 *    - è¿è¡Œæ—¶ç”Ÿæˆ
 *    - å¤©ç„¶éš”ç¦»
 */

// è¿è¡Œæ—¶ CSS ä½œç”¨åŸŸ
function scopedCSS(css: string, prefix: string): string {
  // ç®€åŒ–å®ç°ï¼šç»™é€‰æ‹©å™¨åŠ å‰ç¼€
  return css.replace(
    /([^{}]+)\{/g,
    (match, selector) => {
      const scoped = selector
        .split(',')
        .map((s: string) => `${prefix} ${s.trim()}`)
        .join(', ');
      return `${scoped}{`;
    }
  );
}

// ============================================================
// 6. åº”ç”¨é€šä¿¡
// ============================================================

/**
 * ğŸ“Š å¾®å‰ç«¯é€šä¿¡æ–¹æ¡ˆ
 *
 * 1. props ä¼ é€’
 *    - ä¸»åº”ç”¨é€šè¿‡ props ä¼ é€’ç»™å­åº”ç”¨
 *
 * 2. å…¨å±€çŠ¶æ€
 *    - qiankun çš„ initGlobalState
 *
 * 3. è‡ªå®šä¹‰äº‹ä»¶
 *    - CustomEvent + addEventListener
 *
 * 4. å‘å¸ƒè®¢é˜…
 *    - EventEmitter
 */

// qiankun å…¨å±€çŠ¶æ€
const globalStateExample = `
// ä¸»åº”ç”¨
import { initGlobalState, MicroAppStateActions } from 'qiankun';

const state = { user: null, token: '' };
const actions: MicroAppStateActions = initGlobalState(state);

// ç›‘å¬å˜åŒ–
actions.onGlobalStateChange((newState, prev) => {
  console.log('Global state changed:', newState);
});

// è®¾ç½®çŠ¶æ€
actions.setGlobalState({ user: { name: 'Tom' } });

// å­åº”ç”¨
export function mount(props: any) {
  props.onGlobalStateChange((state, prev) => {
    console.log('Sub app received:', state);
  });
  
  props.setGlobalState({ count: 1 });
}
`;

// è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡
class MicroAppEventBus {
  private events: Map<string, Function[]> = new Map();

  // å‘é€åˆ°ä¸»åº”ç”¨
  static dispatchToMain(type: string, detail: any) {
    window.dispatchEvent(new CustomEvent(`micro-app:${type}`, { detail }));
  }

  // å‘é€åˆ°å­åº”ç”¨
  static dispatchToSub(type: string, detail: any) {
    window.dispatchEvent(new CustomEvent(`main-app:${type}`, { detail }));
  }

  // ç›‘å¬
  static listen(type: string, handler: (e: CustomEvent) => void) {
    window.addEventListener(type, handler as EventListener);
    return () => window.removeEventListener(type, handler as EventListener);
  }
}

// ============================================================
// 7. Module Federation
// ============================================================

/**
 * ğŸ“Š Module Federation
 *
 * Webpack 5 åŸç”Ÿæ”¯æŒï¼Œè¿è¡Œæ—¶å…±äº«æ¨¡å—
 *
 * ä¼˜åŠ¿ï¼š
 * - çœŸæ­£çš„æ¨¡å—å…±äº«
 * - æ— éœ€é¢å¤–æ¡†æ¶
 * - æ”¯æŒåŒå‘ä¾èµ–
 */

const moduleFederationConfig = `
// è¿œç¨‹åº”ç”¨ï¼ˆæä¾›æ¨¡å—ï¼‰
// webpack.config.js
const { ModuleFederationPlugin } = require('webpack').container;

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: 'remote_app',
      filename: 'remoteEntry.js',
      exposes: {
        './Button': './src/components/Button',
        './utils': './src/utils',
      },
      shared: {
        react: { singleton: true, requiredVersion: '^18.0.0' },
        'react-dom': { singleton: true, requiredVersion: '^18.0.0' },
      },
    }),
  ],
};

// ä¸»åº”ç”¨ï¼ˆæ¶ˆè´¹æ¨¡å—ï¼‰
module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: 'host_app',
      remotes: {
        remote_app: 'remote_app@http://localhost:3001/remoteEntry.js',
      },
      shared: {
        react: { singleton: true },
        'react-dom': { singleton: true },
      },
    }),
  ],
};

// ä½¿ç”¨è¿œç¨‹æ¨¡å—
const RemoteButton = React.lazy(() => import('remote_app/Button'));

function App() {
  return (
    <Suspense fallback="Loading...">
      <RemoteButton />
    </Suspense>
  );
}
`;

// ============================================================
// 8. âš ï¸ æ³¨æ„äº‹é¡¹ï¼ˆæ˜“é”™ç‚¹ï¼‰
// ============================================================

/**
 * âš ï¸ å¸¸è§é—®é¢˜
 *
 * 1. è·¯ç”±å†²çª
 *    - ä¸»åº”ç”¨å’Œå­åº”ç”¨è·¯ç”±è¦è§„åˆ’å¥½
 *    - å­åº”ç”¨ä½¿ç”¨ memory è·¯ç”±æˆ–åŠ  base
 *
 * 2. æ ·å¼æ±¡æŸ“
 *    - å…¨å±€æ ·å¼ä¼šäº’ç›¸å½±å“
 *    - ä½¿ç”¨ Shadow DOM æˆ– CSS Scoped
 *
 * 3. JS å…¨å±€å˜é‡æ±¡æŸ“
 *    - å­åº”ç”¨å¯èƒ½ä¿®æ”¹ window
 *    - ä½¿ç”¨æ²™ç®±éš”ç¦»
 *
 * 4. èµ„æºåŠ è½½é—®é¢˜
 *    - ç›¸å¯¹è·¯å¾„å˜ç»å¯¹è·¯å¾„
 *    - é…ç½® publicPath
 *
 * 5. æ€§èƒ½é—®é¢˜
 *    - é¦–æ¬¡åŠ è½½æ…¢
 *    - ä½¿ç”¨é¢„åŠ è½½
 *    - å…±äº«å…¬å…±ä¾èµ–
 *
 * 6. å¼¹çª—/Modal é—®é¢˜
 *    - Shadow DOM ä¸‹å¼¹çª—æ ·å¼ä¸¢å¤±
 *    - æŒ‚è½½åˆ°ä¸»åº”ç”¨ body
 */

// ============================================================
// 9. ğŸ’¡ é¢è¯•è¿½é—®
// ============================================================

/**
 * ğŸ’¡ æ·±åº¦è¿½é—®
 *
 * Q1: å¾®å‰ç«¯æœ‰å“ªäº›å®ç°æ–¹æ¡ˆï¼Ÿå„è‡ªä¼˜ç¼ºç‚¹ï¼Ÿ
 * A:
 *    iframeï¼šéš”ç¦»å¥½ä½†ä½“éªŒå·®
 *    qiankunï¼šæˆç†Ÿä½†æœ‰ä¾µå…¥æ€§
 *    Module Federationï¼šè¿è¡Œæ—¶å…±äº«ï¼Œä½†éœ€ Webpack 5
 *
 * Q2: å¦‚ä½•å®ç° JS æ²™ç®±ï¼Ÿ
 * A:
 *    å¿«ç…§æ²™ç®±ï¼šä¿å­˜/æ¢å¤ window
 *    ä»£ç†æ²™ç®±ï¼šProxy æ‹¦æˆªï¼Œæ”¯æŒå¤šå®ä¾‹
 *
 * Q3: æ ·å¼éš”ç¦»æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿ
 * A:
 *    Shadow DOMã€CSS Scopedã€CSS Modulesã€CSS-in-JS
 *
 * Q4: å­åº”ç”¨ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ
 * A:
 *    propsã€å…¨å±€çŠ¶æ€ã€CustomEventã€EventBus
 *
 * Q5: å¾®å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ
 * A:
 *    - é¢„åŠ è½½ï¼ˆprefetchï¼‰
 *    - å…±äº«ä¾èµ–
 *    - æŒ‰éœ€åŠ è½½
 *    - èµ„æºç¼“å­˜
 */

// ============================================================
// 10. ğŸ¢ å®æˆ˜åœºæ™¯
// ============================================================

/**
 * ğŸ¢ åœºæ™¯ï¼šå¤§å‹ä¸­åå°ç³»ç»Ÿå¾®å‰ç«¯æ”¹é€ 
 *
 * èƒŒæ™¯ï¼š
 * - å¤šä¸ªä¸šåŠ¡çº¿ï¼Œå„è‡ªç‹¬ç«‹å¼€å‘
 * - æŠ€æœ¯æ ˆä¸ç»Ÿä¸€ï¼ˆReactã€Vueï¼‰
 * - éœ€è¦ç»Ÿä¸€é—¨æˆ·å…¥å£
 *
 * æ–¹æ¡ˆï¼š
 * 1. ä¸»åº”ç”¨ï¼šè´Ÿè´£å¸ƒå±€ã€è·¯ç”±ã€ç™»å½•ã€æƒé™
 * 2. å­åº”ç”¨ï¼šå„ä¸šåŠ¡æ¨¡å—
 * 3. å…±äº«ï¼šå…¬å…±ç»„ä»¶åº“ã€å·¥å…·å‡½æ•°ã€ç”¨æˆ·çŠ¶æ€
 *
 * æŠ€æœ¯é€‰å‹ï¼š
 * - æ¡†æ¶ï¼šqiankun
 * - æ ·å¼éš”ç¦»ï¼šexperimentalStyleIsolation
 * - é€šä¿¡ï¼šå…¨å±€çŠ¶æ€ + EventBus
 * - éƒ¨ç½²ï¼šå„å­åº”ç”¨ç‹¬ç«‹éƒ¨ç½²
 */

const practicalExample = `
// ä¸»åº”ç”¨æ¶æ„
src/
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ BasicLayout.tsx      # ç»Ÿä¸€å¸ƒå±€
â”œâ”€â”€ components/
â”‚   â””â”€â”€ SubAppContainer.tsx  # å­åº”ç”¨å®¹å™¨
â”œâ”€â”€ micro/
â”‚   â”œâ”€â”€ apps.ts              # å­åº”ç”¨æ³¨å†Œé…ç½®
â”‚   â”œâ”€â”€ lifecycle.ts         # ç”Ÿå‘½å‘¨æœŸé’©å­
â”‚   â””â”€â”€ globalState.ts       # å…¨å±€çŠ¶æ€
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ auth.ts              # ç»Ÿä¸€è®¤è¯
â””â”€â”€ App.tsx

// å­åº”ç”¨æ³¨å†Œ
const apps = [
  {
    name: 'dashboard',
    entry: process.env.DASHBOARD_URL,
    activeRule: '/dashboard',
  },
  {
    name: 'order',
    entry: process.env.ORDER_URL,
    activeRule: '/order',
  },
  {
    name: 'legacy-system', // æ—§ç³»ç»Ÿ
    entry: process.env.LEGACY_URL,
    activeRule: '/legacy',
  },
];
`;

export {
  SnapshotSandbox,
  ProxySandbox,
  scopedCSS,
  MicroAppEventBus,
  qiankunMainApp,
  qiankunSubApp,
  globalStateExample,
  moduleFederationConfig,
  practicalExample,
};

