/**
 * ============================================================
 * ğŸ“š V8 å¼•æ“æ·±å…¥
 * ============================================================
 *
 * é¢è¯•è€ƒå¯Ÿé‡ç‚¹ï¼š
 * 1. V8 æ¶æ„ä¸å·¥ä½œåŸç†
 * 2. JIT ç¼–è¯‘
 * 3. éšè—ç±»ä¸å†…è”ç¼“å­˜
 * 4. å¦‚ä½•å†™å‡º V8 å‹å¥½çš„ä»£ç 
 */

// ============================================================
// 1. V8 æ¶æ„æ¦‚è¿°
// ============================================================

/**
 * ğŸ“Š V8 æ‰§è¡Œ JavaScript çš„æµç¨‹
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         JavaScript æºä»£ç                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                                â”‚
 *                                â–¼
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         Parserï¼ˆè§£æå™¨ï¼‰                             â”‚
 * â”‚                    è¯æ³•åˆ†æ + è¯­æ³•åˆ†æ â†’ AST                         â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                                â”‚
 *                                â–¼
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                     Ignitionï¼ˆè§£é‡Šå™¨ï¼‰                               â”‚
 * â”‚                   AST â†’ å­—èŠ‚ç ï¼ˆBytecodeï¼‰                           â”‚
 * â”‚                      æ‰§è¡Œå­—èŠ‚ç                                       â”‚
 * â”‚                   åŒæ—¶æ”¶é›†ç±»å‹åé¦ˆä¿¡æ¯                                â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                                â”‚
 *                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *                    â”‚                       â”‚
 *              çƒ­ç‚¹ä»£ç ï¼Ÿ                  æ™®é€šä»£ç 
 *                    â”‚                       â”‚
 *                    â–¼                       â–¼
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç»§ç»­åœ¨ Ignition æ‰§è¡Œ
 * â”‚    TurboFanï¼ˆä¼˜åŒ–ç¼–è¯‘å™¨ï¼‰     â”‚
 * â”‚ å­—èŠ‚ç  + ç±»å‹åé¦ˆ â†’ æœºå™¨ç     â”‚
 * â”‚     é«˜åº¦ä¼˜åŒ–çš„æœºå™¨ç           â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                    â”‚
 *                    â”‚ ä¼˜åŒ–å‡è®¾å¤±æ•ˆï¼Ÿ
 *                    â–¼
 *              Deoptimization
 *              å›é€€åˆ°å­—èŠ‚ç 
 */

/**
 * ğŸ“Š Ignition è§£é‡Šå™¨
 *
 * ç‰¹ç‚¹ï¼š
 * - å°† AST ç¼–è¯‘ä¸ºå­—èŠ‚ç 
 * - å­—èŠ‚ç æ¯” AST æ›´ç´§å‡‘ï¼Œå¯åŠ¨æ›´å¿«
 * - è¾¹æ‰§è¡Œè¾¹æ”¶é›†ç±»å‹åé¦ˆï¼ˆType Feedbackï¼‰
 *
 * å­—èŠ‚ç ç¤ºä¾‹ï¼š
 * function add(a, b) { return a + b; }
 *
 * å­—èŠ‚ç ï¼š
 * LdaNamedProperty a0, [0]  // åŠ è½½å‚æ•° a
 * Add a1                     // ä¸å‚æ•° b ç›¸åŠ 
 * Return                     // è¿”å›ç»“æœ
 */

/**
 * ğŸ“Š TurboFan ä¼˜åŒ–ç¼–è¯‘å™¨
 *
 * è§¦å‘æ¡ä»¶ï¼š
 * - å‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨ï¼ˆçƒ­ç‚¹ä»£ç ï¼‰
 * - ç´¯ç§¯äº†è¶³å¤Ÿçš„ç±»å‹åé¦ˆä¿¡æ¯
 *
 * ä¼˜åŒ–æŠ€æœ¯ï¼š
 * - å†…è”ï¼ˆInliningï¼‰ï¼šå°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“
 * - é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰ï¼šä¼˜åŒ–å¯¹è±¡åˆ†é…
 * - ç±»å‹ç‰¹åŒ–ï¼ˆType Specializationï¼‰ï¼šé’ˆå¯¹ç‰¹å®šç±»å‹ä¼˜åŒ–
 * - å¸¸é‡æŠ˜å ï¼ˆConstant Foldingï¼‰ï¼šç¼–è¯‘æœŸè®¡ç®—å¸¸é‡
 * - æ­»ä»£ç æ¶ˆé™¤ï¼ˆDead Code Eliminationï¼‰
 */

// ============================================================
// 2. éšè—ç±»ï¼ˆHidden Classï¼‰
// ============================================================

/**
 * ğŸ“– ä»€ä¹ˆæ˜¯éšè—ç±»ï¼Ÿ
 *
 * JavaScript æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå¯¹è±¡å¯ä»¥éšæ—¶æ·»åŠ /åˆ é™¤å±æ€§ã€‚
 * è¿™å¯¼è‡´å±æ€§è®¿é—®éœ€è¦æŸ¥æ‰¾ï¼Œæ€§èƒ½è¾ƒä½ã€‚
 *
 * V8 çš„è§£å†³æ–¹æ¡ˆï¼šéšè—ç±»ï¼ˆHidden Class / Shape / Mapï¼‰
 * - ä¸ºå…·æœ‰ç›¸åŒç»“æ„çš„å¯¹è±¡å…±äº«ç±»å‹ä¿¡æ¯
 * - è®°å½•å±æ€§åã€åç§»é‡ã€æè¿°ç¬¦
 * - ä½¿å±æ€§è®¿é—®æ¥è¿‘é™æ€è¯­è¨€çš„æ€§èƒ½
 *
 * ğŸ“Š éšè—ç±»ç¤ºæ„å›¾
 *
 * // åˆ›å»ºå¯¹è±¡
 * let obj = {};           // Hidden Class C0 (ç©ºå¯¹è±¡)
 * obj.x = 1;              // Hidden Class C1 (æœ‰ x å±æ€§)
 * obj.y = 2;              // Hidden Class C2 (æœ‰ x, y å±æ€§)
 *
 *    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *    â”‚     C0      â”‚ â”€â”€â”€â–º â”‚     C1      â”‚ â”€â”€â”€â–º â”‚     C2      â”‚
 *    â”‚   (ç©ºå¯¹è±¡)   â”‚  +x  â”‚   x: offset0â”‚  +y  â”‚   x: offset0â”‚
 *    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   y: offset1â”‚
 *                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * å¦‚æœå¦ä¸€ä¸ªå¯¹è±¡ä»¥ç›¸åŒé¡ºåºæ·»åŠ ç›¸åŒå±æ€§ï¼Œä¼šå…±äº«éšè—ç±»ï¼š
 *
 * let obj2 = {};
 * obj2.x = 3;  // ä½¿ç”¨ C1
 * obj2.y = 4;  // ä½¿ç”¨ C2ï¼ˆä¸ obj å…±äº«ï¼‰
 */

/**
 * ğŸ“Š éšè—ç±»çš„ç ´å
 *
 * âŒ ä¸åŒé¡ºåºæ·»åŠ å±æ€§ï¼š
 * let a = { x: 1 }; a.y = 2;  // éšè—ç±»ï¼šC0 â†’ C1(x) â†’ C2(x,y)
 * let b = { y: 1 }; b.x = 2;  // éšè—ç±»ï¼šC0 â†’ C3(y) â†’ C4(y,x)
 * // a å’Œ b ä¸èƒ½å…±äº«éšè—ç±»
 *
 * âŒ ä½¿ç”¨ delete åˆ é™¤å±æ€§ï¼š
 * let obj = { x: 1, y: 2 };
 * delete obj.x;  // éšè—ç±»æ”¹å˜ï¼Œé™çº§ä¸ºå­—å…¸æ¨¡å¼
 *
 * âŒ åœ¨æ„é€ å‡½æ•°å¤–æ·»åŠ å±æ€§ï¼š
 * class Point {
 *   constructor(x) { this.x = x; }
 * }
 * let p = new Point(1);
 * p.y = 2;  // åœ¨æ„é€ å‡½æ•°å¤–æ·»åŠ ï¼Œå¯èƒ½å¯¼è‡´éšè—ç±»åˆ†è£‚
 */

// ============================================================
// 3. å†…è”ç¼“å­˜ï¼ˆInline Cache / ICï¼‰
// ============================================================

/**
 * ğŸ“– ä»€ä¹ˆæ˜¯å†…è”ç¼“å­˜ï¼Ÿ
 *
 * å†…è”ç¼“å­˜ç¼“å­˜å±æ€§è®¿é—®çš„ä¿¡æ¯ï¼Œé¿å…é‡å¤æŸ¥æ‰¾ã€‚
 *
 * ğŸ“Š IC çŠ¶æ€
 *
 * Uninitializedï¼ˆæœªåˆå§‹åŒ–ï¼‰
 *       â”‚
 *       â”‚ ç¬¬ä¸€æ¬¡è®¿é—®
 *       â–¼
 * Monomorphicï¼ˆå•æ€ï¼‰     â† æœ€å¿«
 *       â”‚                    åªè§è¿‡ä¸€ç§éšè—ç±»
 *       â”‚ é‡åˆ°ä¸åŒéšè—ç±»
 *       â–¼
 * Polymorphicï¼ˆå¤šæ€ï¼‰     â† è¾ƒå¿«
 *       â”‚                    è§è¿‡ 2-4 ç§éšè—ç±»
 *       â”‚ é‡åˆ°æ›´å¤šéšè—ç±»
 *       â–¼
 * Megamorphicï¼ˆè¶…å¤šæ€ï¼‰   â† æœ€æ…¢
 *                            è§è¿‡ 5+ ç§éšè—ç±»
 *                            é€€åŒ–ä¸ºå­—å…¸æŸ¥æ‰¾
 */

/**
 * ğŸ“Š å†…è”ç¼“å­˜ç¤ºä¾‹
 *
 * function getX(obj) {
 *   return obj.x;
 * }
 *
 * // ç¬¬ä¸€æ¬¡è°ƒç”¨
 * getX({ x: 1 });  // IC: Uninitialized â†’ Monomorphic
 *                  // ç¼“å­˜ï¼šéšè—ç±» C1ï¼Œx åœ¨ offset 0
 *
 * // åç»­è°ƒç”¨ç›¸åŒç»“æ„
 * getX({ x: 2 });  // IC å‘½ä¸­ï¼Œç›´æ¥ç”¨ offset è®¿é—®
 *
 * // è°ƒç”¨ä¸åŒç»“æ„
 * getX({ x: 1, y: 2 });  // IC: Monomorphic â†’ Polymorphic
 *                        // éœ€è¦æ£€æŸ¥å¤šä¸ªéšè—ç±»
 *
 * // è°ƒç”¨æ›´å¤šä¸åŒç»“æ„
 * getX({ a: 1, x: 2 });
 * getX({ b: 1, x: 2 });
 * ...
 * // IC: Megamorphicï¼Œæ¯æ¬¡éƒ½è¦æŸ¥æ‰¾
 */

// ============================================================
// 4. å¦‚ä½•å†™å‡º V8 å‹å¥½çš„ä»£ç 
// ============================================================

/**
 * ğŸ“Š æœ€ä½³å®è·µ
 */

// âœ… 1. ä¿æŒå¯¹è±¡ç»“æ„ç¨³å®š
// åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–æ‰€æœ‰å±æ€§
class Point {
  x: number;
  y: number;
  z: number | null;

  constructor(x: number, y: number) {
    this.x = x;
    this.y = y;
    this.z = null; // å³ä½¿æš‚æ—¶ä¸ç”¨ä¹Ÿåˆå§‹åŒ–
  }
}

// âœ… 2. ä»¥ç›¸åŒé¡ºåºåˆå§‹åŒ–å±æ€§
function createUser1(name: string, age: number) {
  return { name, age }; // æ€»æ˜¯ name åœ¨å‰ï¼Œage åœ¨å
}

// âŒ é¿å…ï¼šä¸åŒé¡ºåº
function createUser2(name: string, age: number) {
  const obj: any = {};
  if (Math.random() > 0.5) {
    obj.name = name;
    obj.age = age;
  } else {
    obj.age = age;
    obj.name = name;
  }
  return obj;
}

// âœ… 3. é¿å…ä½¿ç”¨ delete
// âŒ
function badDelete(obj: any) {
  delete obj.unused;
}
// âœ…
function goodDelete(obj: any) {
  obj.unused = undefined; // æˆ–è€…ä¸€å¼€å§‹å°±ä¸è¦è¿™ä¸ªå±æ€§
}

// âœ… 4. ä¿æŒå‡½æ•°å‚æ•°ç±»å‹ä¸€è‡´
function add(a: number, b: number) {
  return a + b;
}

// âœ… è°ƒç”¨æ—¶ä¿æŒç±»å‹ä¸€è‡´
add(1, 2);
add(3, 4);

// âŒ é¿å…ï¼šæ··åˆç±»å‹è°ƒç”¨
// add(1, 2);
// add('1', '2');  // ç±»å‹å˜åŒ–å¯¼è‡´ deoptimization

// âœ… 5. ä½¿ç”¨ TypedArray å¤„ç†æ•°å€¼æ•°ç»„
// æ™®é€šæ•°ç»„
const normalArray = [1, 2, 3];

// TypedArrayï¼ˆæ›´é«˜æ•ˆï¼‰
const typedArray = new Float64Array([1.0, 2.0, 3.0]);
const intArray = new Int32Array([1, 2, 3]);

// âœ… 6. é¿å…ç¨€ç–æ•°ç»„
// âŒ ç¨€ç–æ•°ç»„
const sparse = [];
sparse[0] = 1;
sparse[1000] = 2; // ä¸­é—´æœ‰å¤§é‡ç©ºæ´

// âœ… å¯†é›†æ•°ç»„
const dense = new Array(1001).fill(0);
dense[0] = 1;
dense[1000] = 2;

// âœ… 7. é¿å…æ•°ç»„ç±»å‹å˜åŒ–
// âŒ
const mixedArray = [1, 2, 3];
mixedArray.push('4'); // ä» PACKED_SMI_ELEMENTS å˜ä¸º PACKED_ELEMENTS

// âœ…
const numberArray: number[] = [1, 2, 3];
numberArray.push(4);

// ============================================================
// 5. æ•°ç»„å†…éƒ¨è¡¨ç¤º
// ============================================================

/**
 * ğŸ“Š V8 æ•°ç»„å…ƒç´ ç±»å‹
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ å…ƒç´ ç±»å‹                 â”‚ è¯´æ˜                                     â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ PACKED_SMI_ELEMENTS     â”‚ å°æ•´æ•°ï¼Œæœ€å¿«                             â”‚
 * â”‚ PACKED_DOUBLE_ELEMENTS  â”‚ æµ®ç‚¹æ•°                                   â”‚
 * â”‚ PACKED_ELEMENTS         â”‚ ä»»æ„ç±»å‹                                 â”‚
 * â”‚ HOLEY_SMI_ELEMENTS      â”‚ æœ‰ç©ºæ´çš„å°æ•´æ•°æ•°ç»„                        â”‚
 * â”‚ HOLEY_DOUBLE_ELEMENTS   â”‚ æœ‰ç©ºæ´çš„æµ®ç‚¹æ•°æ•°ç»„                        â”‚
 * â”‚ HOLEY_ELEMENTS          â”‚ æœ‰ç©ºæ´çš„ä»»æ„ç±»å‹æ•°ç»„                      â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * å…ƒç´ ç±»å‹åªèƒ½å‘ä¸‹è½¬æ¢ï¼Œä¸èƒ½å‘ä¸Šï¼š
 * PACKED_SMI â†’ PACKED_DOUBLE â†’ PACKED â†’ HOLEY_SMI â†’ HOLEY_DOUBLE â†’ HOLEY
 */

// ============================================================
// 6. Deoptimizationï¼ˆåä¼˜åŒ–ï¼‰
// ============================================================

/**
 * ğŸ“– ä»€ä¹ˆæ˜¯ Deoptimizationï¼Ÿ
 *
 * TurboFan åŸºäºç±»å‹å‡è®¾ç”Ÿæˆä¼˜åŒ–ä»£ç ã€‚
 * å¦‚æœè¿è¡Œæ—¶ç±»å‹ä¸å‡è®¾ä¸ç¬¦ï¼Œéœ€è¦"åä¼˜åŒ–"ï¼š
 * - ä¸¢å¼ƒä¼˜åŒ–åçš„æœºå™¨ç 
 * - å›é€€åˆ° Ignition æ‰§è¡Œå­—èŠ‚ç 
 *
 * å¸¸è§è§¦å‘æ¡ä»¶ï¼š
 * - å‡½æ•°å‚æ•°ç±»å‹å˜åŒ–
 * - å¯¹è±¡ç»“æ„å˜åŒ–
 * - æ•°ç»„å…ƒç´ ç±»å‹å˜åŒ–
 * - è®¿é—®æœªåˆå§‹åŒ–çš„å±æ€§
 */

// è§¦å‘ deoptimization çš„ä¾‹å­
function processValue(x: number | string) {
  // å¦‚æœæ€»æ˜¯ä¼  numberï¼ŒTurboFan ä¼šé’ˆå¯¹ number ä¼˜åŒ–
  // çªç„¶ä¼  string ä¼šè§¦å‘ deoptimization
  return typeof x === 'number' ? x * 2 : x.length;
}

// å‰ 1000 æ¬¡ä¼  number
for (let i = 0; i < 1000; i++) {
  processValue(i);
}
// TurboFan å·²ä¼˜åŒ–ä¸ºåªå¤„ç† number

// çªç„¶ä¼  string â†’ deoptimization!
// processValue('hello');

// ============================================================
// 7. é«˜é¢‘é¢è¯•é¢˜
// ============================================================

/**
 * é¢˜ç›® 1ï¼šV8 æ‰§è¡Œ JS ä»£ç çš„è¿‡ç¨‹ï¼Ÿ
 *
 * 1. è§£æï¼ˆParserï¼‰ï¼šæºç  â†’ AST
 * 2. è§£é‡Šï¼ˆIgnitionï¼‰ï¼šAST â†’ å­—èŠ‚ç  â†’ æ‰§è¡Œ
 * 3. ä¼˜åŒ–ï¼ˆTurboFanï¼‰ï¼šçƒ­ç‚¹ä»£ç  â†’ æœºå™¨ç 
 * 4. åä¼˜åŒ–ï¼ˆDeoptimizationï¼‰ï¼šå‡è®¾å¤±æ•ˆ â†’ å›é€€å­—èŠ‚ç 
 */

/**
 * é¢˜ç›® 2ï¼šä»€ä¹ˆæ˜¯éšè—ç±»ï¼Ÿä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ
 *
 * éšè—ç±»æ˜¯ V8 ä¸ºåŠ¨æ€å¯¹è±¡åˆ›å»ºçš„ç±»å‹æè¿°ï¼Œ
 * è®°å½•å¯¹è±¡çš„å±æ€§åã€åç§»é‡ç­‰ä¿¡æ¯ã€‚
 *
 * é‡è¦æ€§ï¼š
 * - ä½¿å±æ€§è®¿é—®æ¥è¿‘é™æ€è¯­è¨€çš„é€Ÿåº¦
 * - ç›¸åŒç»“æ„çš„å¯¹è±¡å…±äº«éšè—ç±»ï¼ŒèŠ‚çœå†…å­˜
 *
 * æœ€ä½³å®è·µï¼š
 * - åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–æ‰€æœ‰å±æ€§
 * - ä»¥ç›¸åŒé¡ºåºæ·»åŠ å±æ€§
 * - é¿å… delete
 */

/**
 * é¢˜ç›® 3ï¼šå¦‚ä½•å†™å‡º V8 å‹å¥½çš„ä»£ç ï¼Ÿ
 *
 * 1. ä¿æŒå¯¹è±¡ç»“æ„ç¨³å®š
 * 2. ä»¥ç›¸åŒé¡ºåºåˆå§‹åŒ–å±æ€§
 * 3. é¿å…ä½¿ç”¨ delete
 * 4. ä¿æŒå‡½æ•°å‚æ•°ç±»å‹ä¸€è‡´
 * 5. é¿å…ç¨€ç–æ•°ç»„
 * 6. é¿å…æ•°ç»„å…ƒç´ ç±»å‹æ··åˆ
 * 7. ä½¿ç”¨ TypedArray å¤„ç†æ•°å€¼
 */

/**
 * é¢˜ç›® 4ï¼šJIT ç¼–è¯‘å’Œè§£é‡Šæ‰§è¡Œçš„åŒºåˆ«ï¼Ÿ
 *
 * è§£é‡Šæ‰§è¡Œï¼š
 * - é€è¡Œç¿»è¯‘æ‰§è¡Œ
 * - å¯åŠ¨å¿«ï¼Œæ‰§è¡Œæ…¢
 * - æ¯æ¬¡æ‰§è¡Œéƒ½è¦ç¿»è¯‘
 *
 * JIT ç¼–è¯‘ï¼š
 * - Just-In-Timeï¼Œå³æ—¶ç¼–è¯‘
 * - å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘ä¸ºæœºå™¨ç 
 * - é¦–æ¬¡ç¼–è¯‘æœ‰å¼€é”€ï¼Œåç»­æ‰§è¡Œå¿«
 *
 * V8 çš„ç­–ç•¥ï¼š
 * - å†·ä»£ç ç”¨ Ignition è§£é‡Šæ‰§è¡Œ
 * - çƒ­ç‚¹ä»£ç ç”¨ TurboFan JIT ç¼–è¯‘
 * - å…¼é¡¾å¯åŠ¨é€Ÿåº¦å’Œæ‰§è¡Œæ•ˆç‡
 */

export { Point };

