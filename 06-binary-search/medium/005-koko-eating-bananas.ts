/**
 * ğŸ“ é¢˜ç›®ï¼šçˆ±åƒé¦™è•‰çš„ç‚ç‚
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/koko-eating-bananas/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ•°ç»„ã€äºŒåˆ†æŸ¥æ‰¾
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç‚ç‚å–œæ¬¢åƒé¦™è•‰ã€‚è¿™é‡Œæœ‰ n å †é¦™è•‰ï¼Œç¬¬ i å †ä¸­æœ‰ piles[i] æ ¹é¦™è•‰ã€‚
 * è­¦å«å·²ç»ç¦»å¼€äº†ï¼Œå°†åœ¨ h å°æ—¶åå›æ¥ã€‚
 *
 * ç‚ç‚å¯ä»¥å†³å®šå¥¹åƒé¦™è•‰çš„é€Ÿåº¦ kï¼ˆå•ä½ï¼šæ ¹/å°æ—¶ï¼‰ã€‚
 * æ¯ä¸ªå°æ—¶ï¼Œå¥¹å°†ä¼šé€‰æ‹©ä¸€å †é¦™è•‰ï¼Œä»ä¸­åƒæ‰ k æ ¹ã€‚
 * å¦‚æœè¿™å †é¦™è•‰å°‘äº k æ ¹ï¼Œå¥¹å°†åƒæ‰è¿™å †çš„æ‰€æœ‰é¦™è•‰ï¼Œç„¶åè¿™ä¸€å°æ—¶å†…ä¸ä¼šå†åƒæ›´å¤šçš„é¦™è•‰ã€‚
 *
 * ç‚ç‚å–œæ¬¢æ…¢æ…¢åƒï¼Œä½†ä»ç„¶æƒ³åœ¨è­¦å«å›æ¥å‰åƒæ‰æ‰€æœ‰çš„é¦™è•‰ã€‚
 *
 * è¿”å›å¥¹å¯ä»¥åœ¨ h å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰çš„æœ€å°é€Ÿåº¦ kï¼ˆk ä¸ºæ•´æ•°ï¼‰ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼špiles = [3,6,7,11], h = 8
 * è¾“å‡ºï¼š4
 *
 * è¾“å…¥ï¼špiles = [30,11,23,4,20], h = 5
 * è¾“å‡ºï¼š30
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// å…¸å‹çš„"ç­”æ¡ˆäºŒåˆ†"é—®é¢˜ï¼
//
// è§‚å¯Ÿï¼š
// - k è¶Šå¤§ï¼Œåƒå¾—è¶Šå¿«ï¼Œè¶Šå¯èƒ½åœ¨ h å°æ—¶å†…åƒå®Œ
// - k è¶Šå°ï¼Œåƒå¾—è¶Šæ…¢ï¼Œè¶Šå¯èƒ½åƒä¸å®Œ
// - å­˜åœ¨ä¸€ä¸ªä¸´ç•Œç‚¹ï¼šåˆšå¥½èƒ½åƒå®Œçš„æœ€å° k
//
// æœç´¢ç©ºé—´ï¼šk âˆˆ [1, max(piles)]
// åˆ¤æ–­æ¡ä»¶ï¼šä»¥é€Ÿåº¦ k èƒ½å¦åœ¨ h å°æ—¶å†…åƒå®Œ

// ============================================================
// è§£æ³•ï¼šç­”æ¡ˆäºŒåˆ†
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n log m)ï¼Œm æ˜¯æœ€å¤§å † | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * piles = [3, 6, 7, 11], h = 8
 *
 * æœç´¢ç©ºé—´: k âˆˆ [1, 11]
 *
 * éªŒè¯å‡½æ•°ï¼šä»¥é€Ÿåº¦ k åƒå®Œæ‰€æœ‰é¦™è•‰éœ€è¦çš„æ—¶é—´
 * - k=1: ceil(3/1)+ceil(6/1)+ceil(7/1)+ceil(11/1) = 27 > 8 âœ—
 * - k=4: ceil(3/4)+ceil(6/4)+ceil(7/4)+ceil(11/4) = 1+2+2+3 = 8 âœ“
 * - k=3: ceil(3/3)+ceil(6/3)+ceil(7/3)+ceil(11/3) = 1+2+3+4 = 10 > 8 âœ—
 *
 * äºŒåˆ†è¿‡ç¨‹ï¼š
 * left=1, right=11
 *
 * Step 1: mid=6, éœ€è¦ 1+1+2+2=6 <= 8 âœ“
 *         right=6
 *
 * Step 2: mid=3, éœ€è¦ 1+2+3+4=10 > 8 âœ—
 *         left=4
 *
 * Step 3: mid=5, éœ€è¦ 1+2+2+3=8 <= 8 âœ“
 *         right=5
 *
 * Step 4: mid=4, éœ€è¦ 1+2+2+3=8 <= 8 âœ“
 *         right=4
 *
 * left == right == 4
 * è¿”å› 4
 */
function minEatingSpeed(piles: number[], h: number): number {
  let left = 1;
  let right = Math.max(...piles);

  while (left < right) {
    const mid = left + ((right - left) >> 1);

    if (canFinish(piles, h, mid)) {
      // mid å¯è¡Œï¼Œå°è¯•æ›´å°çš„é€Ÿåº¦
      right = mid;
    } else {
      // mid ä¸å¯è¡Œï¼Œéœ€è¦æ›´å¤§çš„é€Ÿåº¦
      left = mid + 1;
    }
  }

  return left;
}

// åˆ¤æ–­ä»¥é€Ÿåº¦ k èƒ½å¦åœ¨ h å°æ—¶å†…åƒå®Œ
function canFinish(piles: number[], h: number, k: number): boolean {
  let hours = 0;
  for (const pile of piles) {
    hours += Math.ceil(pile / k);
  }
  return hours <= h;
}

// ============================================================
// ğŸ“Š ç­”æ¡ˆäºŒåˆ†æ¨¡æ¿
// ============================================================
/**
 * ç­”æ¡ˆäºŒåˆ†é€šç”¨æ­¥éª¤ï¼š
 *
 * 1. ç¡®å®šæœç´¢ç©ºé—´ [left, right]
 *    - left = æœ€å°å¯èƒ½çš„ç­”æ¡ˆ
 *    - right = æœ€å¤§å¯èƒ½çš„ç­”æ¡ˆ
 *
 * 2. å†™ä¸€ä¸ª check(x) å‡½æ•°
 *    - åˆ¤æ–­ x æ˜¯å¦å¯è¡Œ
 *
 * 3. äºŒåˆ†æ‰¾ç¬¬ä¸€ä¸ªå¯è¡Œçš„ xï¼ˆæˆ–æœ€åä¸€ä¸ªå¯è¡Œçš„ xï¼‰
 *
 * function binarySearchAnswer() {
 *   let left = MIN_ANSWER;
 *   let right = MAX_ANSWER;
 *
 *   while (left < right) {
 *     const mid = left + ((right - left) >> 1);
 *     if (check(mid)) {
 *       right = mid;     // æˆ– left = midï¼ˆå–å†³äºæ‰¾æœ€å°è¿˜æ˜¯æœ€å¤§ï¼‰
 *     } else {
 *       left = mid + 1;  // æˆ– right = mid - 1
 *     }
 *   }
 *
 *   return left;
 * }
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. æœç´¢ç©ºé—´çš„ç¡®å®šï¼š
 *    - æœ€å°é€Ÿåº¦æ˜¯ 1ï¼ˆä¸èƒ½æ˜¯ 0ï¼‰
 *    - æœ€å¤§é€Ÿåº¦æ˜¯ max(piles)ï¼ˆå†å¤§ä¹Ÿæ²¡æ„ä¹‰ï¼‰
 *
 * 2. å‘ä¸Šå–æ•´ï¼š
 *    - Math.ceil(pile / k)
 *    - æˆ–è€… Math.floor((pile + k - 1) / k)
 *
 * 3. æ‰¾çš„æ˜¯æœ€å°å¯è¡Œçš„ kï¼š
 *    - å¯è¡Œæ—¶ right = mid
 *    - ä¸å¯è¡Œæ—¶ left = mid + 1
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼ â†’ æœ€å¤§åŒ–æœ€å°
 * - åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ› â†’ ç±»ä¼¼æ€è·¯
 * - åˆ¶ä½œ m æŸèŠ±æ‰€éœ€çš„æœ€å°‘å¤©æ•° â†’ ç­”æ¡ˆäºŒåˆ†
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. ä»»åŠ¡è°ƒåº¦ï¼šæ‰¾æœ€å°çš„å¹¶å‘æ•°å®Œæˆæ‰€æœ‰ä»»åŠ¡
 * 2. èµ„æºåˆ†é…ï¼šæ‰¾æœ€å°çš„èµ„æºé…é¢æ»¡è¶³éœ€æ±‚
 * 3. æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¾æœ€å°çš„é…ç½®è¾¾åˆ°æ€§èƒ½ç›®æ ‡
 */

export { minEatingSpeed };
export default minEatingSpeed;

