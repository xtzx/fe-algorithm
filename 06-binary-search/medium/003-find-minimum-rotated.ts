/**
 * ğŸ“ é¢˜ç›®ï¼šå¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ•°ç»„ã€äºŒåˆ†æŸ¥æ‰¾
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± 1 åˆ° n æ¬¡ æ—‹è½¬ åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
 *
 * ç»™ä½ ä¸€ä¸ªå…ƒç´ å€¼ äº’ä¸ç›¸åŒ çš„æ•°ç»„ numsï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œ
 * å¹¶è¿›è¡Œäº†ä¸Šè¿°æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ æœ€å°å…ƒç´ ã€‚
 *
 * ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šnums = [3,4,5,1,2]
 * è¾“å‡ºï¼š1
 * è§£é‡Šï¼šåŸæ•°ç»„ä¸º [1,2,3,4,5]ï¼Œæ—‹è½¬ 3 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„
 *
 * è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2]
 * è¾“å‡ºï¼š0
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// æœ€å°å€¼å°±æ˜¯æ—‹è½¬ç‚¹ï¼
//
// æ—‹è½¬æ•°ç»„ï¼š[4, 5, 6, 7, 0, 1, 2]
//                    â†‘
//                 æ—‹è½¬ç‚¹/æœ€å°å€¼
//
// å…³é”®è§‚å¯Ÿï¼š
// - nums[mid] > nums[right] â†’ æœ€å°å€¼åœ¨å³åŠè¾¹
// - nums[mid] < nums[right] â†’ æœ€å°å€¼åœ¨å·¦åŠè¾¹ï¼ˆåŒ…æ‹¬ midï¼‰
// - nums[mid] == nums[right] â†’ åªæœ‰åœ¨æ— é‡å¤æ—¶ï¼Œè¯´æ˜ mid å°±æ˜¯å³è¾¹ç•Œ

// ============================================================
// è§£æ³•ï¼šäºŒåˆ†æŸ¥æ‰¾
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(log n) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * nums = [4, 5, 6, 7, 0, 1, 2]
 *         0  1  2  3  4  5  6
 *
 * åˆå§‹: left=0, right=6
 *
 * Step 1: mid = 3, nums[mid] = 7
 *         nums[3]=7 > nums[6]=2
 *         æœ€å°å€¼åœ¨å³åŠè¾¹
 *         left = 4
 *
 * Step 2: mid = 5, nums[mid] = 1
 *         nums[5]=1 < nums[6]=2
 *         æœ€å°å€¼åœ¨å·¦åŠè¾¹ï¼ˆåŒ…æ‹¬ midï¼‰
 *         right = 5
 *
 * Step 3: mid = 4, nums[mid] = 0
 *         nums[4]=0 < nums[5]=1
 *         right = 4
 *
 * left == right == 4
 * è¿”å› nums[4] = 0
 */
function findMin(nums: number[]): number {
  let left = 0;
  let right = nums.length - 1;

  while (left < right) {
    const mid = left + ((right - left) >> 1);

    if (nums[mid] > nums[right]) {
      // mid åœ¨å·¦æ®µï¼Œæœ€å°å€¼åœ¨å³åŠè¾¹
      left = mid + 1;
    } else {
      // mid åœ¨å³æ®µæˆ–å·²ç»æœ‰åºï¼Œæœ€å°å€¼åœ¨å·¦åŠè¾¹ï¼ˆåŒ…æ‹¬ midï¼‰
      right = mid;
    }
  }

  return nums[left];
}

// ============================================================
// è§£æ³•äºŒï¼šä¸ nums[0] æ¯”è¾ƒ
// ============================================================
function findMin_v2(nums: number[]): number {
  // å¦‚æœæ²¡æœ‰æ—‹è½¬ï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª
  if (nums[0] <= nums[nums.length - 1]) {
    return nums[0];
  }

  let left = 0;
  let right = nums.length - 1;

  while (left < right) {
    const mid = left + ((right - left) >> 1);

    if (nums[mid] >= nums[0]) {
      // mid åœ¨å·¦æ®µ
      left = mid + 1;
    } else {
      // mid åœ¨å³æ®µ
      right = mid;
    }
  }

  return nums[left];
}

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. ä¸ nums[right] æ¯”è¾ƒï¼Œä¸æ˜¯ nums[left]ï¼š
 *    - å› ä¸ºå¯èƒ½æ•°ç»„æ²¡æœ‰æ—‹è½¬
 *    - æ­¤æ—¶ nums[left] å°±æ˜¯æœ€å°å€¼
 *
 * 2. right = midï¼Œä¸æ˜¯ mid - 1ï¼š
 *    - å› ä¸º mid å¯èƒ½å°±æ˜¯æœ€å°å€¼
 *
 * 3. å¾ªç¯æ¡ä»¶ left < rightï¼š
 *    - æœ€ç»ˆ left == right å°±æ˜¯ç­”æ¡ˆ
 *
 * 4. æ²¡æœ‰æ—‹è½¬çš„æƒ…å†µï¼š
 *    - [1, 2, 3, 4, 5] è¿™ç§æƒ…å†µä¹Ÿèƒ½å¤„ç†
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II â†’ æœ‰é‡å¤å…ƒç´ 
 * - æœç´¢æ—‹è½¬æ’åºæ•°ç»„ â†’ åœ¨æ—‹è½¬æ•°ç»„ä¸­æœç´¢
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. å¾ªç¯é˜Ÿåˆ—ï¼šæ‰¾é˜Ÿåˆ—çš„èµ·å§‹ä½ç½®
 * 2. æ—¥å¿—åˆ†æï¼šåœ¨å¾ªç¯æ—¥å¿—ç¼“å†²åŒºä¸­æ‰¾æœ€æ—©çš„è®°å½•
 */

export { findMin, findMin_v2 };
export default findMin;

