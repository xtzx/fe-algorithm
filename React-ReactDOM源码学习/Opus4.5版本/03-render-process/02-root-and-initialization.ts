/**
 * ============================================================
 * ğŸ“š Phase 3: æ¸²æŸ“æµç¨‹ - Part 2: Root ä¸åˆå§‹åŒ–
 * ============================================================
 *
 * ğŸ“ æ ¸å¿ƒæºç ä½ç½®:
 * - packages/react-dom/src/client/ReactDOMRoot.js
 * - packages/react-reconciler/src/ReactFiberRoot.new.js
 * - packages/react-reconciler/src/ReactFiberReconciler.js
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š1-2 å°æ—¶
 * ğŸ¯ é¢è¯•æƒé‡ï¼šâ­â­â­â­
 */

// ============================================================
// Part 1: FiberRoot ä¸ HostRootFiber çš„å…³ç³»
// ============================================================

/**
 * ğŸ“Š FiberRoot ä¸ HostRootFiber
 */

const rootRelationship = `
ğŸ“Š FiberRoot ä¸ HostRootFiber çš„å…³ç³»

è¿™æ˜¯ React åº”ç”¨ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½†å¾ˆå®¹æ˜“æ··æ·†:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                        FiberRootï¼ˆFiberRootNodeï¼‰                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  ä½œç”¨: æ•´ä¸ª React åº”ç”¨çš„"ç®¡ç†ä¸­å¿ƒ"                                    â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  èŒè´£:                                                                â”‚ â”‚
â”‚  â”‚  â€¢ å­˜å‚¨åº”ç”¨çº§åˆ«çš„çŠ¶æ€ï¼ˆcontainerInfoã€callbackNode ç­‰ï¼‰               â”‚ â”‚
â”‚  â”‚  â€¢ ç®¡ç†è°ƒåº¦ç›¸å…³ä¿¡æ¯ï¼ˆä¼˜å…ˆçº§ã€å¾…å¤„ç†çš„ lanesï¼‰                         â”‚ â”‚
â”‚  â”‚  â€¢ è¿æ¥ DOM å®¹å™¨å’Œ Fiber æ ‘                                           â”‚ â”‚
â”‚  â”‚  â€¢ å­˜å‚¨å·²å®Œæˆçš„å·¥ä½œï¼ˆfinishedWorkï¼‰                                   â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  åˆ›å»ºæ—¶æœº: createRoot(container) æ—¶åˆ›å»º                               â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚         current â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼                                                 â”‚
â”‚                                                                             â”‚
â”‚                        HostRootFiberï¼ˆFiberNodeï¼‰                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  ä½œç”¨: Fiber æ ‘çš„æ ¹èŠ‚ç‚¹                                               â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  èŒè´£:                                                                â”‚ â”‚
â”‚  â”‚  â€¢ ä½œä¸º Fiber æ ‘çš„èµ·ç‚¹ï¼ˆtag = HostRoot = 3ï¼‰                          â”‚ â”‚
â”‚  â”‚  â€¢ å­˜å‚¨æ ¹èŠ‚ç‚¹çš„çŠ¶æ€ï¼ˆmemoizedStateï¼‰                                  â”‚ â”‚
â”‚  â”‚  â€¢ è¿æ¥å­ç»„ä»¶çš„ Fiberï¼ˆchild æŒ‡å‘ <App /> çš„ Fiberï¼‰                  â”‚ â”‚
â”‚  â”‚  â€¢ stateNode æŒ‡å› FiberRoot                                           â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  åˆ›å»ºæ—¶æœº: createRoot æ—¶éš FiberRoot ä¸€èµ·åˆ›å»º                         â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


å®ƒä»¬ä¹‹é—´çš„æŒ‡é’ˆå…³ç³»:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         current         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚  â”‚
â”‚   â”‚      FiberRoot       â”‚                         â”‚   HostRootFiber    â”‚  â”‚
â”‚   â”‚  (FiberRootNode)     â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   (tag = HostRoot) â”‚  â”‚
â”‚   â”‚                      â”‚        stateNode        â”‚                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                               â”‚             â”‚
â”‚              â”‚ containerInfo                                 â”‚ child       â”‚
â”‚              â”‚                                               â”‚             â”‚
â”‚              â–¼                                               â–¼             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      â”‚                         â”‚                    â”‚  â”‚
â”‚   â”‚   DOM Container      â”‚                         â”‚   <App /> Fiber    â”‚  â”‚
â”‚   â”‚  <div id="root">     â”‚                         â”‚   (ä½ çš„æ ¹ç»„ä»¶)     â”‚  â”‚
â”‚   â”‚                      â”‚                         â”‚                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ç±»æ¯”ç†è§£:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FiberRoot å°±åƒ "å…¬å¸æ€»éƒ¨":
  â€¢ ç®¡ç†æ•´ä¸ªå…¬å¸çš„è¿è¥çŠ¶æ€
  â€¢ ä¸å¤–ç•Œï¼ˆDOMï¼‰æ‰“äº¤é“
  â€¢ è°ƒåº¦èµ„æºï¼ˆä¼˜å…ˆçº§ã€ä»»åŠ¡ï¼‰
  â€¢ ä¸å‚ä¸å…·ä½“ä¸šåŠ¡

HostRootFiber å°±åƒ "CEO":
  â€¢ æ˜¯ç»„ç»‡æ¶æ„çš„æœ€é«˜å±‚
  â€¢ ç®¡ç†ä¸‹å±ï¼ˆå­ Fiberï¼‰
  â€¢ å‚ä¸å…·ä½“çš„æ¸²æŸ“å·¥ä½œ
  â€¢ å‘ä¸Šæ±‡æŠ¥ç»™æ€»éƒ¨ï¼ˆstateNode æŒ‡å‘ FiberRootï¼‰
`;

// ============================================================
// Part 2: FiberRootNode çš„ç»“æ„
// ============================================================

/**
 * ğŸ“Š FiberRootNode æºç ç»“æ„
 * ğŸ“ packages/react-reconciler/src/ReactFiberRoot.new.js
 */

const fiberRootStructure = `
ğŸ“Š FiberRootNode çš„ç»“æ„

æºç ä½ç½®: packages/react-reconciler/src/ReactFiberRoot.new.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function FiberRootNode(
  containerInfo,       // DOM å®¹å™¨èŠ‚ç‚¹
  tag,                 // Root ç±»å‹ï¼ˆConcurrentRoot = 1, LegacyRoot = 0ï¼‰
  hydrate,             // æ˜¯å¦æ˜¯ hydrate æ¨¡å¼
  identifierPrefix,    // ç”¨äº useId çš„å‰ç¼€
  onRecoverableError,  // é”™è¯¯å¤„ç†å›è°ƒ
) {
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• åŸºç¡€ä¿¡æ¯ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  this.tag = tag;                          // Root ç±»å‹
  this.containerInfo = containerInfo;      // DOM å®¹å™¨
  this.pendingChildren = null;             // å¾…å¤„ç†çš„å­èŠ‚ç‚¹
  this.current = null;                     // â­ æŒ‡å‘ HostRootFiber

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ç¼“å­˜ç›¸å…³ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  this.pingCache = null;                   // Suspense ping ç¼“å­˜
  this.finishedWork = null;                // â­ å·²å®Œæˆçš„å·¥ä½œæ ‘
  this.timeoutHandle = noTimeout;          // è¶…æ—¶å¥æŸ„
  this.context = null;                     // Legacy Context
  this.pendingContext = null;              // å¾…å¤„ç†çš„ Context

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• è°ƒåº¦ç›¸å…³ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  this.callbackNode = null;                // â­ Scheduler å›è°ƒèŠ‚ç‚¹
  this.callbackPriority = NoLane;          // å›è°ƒä¼˜å…ˆçº§

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Lane ç›¸å…³ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  this.eventTimes = createLaneMap(NoLanes);    // æ¯ä¸ª lane çš„äº‹ä»¶æ—¶é—´
  this.expirationTimes = createLaneMap(NoTimestamp); // è¿‡æœŸæ—¶é—´

  this.pendingLanes = NoLanes;             // â­ å¾…å¤„ç†çš„ lanes
  this.suspendedLanes = NoLanes;           // æŒ‚èµ·çš„ lanes
  this.pingedLanes = NoLanes;              // è¢« ping çš„ lanes
  this.expiredLanes = NoLanes;             // è¿‡æœŸçš„ lanes
  this.mutableReadLanes = NoLanes;         // å¯å˜è¯»å– lanes
  this.finishedLanes = NoLanes;            // å®Œæˆçš„ lanes

  this.entangledLanes = NoLanes;           // çº ç¼ çš„ lanes
  this.entanglements = createLaneMap(NoLanes);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• å…¶ä»– â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  this.identifierPrefix = identifierPrefix;
  this.onRecoverableError = onRecoverableError;
}


æ ¸å¿ƒå­—æ®µè¯´æ˜:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­—æ®µ            â”‚ è¯´æ˜                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ containerInfo   â”‚ DOM å®¹å™¨èŠ‚ç‚¹ï¼Œå¦‚ document.getElementById('root')         â”‚
â”‚ current         â”‚ æŒ‡å‘å½“å‰çš„ HostRootFiberï¼ˆcurrent Fiber æ ‘çš„æ ¹ï¼‰        â”‚
â”‚ finishedWork    â”‚ render é˜¶æ®µå®Œæˆåï¼ŒæŒ‡å‘æ–°çš„ HostRootFiber               â”‚
â”‚ callbackNode    â”‚ Scheduler è¿”å›çš„ä»»åŠ¡èŠ‚ç‚¹ï¼Œç”¨äºå–æ¶ˆä»»åŠ¡                   â”‚
â”‚ callbackPriorityâ”‚ å½“å‰è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§                                     â”‚
â”‚ pendingLanes    â”‚ è¿˜æ²¡å¤„ç†çš„æ›´æ–°ä¼˜å…ˆçº§é›†åˆ                                 â”‚
â”‚ suspendedLanes  â”‚ è¢« Suspense æŒ‚èµ·çš„ä¼˜å…ˆçº§                                 â”‚
â”‚ pingedLanes     â”‚ Suspense resolve åè¢«å”¤é†’çš„ä¼˜å…ˆçº§                        â”‚
â”‚ expiredLanes    â”‚ è¶…æ—¶éœ€è¦å¼ºåˆ¶åŒæ­¥çš„ä¼˜å…ˆçº§                                 â”‚
â”‚ finishedLanes   â”‚ render é˜¶æ®µå®Œæˆçš„ä¼˜å…ˆçº§                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 3: createRoot çš„æ‰§è¡Œæµç¨‹
// ============================================================

/**
 * ğŸ“Š createRoot å†…éƒ¨æµç¨‹
 */

const createRootFlow = `
ğŸ“Š createRoot(container) å†…éƒ¨æ‰§è¡Œæµç¨‹

æºç ä½ç½®: packages/react-dom/src/client/ReactDOMRoot.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: å¼€å‘è€…è°ƒç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const root = createRoot(document.getElementById('root'));


Step 2: createRoot å‡½æ•°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ ReactDOMRoot.js

export function createRoot(
  container: Element | Document | DocumentFragment,
  options?: CreateRootOptions,
): RootType {
  // ... éªŒè¯å‚æ•°

  // â­ æ ¸å¿ƒ: åˆ›å»º FiberRoot
  const root = createContainer(
    container,
    ConcurrentRoot,  // tag = 1
    null,            // hydrationCallbacks
    isStrictMode,
    concurrentUpdatesByDefault,
    identifierPrefix,
    onRecoverableError,
    transitionCallbacks,
  );

  // æ ‡è®° DOM å®¹å™¨
  markContainerAsRoot(root.current, container);

  // â­ æ³¨å†Œäº‹ä»¶ç›‘å¬
  listenToAllSupportedEvents(rootContainerElement);

  // è¿”å› ReactDOMRoot å®ä¾‹
  return new ReactDOMRoot(root);
}


Step 3: createContainer åˆ›å»º FiberRoot
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ ReactFiberReconciler.js â†’ ReactFiberRoot.new.js

export function createContainer(containerInfo, tag, ...): FiberRoot {
  // ...
  return createFiberRoot(containerInfo, tag, ...);
}

export function createFiberRoot(containerInfo, tag, ...): FiberRoot {
  // 1. åˆ›å»º FiberRoot
  const root: FiberRoot = new FiberRootNode(
    containerInfo,
    tag,
    hydrate,
    identifierPrefix,
    onRecoverableError,
  );

  // 2. åˆ›å»º HostRootFiber
  const uninitializedFiber = createHostRootFiber(
    tag,
    isStrictMode,
    concurrentUpdatesByDefault,
  );

  // 3. â­ å»ºç«‹åŒå‘è¿æ¥
  root.current = uninitializedFiber;
  uninitializedFiber.stateNode = root;

  // 4. åˆå§‹åŒ– HostRootFiber çš„ updateQueue
  initializeUpdateQueue(uninitializedFiber);

  return root;
}


å®Œæ•´æ—¶åºå›¾:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   createRoot(container)                                                     â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ éªŒè¯ container åˆæ³•æ€§â”‚                                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚   createContainer   â”‚                                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚   createFiberRoot   â”‚                                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚                                             â”‚                â”‚
â”‚              â–¼                                             â–¼                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  new FiberRootNode  â”‚                    â”‚  createHostRootFiber     â”‚  â”‚
â”‚   â”‚  (åˆ›å»º FiberRoot)   â”‚                    â”‚  (åˆ›å»º HostRootFiber)    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                            â”‚                â”‚
â”‚              â”‚â—€â”€â”€â”€â”€â”€ root.current = fiber â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚              â”‚                                            â”‚                â”‚
â”‚              â”‚â”€â”€â”€â”€â”€â”€ fiber.stateNode = root â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                â”‚
â”‚              â”‚                                            â”‚                â”‚
â”‚              â–¼                                            â–¼                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚   FiberRoot åˆ›å»ºå®Œæˆ â”‚                    â”‚ initializeUpdateQueue   â”‚  â”‚
â”‚   â”‚                     â”‚                    â”‚ (åˆå§‹åŒ–æ›´æ–°é˜Ÿåˆ—)         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                              â”‚
â”‚              â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚markContainerAsRoot  â”‚  åœ¨ DOM èŠ‚ç‚¹ä¸Šæ ‡è®°å·²è¢« React æ¥ç®¡                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚listenToAllSupportedEvents   â”‚  æ³¨å†Œæ‰€æœ‰æ”¯æŒçš„äº‹ä»¶ç›‘å¬                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚              â”‚                                                              â”‚
â”‚              â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ new ReactDOMRoot    â”‚  è¿”å›ç»™å¼€å‘è€…                                     â”‚
â”‚   â”‚ {                   â”‚                                                   â”‚
â”‚   â”‚   _internalRoot,    â”‚                                                   â”‚
â”‚   â”‚   render,           â”‚                                                   â”‚
â”‚   â”‚   unmount,          â”‚                                                   â”‚
â”‚   â”‚ }                   â”‚                                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 4: root.render() çš„æ‰§è¡Œæµç¨‹
// ============================================================

/**
 * ğŸ“Š root.render() æµç¨‹
 */

const rootRenderFlow = `
ğŸ“Š root.render(<App />) å†…éƒ¨æ‰§è¡Œæµç¨‹

æºç ä½ç½®: packages/react-dom/src/client/ReactDOMRoot.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: å¼€å‘è€…è°ƒç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
root.render(<App />);


Step 2: ReactDOMRoot.prototype.render
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ ReactDOMRoot.js (Line 92-135)

ReactDOMRoot.prototype.render = function(children) {
  const root = this._internalRoot;  // å–å‡º FiberRoot
  if (root === null) {
    throw new Error('Cannot update an unmounted root.');
  }

  // â­ æ ¸å¿ƒ: è°ƒç”¨ updateContainer
  updateContainer(children, root, null, null);
};


Step 3: updateContainer è§¦å‘æ›´æ–°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ ReactFiberReconciler.js

export function updateContainer(
  element: ReactNodeList,       // <App />ï¼ˆReactElementï¼‰
  container: OpaqueRoot,        // FiberRoot
  parentComponent: ?React$Component<any, any>,
  callback: ?Function,
): Lane {
  const current = container.current;  // HostRootFiber
  const eventTime = requestEventTime();
  const lane = requestUpdateLane(current);  // â­ è·å–æ›´æ–°ä¼˜å…ˆçº§

  // åˆ›å»º Update å¯¹è±¡
  const update = createUpdate(eventTime, lane);
  update.payload = { element };  // â­ payload å°±æ˜¯ <App />
  update.callback = callback;

  // å°† Update åŠ å…¥ HostRootFiber çš„ updateQueue
  const root = enqueueUpdate(current, update, lane);

  if (root !== null) {
    // â­ æ ¸å¿ƒ: è°ƒåº¦æ›´æ–°
    scheduleUpdateOnFiber(root, current, lane, eventTime);
    entangleTransitions(root, current, lane);
  }

  return lane;
}


å®Œæ•´æ—¶åºå›¾:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   root.render(<App />)                                                      â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”‚  this._internalRoot â†’ FiberRoot                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚   updateContainer   â”‚  ğŸ“ ReactFiberReconciler.js                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚              â”‚                                                    â”‚        â”‚
â”‚              â–¼                                                    â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚        â”‚
â”‚   â”‚ requestUpdateLane   â”‚  ç¡®å®šæ›´æ–°çš„ä¼˜å…ˆçº§ï¼ˆLaneï¼‰               â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚        â”‚
â”‚              â”‚                                                    â”‚        â”‚
â”‚              â–¼                                                    â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚        â”‚
â”‚   â”‚   createUpdate      â”‚  åˆ›å»º Update å¯¹è±¡                       â”‚        â”‚
â”‚   â”‚   {                 â”‚                                        â”‚        â”‚
â”‚   â”‚     lane,           â”‚                                        â”‚        â”‚
â”‚   â”‚     tag: UpdateState,â”‚                                       â”‚        â”‚
â”‚   â”‚     payload: {element},  â† <App />                           â”‚        â”‚
â”‚   â”‚     callback,       â”‚                                        â”‚        â”‚
â”‚   â”‚     next: null,     â”‚                                        â”‚        â”‚
â”‚   â”‚   }                 â”‚                                        â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚        â”‚
â”‚              â”‚                                                    â”‚        â”‚
â”‚              â–¼                                                    â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚        â”‚
â”‚   â”‚   enqueueUpdate     â”‚  å°† Update åŠ å…¥ HostRootFiber          â”‚        â”‚
â”‚   â”‚                     â”‚  çš„ updateQueue                        â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚        â”‚
â”‚              â”‚                                                    â”‚        â”‚
â”‚              â–¼                                                    â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚        â”‚
â”‚   â”‚ scheduleUpdateOnFiber â”‚  â­ å¼€å§‹è°ƒåº¦ï¼Œè¿›å…¥æ¸²æŸ“ç®¡é“            â”‚        â”‚
â”‚   â”‚                       â”‚  ğŸ“ ReactFiberWorkLoop.new.js        â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Update å¯¹è±¡ç»“æ„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const update = {
  eventTime,           // äº‹ä»¶å‘ç”Ÿæ—¶é—´
  lane,                // æ›´æ–°ä¼˜å…ˆçº§
  tag: UpdateState,    // æ›´æ–°ç±»å‹
  payload: {           // â­ å¯¹äºæ ¹èŠ‚ç‚¹ï¼Œpayload æ˜¯ ReactElement
    element: <App />,
  },
  callback: null,      // å›è°ƒå‡½æ•°
  next: null,          // é“¾è¡¨æŒ‡é’ˆ
};
`;

// ============================================================
// Part 5: é¢è¯•è¦ç‚¹
// ============================================================

const interviewPoints = `
ğŸ’¡ Part 2 é¢è¯•è¦ç‚¹

Q1: FiberRoot å’Œ HostRootFiber çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
A: - FiberRootï¼ˆFiberRootNodeï¼‰ï¼šåº”ç”¨çº§åˆ«çš„ç®¡ç†ä¸­å¿ƒï¼Œå­˜å‚¨è°ƒåº¦çŠ¶æ€ã€DOM å®¹å™¨ã€å®Œæˆçš„å·¥ä½œç­‰
   - HostRootFiberï¼šFiber æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œtag=3ï¼Œå‚ä¸å…·ä½“çš„æ¸²æŸ“å·¥ä½œ
   ä¸¤è€…é€šè¿‡ current å’Œ stateNode ç›¸äº’å¼•ç”¨ã€‚

Q2: createRoot æ—¶ React åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ
A: 1. éªŒè¯ container åˆæ³•æ€§
   2. åˆ›å»º FiberRootNodeï¼ˆåº”ç”¨ç®¡ç†ä¸­å¿ƒï¼‰
   3. åˆ›å»º HostRootFiberï¼ˆFiber æ ‘æ ¹ï¼‰
   4. å»ºç«‹ FiberRoot å’Œ HostRootFiber çš„åŒå‘è¿æ¥
   5. åˆå§‹åŒ– HostRootFiber çš„ updateQueue
   6. åœ¨ DOM å®¹å™¨ä¸Šæ ‡è®°å·²è¢« React æ¥ç®¡
   7. æ³¨å†Œæ‰€æœ‰æ”¯æŒçš„äº‹ä»¶ç›‘å¬

Q3: root.render() æ˜¯å¦‚ä½•è§¦å‘æ¸²æŸ“çš„ï¼Ÿ
A: 1. è·å– FiberRootï¼ˆthis._internalRootï¼‰
   2. è°ƒç”¨ updateContainer
   3. ç¡®å®šæ›´æ–°ä¼˜å…ˆçº§ï¼ˆrequestUpdateLaneï¼‰
   4. åˆ›å»º Update å¯¹è±¡ï¼ˆpayload åŒ…å« ReactElementï¼‰
   5. å°† Update åŠ å…¥ updateQueue
   6. è°ƒç”¨ scheduleUpdateOnFiber è§¦å‘è°ƒåº¦

Q4: ä¸ºä»€ä¹ˆè¦æœ‰ FiberRoot è¿™ä¸ªç»“æ„ï¼Ÿ
A: 1. åˆ†ç¦»åº”ç”¨çº§çŠ¶æ€å’Œç»„ä»¶çº§çŠ¶æ€
   2. ç®¡ç†è°ƒåº¦ä¿¡æ¯ï¼ˆä¼˜å…ˆçº§ã€ä»»åŠ¡ç­‰ï¼‰
   3. æ”¯æŒå¹¶å‘æ¨¡å¼çš„å¤šä¸ªå¾…å¤„ç†æ›´æ–°
   4. å­˜å‚¨å®Œæˆçš„å·¥ä½œï¼ˆfinishedWorkï¼‰
   5. è¿æ¥ DOM å®¹å™¨å’Œ Fiber æ ‘

Q5: containerInfo æ˜¯åœ¨å“ªä¸ªå¯¹è±¡ä¸Šï¼Ÿ
A: åœ¨ FiberRootï¼ˆFiberRootNodeï¼‰ä¸Šã€‚å®ƒæŒ‡å‘ DOM å®¹å™¨èŠ‚ç‚¹ï¼ˆå¦‚ document.getElementById('root')ï¼‰ã€‚
   HostRootFiber é€šè¿‡ stateNode æŒ‡å‘ FiberRootï¼Œé—´æ¥è®¿é—® containerInfoã€‚
`;

export {
  rootRelationship,
  fiberRootStructure,
  createRootFlow,
  rootRenderFlow,
  interviewPoints,
};

