/**
 * ============================================================
 * ğŸ“š Phase 11: SSR & Hydration - Part 5: æºç å¯¼èˆªä¸é˜…è¯»æŒ‡å—
 * ============================================================
 *
 * ğŸ“ æ ¸å¿ƒæºç ç›®å½•:
 * - packages/react-dom/src/server/ (æœåŠ¡ç«¯æ¸²æŸ“)
 * - packages/react-dom/src/client/ (å®¢æˆ·ç«¯ hydration)
 * - packages/react-server/src/ (Fizz æ ¸å¿ƒ)
 * - packages/react-reconciler/src/ (hydration context)
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š1-2 å°æ—¶
 * ğŸ¯ é¢è¯•æƒé‡ï¼šâ­â­â­â­
 */

// ============================================================
// Part 1: æ ¸å¿ƒæ–‡ä»¶æ¦‚è§ˆ
// ============================================================

/**
 * ğŸ“Š SSR & Hydration ç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶
 */

const coreFiles = `
ğŸ“Š SSR & Hydration ç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶

æœåŠ¡ç«¯æ¸²æŸ“ - packages/react-dom/src/server/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                                â”‚ èŒè´£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMFizzServerNode.js           â”‚ â­ renderToPipeableStream å…¥å£        â”‚
â”‚                                     â”‚ Node.js ç¯å¢ƒçš„æµå¼ SSR                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMFizzServerBrowser.js        â”‚ renderToReadableStream å…¥å£           â”‚
â”‚                                     â”‚ Web Streams API (Edge Runtime)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactPartialRenderer.js             â”‚ â­ æ—§ç‰ˆæ¸²æŸ“å™¨æ ¸å¿ƒ                     â”‚
â”‚                                     â”‚ renderToString / renderToNodeStream   â”‚
â”‚                                     â”‚ åŒ…å« ReactDOMServerRenderer ç±»        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMServerFormatConfig.js       â”‚ HTML æ ¼å¼åŒ–é…ç½®                       â”‚
â”‚                                     â”‚ å±æ€§è¾“å‡ºã€æ ‡ç­¾ç”Ÿæˆç­‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DOMMarkupOperations.js              â”‚ DOM å±æ€§ç”Ÿæˆ                          â”‚
â”‚                                     â”‚ createMarkupForProperty ç­‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ escapeTextForBrowser.js             â”‚ æ–‡æœ¬è½¬ä¹‰ï¼ˆXSS é˜²æŠ¤ï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactPartialRendererHooks.js        â”‚ æœåŠ¡ç«¯ Hooks å®ç°                     â”‚
â”‚                                     â”‚ useState, useContext ç­‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Fizz æ ¸å¿ƒ - packages/react-server/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                                â”‚ èŒè´£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFizzServer.js                  â”‚ â­â­â­ Fizz æ ¸å¿ƒå®ç°                   â”‚
â”‚                                     â”‚ Task, Request, Segment ç­‰æ¦‚å¿µ         â”‚
â”‚                                     â”‚ performWork, retryTask, renderNode    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFizzHooks.js                   â”‚ Fizz ç¯å¢ƒä¸‹çš„ Hooks                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFlightServer.js                â”‚ Server Components ç›¸å…³                â”‚
â”‚                                     â”‚ (React 18.2 å®éªŒæ€§åŠŸèƒ½)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


å®¢æˆ·ç«¯ Hydration - packages/react-dom/src/client/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                                â”‚ èŒè´£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMRoot.js                     â”‚ â­ hydrateRoot å…¥å£                   â”‚
â”‚                                     â”‚ createHydrationContainer è°ƒç”¨         â”‚
â”‚                                     â”‚ listenToAllSupportedEvents            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMHostConfig.js               â”‚ DOM æ“ä½œé…ç½®                          â”‚
â”‚                                     â”‚ canHydrateInstance                    â”‚
â”‚                                     â”‚ hydrateInstance                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMComponentTree.js            â”‚ DOM â†” Fiber æ˜ å°„                      â”‚
â”‚                                     â”‚ precacheFiberNode                     â”‚
â”‚                                     â”‚ getClosestInstanceFromNode            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Reconciler ä¸­çš„ Hydration - packages/react-reconciler/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                                â”‚ èŒè´£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberHydrationContext.new.js   â”‚ â­â­ Hydration çŠ¶æ€ç®¡ç†               â”‚
â”‚                                     â”‚ enterHydrationState                   â”‚
â”‚                                     â”‚ tryToClaimNextHydratableInstance      â”‚
â”‚                                     â”‚ popHydrationState                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberBeginWork.new.js          â”‚ Hydration æ¨¡å¼ä¸‹çš„ beginWork          â”‚
â”‚                                     â”‚ å¤ç”¨ DOM vs åˆ›å»º DOM                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberCompleteWork.new.js       â”‚ prepareToHydrateHostInstance          â”‚
â”‚                                     â”‚ å±æ€§å¯¹æ¯”å’Œæ›´æ–°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberReconciler.js             â”‚ createHydrationContainer              â”‚
â”‚                                     â”‚ updateContainer                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


äº‹ä»¶é‡æ”¾ - packages/react-dom/src/events/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                                â”‚ èŒè´£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactDOMEventReplaying.js           â”‚ Selective Hydration äº‹ä»¶é‡æ”¾          â”‚
â”‚                                     â”‚ queueExplicitHydrationTarget          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DOMPluginEventSystem.js             â”‚ listenToAllSupportedEvents            â”‚
â”‚                                     â”‚ äº‹ä»¶å§”æ‰˜ç»‘å®š                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 2: æ¨èé˜…è¯»é¡ºåº
// ============================================================

/**
 * ğŸ“Š æ¨èé˜…è¯»é¡ºåº
 */

const readingOrder = `
ğŸ“Š æ¨èé˜…è¯»é¡ºåº

Phase 11 æºç é˜…è¯»è·¯å¾„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸€é˜¶æ®µï¼šç†è§£æœåŠ¡ç«¯æ¸²æŸ“å…¥å£                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚                                                                             â”‚
â”‚   1. packages/react-dom/src/server/ReactDOMFizzServerNode.js                â”‚
â”‚      â””â”€â”€ renderToPipeableStream å…¥å£                                        â”‚
â”‚      â””â”€â”€ äº†è§£ options: onShellReady, onAllReady ç­‰                          â”‚
â”‚                                                                             â”‚
â”‚   2. packages/react-dom/src/server/ReactPartialRenderer.js                  â”‚
â”‚      â””â”€â”€ æ—§ç‰ˆ renderToString å®ç°                                           â”‚
â”‚      â””â”€â”€ ReactDOMServerRenderer ç±»                                          â”‚
â”‚      â””â”€â”€ read(), render() æ–¹æ³•                                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬äºŒé˜¶æ®µï¼šç†è§£ Fizz æµå¼æ¸²æŸ“                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                             â”‚
â”‚   3. packages/react-server/src/ReactFizzServer.js                           â”‚
â”‚      â””â”€â”€ Request, Task, Segment æ•°æ®ç»“æ„                                    â”‚
â”‚      â””â”€â”€ performWork ä¸»å¾ªç¯                                                 â”‚
â”‚      â””â”€â”€ retryTask å¤„ç†æŒ‚èµ·å’Œé‡è¯•                                           â”‚
â”‚      â””â”€â”€ renderNode åˆ†å‘ä¸åŒç±»å‹èŠ‚ç‚¹                                        â”‚
â”‚                                                                             â”‚
â”‚   4. packages/react-dom/src/server/ReactDOMServerFormatConfig.js            â”‚
â”‚      â””â”€â”€ HTML æ ‡ç­¾ç”Ÿæˆ                                                      â”‚
â”‚      â””â”€â”€ å±æ€§è¾“å‡ºæ ¼å¼                                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸‰é˜¶æ®µï¼šç†è§£å®¢æˆ·ç«¯ Hydration å…¥å£                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                             â”‚
â”‚   5. packages/react-dom/src/client/ReactDOMRoot.js                          â”‚
â”‚      â””â”€â”€ hydrateRoot å‡½æ•°                                                   â”‚
â”‚      â””â”€â”€ createHydrationContainer è°ƒç”¨                                      â”‚
â”‚      â””â”€â”€ listenToAllSupportedEvents                                         â”‚
â”‚                                                                             â”‚
â”‚   6. packages/react-reconciler/src/ReactFiberReconciler.js                  â”‚
â”‚      â””â”€â”€ createHydrationContainer vs createContainer                        â”‚
â”‚      â””â”€â”€ ç†è§£ hydrate æ ‡å¿—                                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬å››é˜¶æ®µï¼šç†è§£ Hydration çŠ¶æ€ç®¡ç†                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                             â”‚
â”‚   7. packages/react-reconciler/src/ReactFiberHydrationContext.new.js        â”‚
â”‚      â””â”€â”€ â­ æ ¸å¿ƒæ–‡ä»¶                                                        â”‚
â”‚      â””â”€â”€ enterHydrationState                                                â”‚
â”‚      â””â”€â”€ tryToClaimNextHydratableInstance                                   â”‚
â”‚      â””â”€â”€ prepareToHydrateHostInstance                                       â”‚
â”‚      â””â”€â”€ popHydrationState                                                  â”‚
â”‚                                                                             â”‚
â”‚   8. packages/react-dom/src/client/ReactDOMHostConfig.js                    â”‚
â”‚      â””â”€â”€ canHydrateInstance                                                 â”‚
â”‚      â””â”€â”€ hydrateInstance                                                    â”‚
â”‚      â””â”€â”€ diffHydratedProperties                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬äº”é˜¶æ®µï¼šç†è§£ Selective Hydration                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                             â”‚
â”‚   9. packages/react-dom/src/events/ReactDOMEventReplaying.js                â”‚
â”‚      â””â”€â”€ queueExplicitHydrationTarget                                       â”‚
â”‚      â””â”€â”€ äº¤äº’ä¼˜å…ˆ hydration é€»è¾‘                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 3: å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
// ============================================================

/**
 * ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
 */

const functionQuickRef = `
ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨

æœåŠ¡ç«¯æ¸²æŸ“
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ é˜¶æ®µ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ renderToPipeableStream               â”‚ React 18 æµå¼ SSR å…¥å£       â”‚ æœåŠ¡ç«¯ â”‚
â”‚ renderToString                       â”‚ åŒæ­¥ SSR å…¥å£                â”‚ æœåŠ¡ç«¯ â”‚
â”‚ performWork                          â”‚ Fizz ä¸»å¾ªç¯                  â”‚ æœåŠ¡ç«¯ â”‚
â”‚ retryTask                            â”‚ å¤„ç†ä»»åŠ¡ï¼ˆå¯èƒ½æŒ‚èµ·ï¼‰         â”‚ æœåŠ¡ç«¯ â”‚
â”‚ renderNode                           â”‚ æ¸²æŸ“å•ä¸ªèŠ‚ç‚¹                 â”‚ æœåŠ¡ç«¯ â”‚
â”‚ escapeTextForBrowser                 â”‚ æ–‡æœ¬è½¬ä¹‰                     â”‚ æœåŠ¡ç«¯ â”‚
â”‚ createMarkupForProperty              â”‚ å±æ€§ç”Ÿæˆ                     â”‚ æœåŠ¡ç«¯ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


å®¢æˆ·ç«¯ Hydration
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ é˜¶æ®µ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hydrateRoot                          â”‚ Hydration å…¥å£               â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ createHydrationContainer             â”‚ åˆ›å»º hydration FiberRoot     â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ enterHydrationState                  â”‚ è¿›å…¥ hydration çŠ¶æ€          â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ tryToClaimNextHydratableInstance     â”‚ å°è¯•åŒ¹é… DOM èŠ‚ç‚¹            â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ canHydrateInstance                   â”‚ åˆ¤æ–­èƒ½å¦å¤ç”¨ DOM             â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ hydrateInstance                      â”‚ æ‰§è¡Œ hydrationï¼Œå¯¹æ¯”å±æ€§     â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ popHydrationState                    â”‚ å®Œæˆå½“å‰èŠ‚ç‚¹ï¼Œç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª   â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ listenToAllSupportedEvents           â”‚ ç»‘å®šäº‹ä»¶ç›‘å¬                 â”‚ å®¢æˆ·ç«¯ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Selective Hydration
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ é˜¶æ®µ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ queueExplicitHydrationTarget         â”‚ è®°å½•éœ€è¦ä¼˜å…ˆ hydrate çš„ç›®æ ‡  â”‚ å®¢æˆ·ç«¯ â”‚
â”‚ scheduleExplicitHydrationTarget      â”‚ è§¦å‘ä¼˜å…ˆ hydration           â”‚ å®¢æˆ·ç«¯ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 4: ä¸å…¶ä»– Phase çš„å…³è”
// ============================================================

/**
 * ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”
 */

const phaseConnections = `
ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”

Phase 3: æ¸²æŸ“æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æœåŠ¡ç«¯æ¸²æŸ“ä¸å®¢æˆ·ç«¯æ¸²æŸ“åœ¨ Fiber å±‚é¢çš„å¯¹æ¯”ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   å®¢æˆ·ç«¯æ¸²æŸ“:                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚   â€¢ å®Œæ•´çš„ Fiber æ ‘æ„å»º                                                     â”‚
â”‚   â€¢ beginWork â†’ completeWork â†’ commit                                       â”‚
â”‚   â€¢ åˆ›å»º DOM èŠ‚ç‚¹ï¼Œç»‘å®šäº‹ä»¶                                                 â”‚
â”‚   â€¢ æœ‰ Scheduler å‚ä¸                                                       â”‚
â”‚                                                                             â”‚
â”‚   æœåŠ¡ç«¯æ¸²æŸ“:                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚   â€¢ ä¸åˆ›å»ºå®Œæ•´ Fiber æ ‘ï¼ˆè½»é‡çº§éå†ï¼‰                                       â”‚
â”‚   â€¢ åªæœ‰ render é˜¶æ®µï¼Œæ²¡æœ‰ commit                                           â”‚
â”‚   â€¢ ä¸åˆ›å»º DOMï¼Œç”Ÿæˆ HTML å­—ç¬¦ä¸²                                            â”‚
â”‚   â€¢ ä¸ç»‘å®šäº‹ä»¶                                                              â”‚
â”‚                                                                             â”‚
â”‚   Hydration:                                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚   â€¢ å®Œæ•´çš„ Fiber æ ‘æ„å»º                                                     â”‚
â”‚   â€¢ beginWork æ—¶å°è¯•å¤ç”¨å·²æœ‰ DOM                                            â”‚
â”‚   â€¢ æœ‰ commit é˜¶æ®µï¼ˆä½† DOM æ“ä½œè¾ƒå°‘ï¼‰                                       â”‚
â”‚   â€¢ ç»‘å®šäº‹ä»¶                                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 8: äº‹ä»¶ç³»ç»Ÿ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Hydration ä¸äº‹ä»¶ç³»ç»Ÿçš„åä½œï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   SSR è¾“å‡ºçš„ HTML æ²¡æœ‰äº‹ä»¶ï¼                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚   onClickã€onChange ç­‰ä¸ä¼šè¾“å‡ºåˆ° HTML                                       â”‚
â”‚                                                                             â”‚
â”‚   hydrateRoot æ—¶:                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚   1. listenToAllSupportedEvents(container)                                  â”‚
â”‚      â€¢ åœ¨æ ¹å®¹å™¨ä¸Šç»‘å®šæ‰€æœ‰æ”¯æŒçš„äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰                             â”‚
â”‚                                                                             â”‚
â”‚   2. Hydration è¿‡ç¨‹ä¸­:                                                      â”‚
â”‚      â€¢ Fiber ä¸Šçš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸ DOM èŠ‚ç‚¹å…³è”                                â”‚
â”‚      â€¢ é€šè¿‡ precacheFiberNode å»ºç«‹ DOM â†’ Fiber æ˜ å°„                        â”‚
â”‚                                                                             â”‚
â”‚   3. äº‹ä»¶è§¦å‘æ—¶:                                                            â”‚
â”‚      â€¢ åŸç”Ÿäº‹ä»¶å†’æ³¡åˆ° root                                                  â”‚
â”‚      â€¢ React é€šè¿‡ DOM â†’ Fiber æ‰¾åˆ°å¤„ç†å‡½æ•°                                 â”‚
â”‚      â€¢ æ‰§è¡Œå¤„ç†å‡½æ•°                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 10: Suspense
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Suspense åœ¨ SSR/Streaming ä¸­çš„ç‰¹æ®Šä½œç”¨ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   æœåŠ¡ç«¯:                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚   â€¢ Suspense å†…å®¹ throw Promise æ—¶ä¸ä¼šé˜»å¡                                  â”‚
â”‚   â€¢ å…ˆè¾“å‡º fallbackï¼Œæ ‡è®°è¾¹ç•Œï¼ˆ<!--$?-->ï¼‰                                  â”‚
â”‚   â€¢ Promise resolve åå‘é€çœŸå®å†…å®¹ä½œä¸ºå¢é‡                                  â”‚
â”‚                                                                             â”‚
â”‚   å®¢æˆ·ç«¯:                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚   â€¢ Suspense è¾¹ç•Œå¯ä»¥ç‹¬ç«‹ hydrate                                           â”‚
â”‚   â€¢ Selective Hydration æ”¯æŒä¼˜å…ˆçº§                                          â”‚
â”‚   â€¢ ç”¨æˆ·äº¤äº’å¯ä»¥è§¦å‘ä¼˜å…ˆ hydration                                          â”‚
â”‚                                                                             â”‚
â”‚   SuspenseState.dehydrated:                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚   â€¢ è¡¨ç¤ºè¿™æ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ã€å°šæœª hydrate çš„è¾¹ç•Œ                               â”‚
â”‚   â€¢ Hydration æ—¶ä¼šç‰¹æ®Šå¤„ç†                                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 5: å­¦ä¹ æ£€æŸ¥æ¸…å•
// ============================================================

const learningChecklist = `
ğŸ“‹ Phase 11 å­¦ä¹ æ£€æŸ¥æ¸…å•

SSR åŸºç¡€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ SSR çš„æ¦‚å¿µå’Œä¼˜åŠ¿ï¼ˆFCPã€SEOï¼‰
â–¡ äº†è§£ CSR vs SSR çš„åŒºåˆ«
â–¡ çŸ¥é“åŒæ„/Universal åº”ç”¨çš„æ¦‚å¿µ


ReactDOMServer API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ äº†è§£ renderToStringã€renderToStaticMarkup
â–¡ ç†è§£ React 18 çš„ renderToPipeableStream
â–¡ çŸ¥é“ onShellReadyã€onAllReady ç­‰å›è°ƒçš„ä½œç”¨


æœåŠ¡ç«¯æ¸²æŸ“å†…éƒ¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ ReactPartialRendererï¼ˆæ—§ç‰ˆï¼‰çš„åŸºæœ¬åŸç†
â–¡ ç†è§£ Fizzï¼ˆæ–°ç‰ˆï¼‰çš„ Taskã€Requestã€Segment æ¦‚å¿µ
â–¡ çŸ¥é“ HTML å±æ€§æ˜¯å¦‚ä½•ç”Ÿæˆçš„


Hydration æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ hydrateRoot å’Œ createRoot çš„åŒºåˆ«
â–¡ ç†è§£ HydrationContext çš„çŠ¶æ€ç®¡ç†
â–¡ ç†è§£ DOM åŒ¹é…é€»è¾‘ï¼ˆcanHydrateInstanceï¼‰
â–¡ çŸ¥é“ Hydration Mismatch çš„åŸå› å’Œå¤„ç†


Streaming SSR + Suspense
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ Streaming SSR çš„ä¼˜åŠ¿
â–¡ ç†è§£ Shell vs Content çš„æ¦‚å¿µ
â–¡ çŸ¥é“ Suspense åœ¨ SSR ä¸­çš„è¡Œä¸º
â–¡ ç†è§£ Selective Hydration çš„æ¦‚å¿µ


ä¸å…¶ä»– Phase çš„å…³è”
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£æœåŠ¡ç«¯æ¸²æŸ“ä¸å®¢æˆ·ç«¯æ¸²æŸ“çš„ Fiber å±‚é¢å·®å¼‚
â–¡ ç†è§£ Hydration æ—¶äº‹ä»¶æ˜¯å¦‚ä½•ç»‘å®šçš„
â–¡ ç†è§£ Suspense åœ¨ SSR ä¸­çš„ç‰¹æ®Šä½œç”¨


é¢è¯•é«˜é¢‘é¢˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ SSR çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
â–¡ hydrateRoot å’Œ createRoot çš„åŒºåˆ«ï¼Ÿ
â–¡ Hydration æ˜¯å¦‚ä½•åŒ¹é… DOM çš„ï¼Ÿ
â–¡ ä»€ä¹ˆæ˜¯ Streaming SSRï¼Ÿ
â–¡ ä»€ä¹ˆæ˜¯ Selective Hydrationï¼Ÿ
`;

export {
  coreFiles,
  readingOrder,
  functionQuickRef,
  phaseConnections,
  learningChecklist,
};

