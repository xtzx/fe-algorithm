/**
 * ============================================================
 * ğŸ“š Phase 10: Suspense & å¼‚æ­¥æ¸²æŸ“ & é”™è¯¯è¾¹ç•Œ - Part 1: Suspense æ¦‚è§ˆ
 * ============================================================
 *
 * ğŸ“ æ ¸å¿ƒæºç ä½ç½®:
 * - packages/react-reconciler/src/ReactFiberSuspenseComponent.new.js
 * - packages/react-reconciler/src/ReactFiberThrow.new.js
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š1-2 å°æ—¶
 * ğŸ¯ é¢è¯•æƒé‡ï¼šâ­â­â­â­â­
 */

// ============================================================
// Part 1: Suspense çš„æ ¸å¿ƒæ¦‚å¿µ
// ============================================================

/**
 * ğŸ“Š ä»€ä¹ˆæ˜¯ Suspense
 */

const whatIsSuspense = `
ğŸ“Š ä»€ä¹ˆæ˜¯ Suspense

Suspense çš„å®šä¹‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Suspense æ˜¯ React å¤„ç†"å¼‚æ­¥æ“ä½œæœªå°±ç»ª"æ—¶çš„ UI çŠ¶æ€åˆ‡æ¢æœºåˆ¶ã€‚

æ ¸å¿ƒæ€æƒ³ï¼š
â€¢ ç»„ä»¶å¯ä»¥"æš‚åœ"æ¸²æŸ“ï¼Œç­‰å¾…æŸäº›æ•°æ®/èµ„æºå°±ç»ª
â€¢ åœ¨ç­‰å¾…æœŸé—´ï¼Œæ˜¾ç¤º fallback UIï¼ˆå¦‚ Loading æŒ‡ç¤ºå™¨ï¼‰
â€¢ èµ„æºå°±ç»ªåï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°çœŸå®å†…å®¹


Suspense è§£å†³çš„é—®é¢˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨ç®¡ç† Loading çŠ¶æ€                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚                                                                             â”‚
â”‚   function MyComponent() {                                                  â”‚
â”‚     const [data, setData] = useState(null);                                 â”‚
â”‚     const [loading, setLoading] = useState(true);                           â”‚
â”‚     const [error, setError] = useState(null);                               â”‚
â”‚                                                                             â”‚
â”‚     useEffect(() => {                                                       â”‚
â”‚       fetchData()                                                           â”‚
â”‚         .then(d => { setData(d); setLoading(false); })                     â”‚
â”‚         .catch(e => { setError(e); setLoading(false); });                  â”‚
â”‚     }, []);                                                                 â”‚
â”‚                                                                             â”‚
â”‚     if (loading) return <Spinner />;                                        â”‚
â”‚     if (error) return <ErrorUI />;                                          â”‚
â”‚     return <DataView data={data} />;                                        â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   é—®é¢˜ï¼š                                                                    â”‚
â”‚   1. æ¯ä¸ªç»„ä»¶éƒ½è¦ç®¡ç† loading/error çŠ¶æ€                                    â”‚
â”‚   2. ä»£ç è‡ƒè‚¿ï¼Œé€»è¾‘åˆ†æ•£                                                     â”‚
â”‚   3. éš¾ä»¥åè°ƒå¤šä¸ªå¼‚æ­¥æ“ä½œ                                                   â”‚
â”‚   4. ç€‘å¸ƒæµé—®é¢˜ï¼ˆè¯·æ±‚ä¸²è¡Œï¼‰                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   Suspense æ–¹å¼ï¼šå£°æ˜å¼å¤„ç†å¼‚æ­¥                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                             â”‚
â”‚   function MyComponent() {                                                  â”‚
â”‚     const data = use(fetchData());  // ç›´æ¥"ä½¿ç”¨"æ•°æ®ï¼Œæœªå°±ç»ªæ—¶ä¼šæš‚åœ      â”‚
â”‚     return <DataView data={data} />;                                        â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   // åœ¨çˆ¶ç»„ä»¶/ç¥–å…ˆç»„ä»¶ä¸­                                                    â”‚
â”‚   <Suspense fallback={<Spinner />}>                                         â”‚
â”‚     <MyComponent />                                                         â”‚
â”‚   </Suspense>                                                               â”‚
â”‚                                                                             â”‚
â”‚   ä¼˜åŠ¿ï¼š                                                                    â”‚
â”‚   1. ç»„ä»¶ä»£ç æ›´ç®€æ´ï¼Œåªå…³æ³¨"æœ‰æ•°æ®æ—¶"çš„æ¸²æŸ“                                 â”‚
â”‚   2. Loading çŠ¶æ€åœ¨è¾¹ç•Œç»Ÿä¸€å¤„ç†                                             â”‚
â”‚   3. å¤šä¸ªå¼‚æ­¥æ“ä½œè‡ªåŠ¨å¹¶è¡Œ                                                   â”‚
â”‚   4. ä¸å¹¶å‘æ¸²æŸ“ç»“åˆï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 2: Suspense çš„å…¸å‹ç”¨æ³•
// ============================================================

/**
 * ğŸ“Š Suspense å…¸å‹ç”¨æ³•
 */

const suspenseUseCases = `
ğŸ“Š Suspense çš„å…¸å‹ç”¨æ³•

ç”¨æ³• 1: React.lazy + Suspenseï¼ˆä»£ç åˆ†å‰²ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// æ‡’åŠ è½½ç»„ä»¶
const LazyComponent = React.lazy(() => import('./HeavyComponent'));

function App() {
  return (
    <Suspense fallback={<div>Loading component...</div>}>
      <LazyComponent />
    </Suspense>
  );
}

å·¥ä½œåŸç†ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. React.lazy è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„"æ‡’åŠ è½½ç»„ä»¶"
2. é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œç»„ä»¶ä»£ç è¿˜æ²¡åŠ è½½ï¼ŒReact.lazy ä¼š throw Promise
3. Suspense æ•è·è¿™ä¸ª Promiseï¼Œæ¸²æŸ“ fallback
4. Promise resolve åï¼ˆä»£ç åŠ è½½å®Œæˆï¼‰ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“
5. æ˜¾ç¤ºçœŸæ­£çš„ç»„ä»¶


ç”¨æ³• 2: æ•°æ®è·å– + Suspense
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ä½¿ç”¨æ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ Relayã€SWR with suspenseï¼‰
// æˆ–ä½¿ç”¨ React 18 çš„ use() API

function UserProfile({ userId }) {
  // å‡è®¾ fetchUser è¿”å›ä¸€ä¸ª "suspense-enabled" çš„èµ„æº
  const user = fetchUser(userId);  // æœªå°±ç»ªæ—¶ä¼š throw Promise
  return <div>{user.name}</div>;
}

function App() {
  return (
    <Suspense fallback={<ProfileSkeleton />}>
      <UserProfile userId={123} />
    </Suspense>
  );
}


ç”¨æ³• 3: åµŒå¥— Suspenseï¼ˆç»†ç²’åº¦æ§åˆ¶ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function App() {
  return (
    <Suspense fallback={<PageSkeleton />}>
      <Header />
      <Suspense fallback={<SidebarSkeleton />}>
        <Sidebar />
      </Suspense>
      <Suspense fallback={<ContentSkeleton />}>
        <Content />
      </Suspense>
    </Suspense>
  );
}

â€¢ å¤–å±‚ Suspenseï¼šæ•´ä¸ªé¡µé¢çš„ fallback
â€¢ å†…å±‚ Suspenseï¼šå±€éƒ¨ç»„ä»¶çš„ fallback
â€¢ å¯ä»¥å®ç°æ¸è¿›å¼åŠ è½½ä½“éªŒ


ç”¨æ³• 4: ä¸ startTransition ç»“åˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function SearchResults({ query }) {
  const results = fetchSearchResults(query);
  return <ResultList results={results} />;
}

function App() {
  const [query, setQuery] = useState('');

  const handleChange = (e) => {
    // ä½¿ç”¨ transition è®©æœç´¢ä¸é˜»å¡è¾“å…¥
    startTransition(() => {
      setQuery(e.target.value);
    });
  };

  return (
    <div>
      <input onChange={handleChange} />
      <Suspense fallback={<Searching />}>
        <SearchResults query={query} />
      </Suspense>
    </div>
  );
}

â€¢ è¾“å…¥æ¡†ä¿æŒå“åº”ï¼ˆé«˜ä¼˜å…ˆçº§æ›´æ–°ï¼‰
â€¢ æœç´¢ç»“æœå¼‚æ­¥åŠ è½½ï¼ˆä½ä¼˜å…ˆçº§ï¼Œå¯è¢«æ‰“æ–­ï¼‰
â€¢ å¦‚æœç»“æœå¾ˆå¿«è¿”å›ï¼Œç”šè‡³ä¸æ˜¾ç¤º Loading
`;

// ============================================================
// Part 3: Suspense çš„æ ¸å¿ƒæœºåˆ¶æ¦‚è¿°
// ============================================================

/**
 * ğŸ“Š Suspense æ ¸å¿ƒæœºåˆ¶
 */

const suspenseMechanismOverview = `
ğŸ“Š Suspense çš„æ ¸å¿ƒæœºåˆ¶æ¦‚è¿°

æœºåˆ¶ 1: "throw Promise" åè®®
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç»„ä»¶å¯ä»¥ throw ä¸€ä¸ª Promise æ¥è¡¨ç¤º"æˆ‘è¿˜æ²¡å‡†å¤‡å¥½"                          â”‚
â”‚                                                                             â”‚
â”‚   function MyComponent() {                                                  â”‚
â”‚     if (!dataLoaded) {                                                      â”‚
â”‚       throw fetchDataPromise;  // â­ æŠ›å‡º Promiseï¼Œä¸æ˜¯ Errorï¼             â”‚
â”‚     }                                                                       â”‚
â”‚     return <DataView data={data} />;                                        â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   React è¯†åˆ« thrown çš„å€¼ï¼š                                                  â”‚
â”‚   â€¢ å¦‚æœæ˜¯ Promise (æœ‰ .then æ–¹æ³•) â†’ Suspense å¤„ç†                         â”‚
â”‚   â€¢ å¦‚æœæ˜¯ Error â†’ ErrorBoundary å¤„ç†                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


æœºåˆ¶ 2: Suspense è¾¹ç•Œæ•è·
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   <Suspense>   â† è¾¹ç•Œ                                                       â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   <Parent>                                                                  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   <Child>                                                                   â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   throw Promise!  â† ç»„ä»¶æŠ›å‡º Promise                                        â”‚
â”‚                                                                             â”‚
â”‚   React çš„å¤„ç†ï¼š                                                            â”‚
â”‚   1. æ•è· thrown Promise                                                    â”‚
â”‚   2. æ²¿ Fiber æ ‘å‘ä¸Šæ‰¾æœ€è¿‘çš„ Suspense è¾¹ç•Œ                                  â”‚
â”‚   3. æ ‡è®°è¾¹ç•Œéœ€è¦æ˜¾ç¤º fallback                                              â”‚
â”‚   4. åœ¨ Promise ä¸Šæ³¨å†Œå›è°ƒï¼ˆ.thenï¼‰                                         â”‚
â”‚   5. Promise resolve æ—¶ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


æœºåˆ¶ 3: çŠ¶æ€åˆ‡æ¢ï¼ˆfallback â†” contentï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   Suspense è¾¹ç•Œæœ‰ä¸¤ç§"æ¸²æŸ“æ¨¡å¼"ï¼š                                           â”‚
â”‚                                                                             â”‚
â”‚   Primaryï¼ˆä¸»å†…å®¹ï¼‰:                                                        â”‚
â”‚   â€¢ Suspense çš„ children æ­£å¸¸æ¸²æŸ“                                           â”‚
â”‚   â€¢ æ²¡æœ‰æŒ‚èµ·æˆ–æŒ‚èµ·å·²è§£å†³                                                    â”‚
â”‚                                                                             â”‚
â”‚   Fallbackï¼ˆé™çº§å†…å®¹ï¼‰:                                                     â”‚
â”‚   â€¢ Suspense çš„ fallback prop è¢«æ¸²æŸ“                                        â”‚
â”‚   â€¢ å­æ ‘ä¸­æœ‰ç»„ä»¶æŒ‚èµ·ï¼ˆthrow Promiseï¼‰                                       â”‚
â”‚                                                                             â”‚
â”‚   åˆ‡æ¢æ—¶æœº:                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚   Primary â†’ Fallback: å­ç»„ä»¶ throw Promise                                  â”‚
â”‚   Fallback â†’ Primary: Promise resolve + é‡æ–°æ¸²æŸ“æˆåŠŸ                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 4: Suspense ä¸å¹¶å‘æ¸²æŸ“
// ============================================================

/**
 * ğŸ“Š Suspense ä¸å¹¶å‘æ¸²æŸ“çš„ç»“åˆ
 */

const suspenseAndConcurrent = `
ğŸ“Š Suspense ä¸å¹¶å‘æ¸²æŸ“çš„ç»“åˆ

ä¸ºä»€ä¹ˆ Suspense åœ¨å¹¶å‘æ¨¡å¼ä¸‹æ›´å¼ºå¤§ï¼Ÿ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

åŒæ­¥æ¨¡å¼ï¼ˆLegacy Modeï¼‰:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ throw Promise æ—¶ï¼Œç«‹å³æ˜¾ç¤º fallback
â€¢ æ— æ³•"ç­‰å¾…"ï¼Œç”¨æˆ·æ€»æ˜¯çœ‹åˆ° Loading é—ªçƒ

å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ å¯ä»¥åœ¨å†…å­˜ä¸­å…ˆå°è¯•æ¸²æŸ“
â€¢ å¦‚æœå¾ˆå¿« resolveï¼Œå¯èƒ½å®Œå…¨è·³è¿‡ fallback
â€¢ æ”¯æŒ startTransitionï¼Œé¿å…ä¸å¿…è¦çš„ Loading çŠ¶æ€
â€¢ æ¸è¿›å¼æ˜¾ç¤º UI


ç¤ºä¾‹ï¼šé¿å… Loading é—ªçƒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   åŒæ­¥æ¨¡å¼è¡Œä¸º:                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                             â”‚
â”‚   æ—¶é—´ â†’                                                                    â”‚
â”‚   0ms     50ms     100ms                                                    â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                      â”‚
â”‚   â”‚ Loadingâ”‚  Data   â”‚                                                      â”‚
â”‚                                                                             â”‚
â”‚   ç”¨æˆ·çœ‹åˆ°: Loading â†’ Dataï¼ˆå³ä½¿åªç­‰äº† 50msï¼Œä¹Ÿä¼šé—ªçƒï¼‰                     â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚   å¹¶å‘æ¨¡å¼ + Transition:                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                             â”‚
â”‚   æ—¶é—´ â†’                                                                    â”‚
â”‚   0ms     50ms     100ms                                                    â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                      â”‚
â”‚   â”‚ (ç­‰å¾…) â”‚  Data   â”‚                                                      â”‚
â”‚                                                                             â”‚
â”‚   ç”¨æˆ·çœ‹åˆ°: æ—§å†…å®¹ â†’ Dataï¼ˆå¦‚æœæ•°æ®åœ¨ ~200ms å†…è¿”å›ï¼Œè·³è¿‡ Loadingï¼‰         â”‚
â”‚                                                                             â”‚
â”‚   ä»£ç :                                                                     â”‚
â”‚   startTransition(() => {                                                   â”‚
â”‚     setPage(nextPage);  // è¿™ä¸ªæ›´æ–°å¯ä»¥"ç­‰å¾…"                               â”‚
â”‚   });                                                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SuspenseListï¼ˆåè°ƒå¤šä¸ª Suspenseï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

<SuspenseList revealOrder="forwards">
  <Suspense fallback={<Skeleton />}>
    <Item1 />
  </Suspense>
  <Suspense fallback={<Skeleton />}>
    <Item2 />
  </Suspense>
  <Suspense fallback={<Skeleton />}>
    <Item3 />
  </Suspense>
</SuspenseList>

revealOrder é€‰é¡¹:
â€¢ "forwards": æŒ‰é¡ºåºæ˜¾ç¤ºï¼ˆå³ä½¿åé¢çš„å…ˆåŠ è½½å®Œï¼‰
â€¢ "backwards": ä»åå¾€å‰æ˜¾ç¤º
â€¢ "together": å…¨éƒ¨åŠ è½½å®Œæ‰ä¸€èµ·æ˜¾ç¤º

ä½œç”¨: é¿å… UI "è·³åŠ¨"ï¼Œæä¾›ä¸€è‡´çš„åŠ è½½ä½“éªŒ
`;

// ============================================================
// Part 5: é¢è¯•è¦ç‚¹
// ============================================================

const interviewPoints = `
ğŸ’¡ Part 1 é¢è¯•è¦ç‚¹

Q1: Suspense æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
A: Suspense æ˜¯ React å¤„ç†"å¼‚æ­¥æ“ä½œæœªå°±ç»ª"çš„å£°æ˜å¼æœºåˆ¶ã€‚
   è§£å†³çš„é—®é¢˜ï¼š
   - ç»Ÿä¸€ç®¡ç† Loading çŠ¶æ€ï¼Œä¸ç”¨æ¯ä¸ªç»„ä»¶è‡ªå·±å¤„ç†
   - ä»£ç æ›´ç®€æ´ï¼Œç»„ä»¶åªå…³æ³¨"æœ‰æ•°æ®æ—¶"çš„æ¸²æŸ“
   - é¿å… Loading çŠ¶æ€åˆ†æ•£åœ¨å„å¤„

Q2: Suspense çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
A: 1. ç»„ä»¶ throw Promise è¡¨ç¤º"æ•°æ®æœªå°±ç»ª"
   2. React æ•è·è¿™ä¸ª Promiseï¼Œæ‰¾åˆ°æœ€è¿‘çš„ Suspense è¾¹ç•Œ
   3. æ¸²æŸ“ fallback å†…å®¹
   4. åœ¨ Promise ä¸Šæ³¨å†Œ .then å›è°ƒ
   5. Promise resolve åï¼Œè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºçœŸå®å†…å®¹

Q3: React.lazy æ˜¯å¦‚ä½•åˆ©ç”¨ Suspense çš„ï¼Ÿ
A: React.lazy è¿”å›ä¸€ä¸ªç‰¹æ®Šç»„ä»¶ï¼š
   - é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œthrow ä¸€ä¸ªä»£è¡¨"åŠ è½½æ¨¡å—"çš„ Promise
   - Suspense æ•è·å¹¶æ˜¾ç¤º fallback
   - æ¨¡å—åŠ è½½å®Œæˆåï¼ŒPromise resolve
   - é‡æ–°æ¸²æŸ“æ—¶å¯ä»¥æ­£å¸¸æ¸²æŸ“ç»„ä»¶

Q4: ä¸ºä»€ä¹ˆ Suspense åœ¨å¹¶å‘æ¨¡å¼ä¸‹è¡¨ç°æ›´å¥½ï¼Ÿ
A: å¹¶å‘æ¨¡å¼å…è®¸ï¼š
   - åœ¨å†…å­˜ä¸­"å°è¯•"æ¸²æŸ“ï¼Œä¸ç«‹å³æäº¤
   - å¦‚æœ Promise å¾ˆå¿« resolveï¼Œå¯ä»¥è·³è¿‡ fallback
   - é…åˆ startTransitionï¼Œå®ç°æ›´å¹³æ»‘çš„ UI è¿‡æ¸¡
   - é¿å…ä¸å¿…è¦çš„ Loading é—ªçƒ

Q5: Suspense å’Œ ErrorBoundary çš„åŒºåˆ«ï¼Ÿ
A: - Suspense: å¤„ç† thrown Promiseï¼ˆå¼‚æ­¥/æš‚åœï¼‰
   - ErrorBoundary: å¤„ç† thrown Errorï¼ˆé”™è¯¯ï¼‰
   ä¸¤è€…å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œåˆ†åˆ«å¤„ç†ä¸åŒç±»å‹çš„"å¼‚å¸¸"æƒ…å†µ
`;

export {
  whatIsSuspense,
  suspenseUseCases,
  suspenseMechanismOverview,
  suspenseAndConcurrent,
  interviewPoints,
};

