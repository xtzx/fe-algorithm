/**
 * ============================================================
 * ğŸ“š Phase 10: Suspense & å¼‚æ­¥æ¸²æŸ“ & é”™è¯¯è¾¹ç•Œ - Part 5: æºç å¯¼èˆªä¸é˜…è¯»æŒ‡å—
 * ============================================================
 *
 * ğŸ“ æ ¸å¿ƒæºç ç›®å½•:
 * - packages/react-reconciler/src/ReactFiberSuspenseComponent.new.js
 * - packages/react-reconciler/src/ReactFiberThrow.new.js
 * - packages/react-reconciler/src/ReactFiberUnwindWork.new.js
 * - packages/react-reconciler/src/ReactFiberWorkLoop.new.js
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š1-2 å°æ—¶
 * ğŸ¯ é¢è¯•æƒé‡ï¼šâ­â­â­â­
 */

// ============================================================
// Part 1: æ ¸å¿ƒæ–‡ä»¶æ¦‚è§ˆ
// ============================================================

/**
 * ğŸ“Š Suspense & é”™è¯¯è¾¹ç•Œç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶
 */

const coreFiles = `
ğŸ“Š Suspense & é”™è¯¯è¾¹ç•Œç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶

packages/react-reconciler/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                              â”‚ èŒè´£                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberSuspenseComponent.new.jsâ”‚ â­ Suspense ç»„ä»¶ç›¸å…³                    â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ æ•°æ®ç»“æ„:                               â”‚
â”‚                                   â”‚ â€¢ SuspenseProps ç±»å‹                    â”‚
â”‚                                   â”‚ â€¢ SuspenseState ç±»å‹                    â”‚
â”‚                                   â”‚ â€¢ SuspenseListRenderState ç±»å‹          â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ æ ¸å¿ƒå‡½æ•°:                               â”‚
â”‚                                   â”‚ â€¢ shouldCaptureSuspense (Line 70)       â”‚
â”‚                                   â”‚ â€¢ findFirstSuspended (Line 101)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberThrow.new.js            â”‚ â­â­â­ å¼‚å¸¸å¤„ç†æ ¸å¿ƒ                      â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ æ ¸å¿ƒå‡½æ•°:                               â”‚
â”‚                                   â”‚ â€¢ throwException (Line 405)             â”‚
â”‚                                   â”‚   - åŒºåˆ† Promise vs Error               â”‚
â”‚                                   â”‚   - æ‰¾åˆ°æ•è·è¾¹ç•Œ                        â”‚
â”‚                                   â”‚   - è®¾ç½® ShouldCapture                  â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ createClassErrorUpdate (Line 106)     â”‚
â”‚                                   â”‚ â€¢ createRootErrorUpdate (Line 87)       â”‚
â”‚                                   â”‚ â€¢ attachPingListener (Line 166)         â”‚
â”‚                                   â”‚ â€¢ attachRetryListener (Line 206)        â”‚
â”‚                                   â”‚ â€¢ getNearestSuspenseBoundaryToCapture   â”‚
â”‚                                   â”‚   (Line 272)                            â”‚
â”‚                                   â”‚ â€¢ markSuspenseBoundaryShouldCapture     â”‚
â”‚                                   â”‚   (Line 292)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberUnwindWork.new.js       â”‚ â­â­ Unwind é˜¶æ®µå¤„ç†                     â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ æ ¸å¿ƒå‡½æ•°:                               â”‚
â”‚                                   â”‚ â€¢ unwindWork                            â”‚
â”‚                                   â”‚   - å¤„ç† ShouldCapture â†’ DidCapture     â”‚
â”‚                                   â”‚   - è¿”å›éœ€è¦é‡æ–°æ¸²æŸ“çš„è¾¹ç•Œ              â”‚
â”‚                                   â”‚ â€¢ unwindInterruptedWork                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberWorkLoop.new.js         â”‚ ä¸»å¾ªç¯ä¸­çš„é”™è¯¯å¤„ç†                      â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ ç›¸å…³å‡½æ•°:                               â”‚
â”‚                                   â”‚ â€¢ handleError (catch åè°ƒç”¨)            â”‚
â”‚                                   â”‚ â€¢ pingSuspendedRoot (Promise resolve)   â”‚
â”‚                                   â”‚ â€¢ renderRootSync / renderRootConcurrent â”‚
â”‚                                   â”‚ â€¢ completeUnitOfWork (unwind å…¥å£)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberBeginWork.new.js        â”‚ Suspense çš„æ¸²æŸ“é€»è¾‘                     â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ updateSuspenseComponent               â”‚
â”‚                                   â”‚   - æ ¹æ® DidCapture å†³å®šæ¸²æŸ“ä»€ä¹ˆ        â”‚
â”‚                                   â”‚   - mountSuspensePrimaryChildren        â”‚
â”‚                                   â”‚   - mountSuspenseFallbackChildren       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberCommitWork.new.js       â”‚ Commit é˜¶æ®µçš„é”™è¯¯å¤„ç†                   â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ captureCommitPhaseError               â”‚
â”‚                                   â”‚ â€¢ è°ƒç”¨ componentDidCatch                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactWorkTags.js                  â”‚ Fiber tag å®šä¹‰                          â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ SuspenseComponent = 13                â”‚
â”‚                                   â”‚ â€¢ SuspenseListComponent = 19            â”‚
â”‚                                   â”‚ â€¢ OffscreenComponent = 22               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberFlags.js                â”‚ Flag å®šä¹‰                               â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ ShouldCapture                         â”‚
â”‚                                   â”‚ â€¢ DidCapture                            â”‚
â”‚                                   â”‚ â€¢ Incomplete                            â”‚
â”‚                                   â”‚ â€¢ ForceClientRender                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


packages/react/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                              â”‚ èŒè´£                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactLazy.js                      â”‚ React.lazy å®ç°                         â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ lazy(ctor) å‡½æ•°                       â”‚
â”‚                                   â”‚ â€¢ lazyInitializer                       â”‚
â”‚                                   â”‚   - Pending æ—¶ throw Promise            â”‚
â”‚                                   â”‚   - Resolved æ—¶è¿”å›ç»„ä»¶                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 2: æ¨èé˜…è¯»é¡ºåº
// ============================================================

/**
 * ğŸ“Š æ¨èé˜…è¯»é¡ºåº
 */

const readingOrder = `
ğŸ“Š æ¨èé˜…è¯»é¡ºåº

Phase 10 æºç é˜…è¯»è·¯å¾„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸€é˜¶æ®µï¼šç†è§£ Suspense çš„æ•°æ®ç»“æ„                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                             â”‚
â”‚   1. ReactFiberSuspenseComponent.new.js                                     â”‚
â”‚      â””â”€â”€ SuspenseState ç±»å‹å®šä¹‰                                             â”‚
â”‚      â””â”€â”€ shouldCaptureSuspense å‡½æ•°                                         â”‚
â”‚                                                                             â”‚
â”‚   2. ReactWorkTags.js                                                       â”‚
â”‚      â””â”€â”€ SuspenseComponent = 13                                             â”‚
â”‚                                                                             â”‚
â”‚   3. ReactFiberFlags.js                                                     â”‚
â”‚      â””â”€â”€ ShouldCapture, DidCapture, Incomplete                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬äºŒé˜¶æ®µï¼šç†è§£å¼‚å¸¸å¤„ç†æµç¨‹                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                             â”‚
â”‚   4. ReactFiberThrow.new.js - throwException (Line 405)                     â”‚
â”‚      â””â”€â”€ ç†è§£ Promise vs Error çš„åˆ¤æ–­                                       â”‚
â”‚      â””â”€â”€ getNearestSuspenseBoundaryToCapture                                â”‚
â”‚      â””â”€â”€ markSuspenseBoundaryShouldCapture                                  â”‚
â”‚      â””â”€â”€ attachPingListener / attachRetryListener                           â”‚
â”‚                                                                             â”‚
â”‚   5. ReactFiberWorkLoop.new.js                                              â”‚
â”‚      â””â”€â”€ handleError å‡½æ•°                                                   â”‚
â”‚      â””â”€â”€ renderRootSync/Concurrent ä¸­çš„ try-catch                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸‰é˜¶æ®µï¼šç†è§£ Unwind å’Œé‡æ–°æ¸²æŸ“                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚                                                                             â”‚
â”‚   6. ReactFiberUnwindWork.new.js - unwindWork                               â”‚
â”‚      â””â”€â”€ ShouldCapture â†’ DidCapture çš„è½¬æ¢                                  â”‚
â”‚      â””â”€â”€ è¿”å›éœ€è¦é‡æ–°æ¸²æŸ“çš„è¾¹ç•Œ                                             â”‚
â”‚                                                                             â”‚
â”‚   7. ReactFiberWorkLoop.new.js - completeUnitOfWork                         â”‚
â”‚      â””â”€â”€ Incomplete æ ‡è®°çš„å¤„ç†                                              â”‚
â”‚      â””â”€â”€ è°ƒç”¨ unwindWork                                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬å››é˜¶æ®µï¼šç†è§£ Suspense çš„æ¸²æŸ“é€»è¾‘                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                             â”‚
â”‚   8. ReactFiberBeginWork.new.js - updateSuspenseComponent                   â”‚
â”‚      â””â”€â”€ æ ¹æ® DidCapture å†³å®šæ¸²æŸ“ primary è¿˜æ˜¯ fallback                     â”‚
â”‚      â””â”€â”€ mountSuspensePrimaryChildren                                       â”‚
â”‚      â””â”€â”€ mountSuspenseFallbackChildren                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬äº”é˜¶æ®µï¼šç†è§£é”™è¯¯è¾¹ç•Œ                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                             â”‚
â”‚   9. ReactFiberThrow.new.js                                                 â”‚
â”‚      â””â”€â”€ é”™è¯¯è¾¹ç•Œçš„è¯†åˆ«é€»è¾‘                                                 â”‚
â”‚      â””â”€â”€ createClassErrorUpdate                                             â”‚
â”‚                                                                             â”‚
â”‚   10. ReactFiberCommitWork.new.js                                           â”‚
â”‚       â””â”€â”€ captureCommitPhaseError                                           â”‚
â”‚       â””â”€â”€ componentDidCatch çš„è°ƒç”¨æ—¶æœº                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬å…­é˜¶æ®µï¼šç†è§£ React.lazy                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                             â”‚
â”‚   11. packages/react/src/ReactLazy.js                                       â”‚
â”‚       â””â”€â”€ lazy å‡½æ•°çš„å®ç°                                                   â”‚
â”‚       â””â”€â”€ lazyInitializer çš„çŠ¶æ€æœº                                          â”‚
â”‚       â””â”€â”€ throw Promise çš„è§¦å‘ç‚¹                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 3: å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
// ============================================================

/**
 * ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
 */

const functionQuickRef = `
ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨

Suspense ç›¸å…³
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ æ–‡ä»¶   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ shouldCaptureSuspense                â”‚ åˆ¤æ–­è¾¹ç•Œæ˜¯å¦åº”è¯¥æ•è·æŒ‚èµ·     â”‚ Suspenseâ”‚
â”‚ findFirstSuspended                   â”‚ åœ¨å­æ ‘ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·çš„èŠ‚ç‚¹ â”‚ Suspenseâ”‚
â”‚ getNearestSuspenseBoundaryToCapture  â”‚ å‘ä¸Šæ‰¾æœ€è¿‘çš„ Suspense è¾¹ç•Œ   â”‚ Throw  â”‚
â”‚ markSuspenseBoundaryShouldCapture    â”‚ æ ‡è®°è¾¹ç•Œéœ€è¦æ•è·             â”‚ Throw  â”‚
â”‚ updateSuspenseComponent              â”‚ Suspense çš„ beginWork é€»è¾‘   â”‚ Begin  â”‚
â”‚ mountSuspensePrimaryChildren         â”‚ æ¸²æŸ“ä¸»å†…å®¹                   â”‚ Begin  â”‚
â”‚ mountSuspenseFallbackChildren        â”‚ æ¸²æŸ“ fallback                â”‚ Begin  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


å¼‚å¸¸å¤„ç†ç›¸å…³
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ æ–‡ä»¶   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ throwException                       â”‚ å¤„ç† thrown å€¼ï¼ˆå…¥å£ï¼‰       â”‚ Throw  â”‚
â”‚ handleError                          â”‚ WorkLoop catch åçš„å¤„ç†      â”‚ WorkLoopâ”‚
â”‚ unwindWork                           â”‚ Unwind é˜¶æ®µå¤„ç†å„ç±»å‹ Fiber  â”‚ Unwind â”‚
â”‚ completeUnitOfWork                   â”‚ æ£€æµ‹ Incompleteï¼Œè°ƒç”¨ unwind â”‚ WorkLoopâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Promise é‡è¯•ç›¸å…³
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ æ–‡ä»¶   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ attachPingListener                   â”‚ æ³¨å†Œ Promise.then å›è°ƒ       â”‚ Throw  â”‚
â”‚ attachRetryListener                  â”‚ å­˜å‚¨ wakeable åˆ° updateQueue â”‚ Throw  â”‚
â”‚ pingSuspendedRoot                    â”‚ Promise resolve æ—¶è§¦å‘é‡æ¸²æŸ“ â”‚ WorkLoopâ”‚
â”‚ retryTimedOutBoundary                â”‚ é‡è¯•è¶…æ—¶çš„è¾¹ç•Œ               â”‚ WorkLoopâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


é”™è¯¯è¾¹ç•Œç›¸å…³
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                 â”‚ èŒè´£                         â”‚ æ–‡ä»¶   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ createClassErrorUpdate               â”‚ åˆ›å»ºé”™è¯¯è¾¹ç•Œçš„ CaptureUpdate â”‚ Throw  â”‚
â”‚ createRootErrorUpdate                â”‚ åˆ›å»ºæ ¹èŠ‚ç‚¹çš„é”™è¯¯æ›´æ–°         â”‚ Throw  â”‚
â”‚ captureCommitPhaseError              â”‚ Commit é˜¶æ®µçš„é”™è¯¯æ•è·        â”‚ Commit â”‚
â”‚ logCapturedError                     â”‚ è®°å½•æ•è·çš„é”™è¯¯               â”‚ Logger â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 4: ä¸å…¶ä»– Phase çš„å…³è”
// ============================================================

/**
 * ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”
 */

const phaseConnections = `
ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”

Phase 3: æ¸²æŸ“æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æŒ‚èµ·/é”™è¯¯æ˜¯åœ¨ render é˜¶æ®µè¢«å‘ç°çš„:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   Render é˜¶æ®µ:                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚   1. beginWork æ‰§è¡Œç»„ä»¶                                                     â”‚
â”‚   2. ç»„ä»¶å¯èƒ½ throw Promise (æŒ‚èµ·) æˆ– throw Error (é”™è¯¯)                   â”‚
â”‚   3. throwException å¤„ç†ï¼š                                                  â”‚
â”‚      - æ‰¾åˆ°æ•è·è¾¹ç•Œ                                                         â”‚
â”‚      - è®¾ç½® ShouldCapture                                                   â”‚
â”‚   4. Unwind é˜¶æ®µï¼šShouldCapture â†’ DidCapture                               â”‚
â”‚   5. é‡æ–° beginWork è¾¹ç•Œç»„ä»¶ï¼šæ¸²æŸ“ fallback / errorUI                       â”‚
â”‚                                                                             â”‚
â”‚   Commit é˜¶æ®µ:                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚   1. ä¸»å†…å®¹ DOM è¢«éšè—/ç§»é™¤                                                 â”‚
â”‚   2. fallback/errorUI DOM è¢«æ˜¾ç¤º                                            â”‚
â”‚   3. å¯¹äºé”™è¯¯è¾¹ç•Œï¼šè°ƒç”¨ componentDidCatch                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 6: è°ƒåº¦æœºåˆ¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æŒ‚èµ·ä»»åŠ¡ä¸è°ƒåº¦çš„å…³ç³»:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   1. æŒ‚èµ·æ—¶:                                                                â”‚
â”‚      â€¢ å½“å‰æ¸²æŸ“ä»»åŠ¡å¯èƒ½è¢«"æš‚åœ"                                             â”‚
â”‚      â€¢ æ˜¾ç¤º fallback åï¼Œå¯ä»¥è®©å‡ºä¸»çº¿ç¨‹                                     â”‚
â”‚                                                                             â”‚
â”‚   2. Promise resolve æ—¶:                                                    â”‚
â”‚      â€¢ pingSuspendedRoot è§¦å‘                                               â”‚
â”‚      â€¢ ensureRootIsScheduled è°ƒåº¦æ–°ä»»åŠ¡                                     â”‚
â”‚      â€¢ æ ¹æ®ä¼˜å…ˆçº§å†³å®šä½•æ—¶æ‰§è¡Œé‡è¯•æ¸²æŸ“                                       â”‚
â”‚                                                                             â”‚
â”‚   3. å¹¶å‘æ¨¡å¼ä¸‹:                                                            â”‚
â”‚      â€¢ æŒ‚èµ·çš„æ¸²æŸ“å¯ä»¥è¢«æ‰“æ–­                                                 â”‚
â”‚      â€¢ é«˜ä¼˜å…ˆçº§æ›´æ–°å¯ä»¥æ’é˜Ÿ                                                 â”‚
â”‚      â€¢ å¯èƒ½åœ¨å†…å­˜ä¸­"å°è¯•"æ¸²æŸ“è€Œä¸ç«‹å³æ˜¾ç¤º fallback                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 7: å¹¶å‘ç‰¹æ€§
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Suspense åœ¨å¹¶å‘æ¨¡å¼ä¸‹çš„å¢å¼ºè¡¨ç°:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   1. é¿å… Loading é—ªçƒ:                                                     â”‚
â”‚      â€¢ å¹¶å‘æ¨¡å¼ä¸‹ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­å…ˆå°è¯•æ¸²æŸ“                                   â”‚
â”‚      â€¢ å¦‚æœ Promise å¾ˆå¿« resolveï¼Œå¯èƒ½å®Œå…¨è·³è¿‡ fallback                     â”‚
â”‚                                                                             â”‚
â”‚   2. startTransition + Suspense:                                            â”‚
â”‚      â€¢ Transition æ›´æ–°ä¸ä¼šç«‹å³æ˜¾ç¤º fallback                                 â”‚
â”‚      â€¢ å¯ä»¥ä¿æŒæ—§å†…å®¹ç›´åˆ°æ–°å†…å®¹å°±ç»ª                                         â”‚
â”‚      â€¢ ç”¨æˆ·ä½“éªŒæ›´å¹³æ»‘                                                       â”‚
â”‚                                                                             â”‚
â”‚   3. æ¸è¿›å¼ UI æ˜¾ç¤º:                                                        â”‚
â”‚      â€¢ åµŒå¥— Suspense å¯ä»¥å®ç°åˆ†å±‚åŠ è½½                                       â”‚
â”‚      â€¢ å…ˆæ˜¾ç¤ºå¤–å±‚å†…å®¹ï¼Œå†é€æ­¥æ˜¾ç¤ºå†…å±‚                                       â”‚
â”‚      â€¢ SuspenseList å¯ä»¥æ§åˆ¶æ˜¾ç¤ºé¡ºåº                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 11: SSR & Hydration é¢„è§ˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Suspense ä¸ Streaming SSR:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   React 18 çš„ Streaming SSR:                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                             â”‚
â”‚   1. æœåŠ¡ç«¯é‡åˆ° Suspense:                                                   â”‚
â”‚      â€¢ å…ˆå‘é€ fallback çš„ HTML                                              â”‚
â”‚      â€¢ ç»§ç»­æ¸²æŸ“å…¶ä»–éƒ¨åˆ†                                                     â”‚
â”‚      â€¢ æ•°æ®å°±ç»ªåï¼Œ"æµå¼"å‘é€çœŸå®å†…å®¹çš„ HTML                                â”‚
â”‚                                                                             â”‚
â”‚   2. Selective Hydration:                                                   â”‚
â”‚      â€¢ å®¢æˆ·ç«¯å¯ä»¥å…ˆ hydrate å·²å°±ç»ªçš„éƒ¨åˆ†                                    â”‚
â”‚      â€¢ Suspense è¾¹ç•Œå†…çš„éƒ¨åˆ†å¯ä»¥ç¨å hydrate                                â”‚
â”‚      â€¢ ç”¨æˆ·äº¤äº’å¯ä»¥ä¼˜å…ˆ hydrate è¯¥åŒºåŸŸ                                      â”‚
â”‚                                                                             â”‚
â”‚   3. SuspenseState.dehydrated:                                              â”‚
â”‚      â€¢ è¡¨ç¤ºè¿™æ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ã€å°šæœª hydrate çš„è¾¹ç•Œ                            â”‚
â”‚      â€¢ isSuspenseInstancePending / isSuspenseInstanceFallback               â”‚
â”‚                                                                             â”‚
â”‚   è¯¦è§ Phase 11 çš„æ·±å…¥è®²è§£ã€‚                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 5: å­¦ä¹ æ£€æŸ¥æ¸…å•
// ============================================================

const learningChecklist = `
ğŸ“‹ Phase 10 å­¦ä¹ æ£€æŸ¥æ¸…å•

Suspense åŸºç¡€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ Suspense çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯
â–¡ çŸ¥é“ SuspenseComponent çš„ Fiber tag (13)
â–¡ ç†è§£ SuspenseState çš„å«ä¹‰ï¼ˆnull vs é nullï¼‰
â–¡ ç†è§£ ShouldCapture å’Œ DidCapture æ ‡è®°çš„åŒºåˆ«


throw Promise æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ React å¦‚ä½•åˆ¤æ–­ throw çš„æ˜¯ Promise è¿˜æ˜¯ Error
â–¡ ç†è§£ throwException çš„å¤„ç†æµç¨‹
â–¡ ç†è§£ getNearestSuspenseBoundaryToCapture çš„æŸ¥æ‰¾é€»è¾‘
â–¡ ç†è§£ attachPingListener æ³¨å†Œé‡è¯•å›è°ƒçš„æœºåˆ¶


Unwind å’Œé‡æ–°æ¸²æŸ“
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ unwindWork çš„ä½œç”¨
â–¡ ç†è§£ ShouldCapture â†’ DidCapture çš„è½¬æ¢æ—¶æœº
â–¡ ç†è§£ updateSuspenseComponent æ ¹æ® DidCapture çš„æ¸²æŸ“é€»è¾‘


Promise Resolve å
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ pingSuspendedRoot è§¦å‘é‡æ–°æ¸²æŸ“çš„æœºåˆ¶
â–¡ ç†è§£ fallback â†’ primary çš„åˆ‡æ¢è¿‡ç¨‹


ErrorBoundary
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ çŸ¥é“ä»€ä¹ˆç»„ä»¶è¢«è§†ä¸ºé”™è¯¯è¾¹ç•Œ
â–¡ ç†è§£ getDerivedStateFromError å’Œ componentDidCatch çš„åŒºåˆ«
â–¡ ç†è§£é”™è¯¯å¦‚ä½•æ²¿ Fiber æ ‘å‘ä¸Šä¼ æ’­
â–¡ ç†è§£ CaptureUpdate çš„ä½œç”¨


å¯¹æ¯”ä¸ç»¼åˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ Suspense å’Œ ErrorBoundary çš„å¼‚åŒ
â–¡ ç†è§£ä¸æ¸²æŸ“æµç¨‹ã€è°ƒåº¦æœºåˆ¶ã€å¹¶å‘ç‰¹æ€§çš„å…³ç³»
â–¡ èƒ½å›ç­”ç›¸å…³é¢è¯•é—®é¢˜


é¢è¯•é«˜é¢‘é¢˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ throw Promise åçš„å®Œæ•´æµç¨‹
â–¡ Promise resolve åå¦‚ä½•é‡æ–°æ¸²æŸ“
â–¡ React.lazy çš„åŸç†
â–¡ é”™è¯¯è¾¹ç•Œçš„åˆ¤æ–­æ¡ä»¶å’Œå¤„ç†æµç¨‹
â–¡ Suspense vs ErrorBoundary çš„åŒºåˆ«
`;

export {
  coreFiles,
  readingOrder,
  functionQuickRef,
  phaseConnections,
  learningChecklist,
};

