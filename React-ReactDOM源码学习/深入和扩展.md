# React æºç å­¦ä¹  - æ·±å…¥ä¸æ‰©å±•

> åŸºäºå·²å®Œæˆçš„ Phase 1-11ï¼Œç»§ç»­æ·±å…¥å­¦ä¹  React æºç çš„è¿›é˜¶å†…å®¹

---

## ğŸ“Š å·²å®Œæˆçš„å­¦ä¹ é˜¶æ®µ

| Phase | ä¸»é¢˜ | çŠ¶æ€ |
|-------|------|------|
| Phase 1 | JSX ä¸ React å…ƒç´  | âœ… å·²å®Œæˆ |
| Phase 2 | Fiber æ¶æ„ | âœ… å·²å®Œæˆ |
| Phase 3 | æ¸²æŸ“æµç¨‹ | âœ… å·²å®Œæˆ |
| Phase 4 | Hooks åŸç† | âœ… å·²å®Œæˆ |
| Phase 5 | Diff ç®—æ³• | âœ… å·²å®Œæˆ |
| Phase 6 | è°ƒåº¦æœºåˆ¶ (Scheduler) | âœ… å·²å®Œæˆ |
| Phase 7 | å¹¶å‘ç‰¹æ€§ | âœ… å·²å®Œæˆ |
| Phase 8 | äº‹ä»¶ç³»ç»Ÿ | âœ… å·²å®Œæˆ |
| Phase 9 | Context ä¸è·¨ç»„ä»¶çŠ¶æ€ä¼ æ’­ | âœ… å·²å®Œæˆ |
| Phase 10 | Suspense & å¼‚æ­¥æ¸²æŸ“ & é”™è¯¯è¾¹ç•Œ | âœ… å·²å®Œæˆ |
| Phase 11 | SSR & Hydration | âœ… å·²å®Œæˆ |

---

## ğŸ”¬ ç¬¬ä¸€éƒ¨åˆ†ï¼šå·²å­¦é˜¶æ®µçš„æ·±å…¥æ–¹å‘

### æ·±å…¥ Aï¼šHooks æ·±å…¥ï¼ˆåŸºäº Phase 4ï¼‰

**å­¦ä¹ ç›®æ ‡ï¼š**
- useRef / useImperativeHandle çš„å®ç°ï¼ˆref è½¬å‘æœºåˆ¶ï¼‰
- useMemo / useCallback çš„ç¼“å­˜æœºåˆ¶ä¸å¤±æ•ˆåœºæ™¯
- useLayoutEffect vs useEffect çš„æ‰§è¡Œæ—¶æœºå·®å¼‚ï¼ˆåŒæ­¥ vs å¼‚æ­¥ï¼‰
- useSyncExternalStore - å¤–éƒ¨çŠ¶æ€åº“æ¥å…¥åŸç†ï¼ˆRedux/Zustand å¦‚ä½•ç”¨ï¼‰
- useId - æœåŠ¡ç«¯/å®¢æˆ·ç«¯ä¸€è‡´çš„ ID ç”Ÿæˆ
- useInsertionEffect - CSS-in-JS åº“ä¸“ç”¨ Hook

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-reconciler/src/ReactFiberHooks.new.js
packages/use-sync-external-store/src/
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `12-hooks-advanced/01-useRef-and-imperative-handle.ts`
- `12-hooks-advanced/02-useMemo-useCallback-internals.ts`
- `12-hooks-advanced/03-effect-timing-differences.ts`
- `12-hooks-advanced/04-useSyncExternalStore.ts`
- `12-hooks-advanced/05-useId-and-useInsertionEffect.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### æ·±å…¥ Bï¼šå¹¶å‘ç‰¹æ€§æ·±å…¥ï¼ˆåŸºäº Phase 7ï¼‰

**å­¦ä¹ ç›®æ ‡ï¼š**
- Lane æ¨¡å‹çš„å®Œæ•´ç»†èŠ‚ - 31 æ¡ Lane çš„ä¼˜å…ˆçº§åˆ’åˆ†
- Entanglementï¼ˆçº ç¼ ï¼‰- ä¸ºä»€ä¹ˆæŸäº› Lane å¿…é¡»ä¸€èµ·å¤„ç†
- Transition çš„å†…éƒ¨æ ‡è®° - `ReactCurrentBatchConfig.transition`
- useDeferredValue çš„"å»¶è¿Ÿ"æ˜¯å¦‚ä½•å®ç°çš„
- Offscreen API - é¢„æ¸²æŸ“å’Œä¿æŒçŠ¶æ€çš„æœºåˆ¶

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-reconciler/src/ReactFiberLane.new.js
packages/react-reconciler/src/ReactFiberWorkLoop.new.js
packages/react/src/ReactStartTransition.js
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `13-concurrent-deep-dive/01-lane-model-complete.ts`
- `13-concurrent-deep-dive/02-entanglement-mechanism.ts`
- `13-concurrent-deep-dive/03-transition-internals.ts`
- `13-concurrent-deep-dive/04-useDeferredValue-implementation.ts`
- `13-concurrent-deep-dive/05-offscreen-api.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### æ·±å…¥ Cï¼šæ¸²æŸ“ä¼˜åŒ–æ·±å…¥ï¼ˆåŸºäº Phase 3/5ï¼‰

**å­¦ä¹ ç›®æ ‡ï¼š**
- Bailout æœºåˆ¶ - ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥è·³è¿‡å­æ ‘æ¸²æŸ“
- memo / PureComponent çš„æµ…æ¯”è¾ƒå®ç°
- Context çš„æ€§èƒ½é™·é˜± - ä¸ºä»€ä¹ˆ Context å˜åŒ–ä¼šç©¿é€ memo
- Profiler API - æ€§èƒ½åˆ†æçš„å†…éƒ¨å®ç°
- React.Children å·¥å…·å‡½æ•°çš„å®ç°

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-reconciler/src/ReactFiberBeginWork.new.js (bailout)
packages/react/src/ReactMemo.js
packages/react/src/ReactChildren.js
packages/react-reconciler/src/ReactProfilerTimer.new.js
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `14-render-optimization/01-bailout-mechanism.ts`
- `14-render-optimization/02-memo-and-shallow-equal.ts`
- `14-render-optimization/03-context-performance-traps.ts`
- `14-render-optimization/04-profiler-api-internals.ts`
- `14-render-optimization/05-react-children-utilities.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

## ğŸ†• ç¬¬äºŒéƒ¨åˆ†ï¼šæ–°çš„å­¦ä¹ é˜¶æ®µ

### Phase 12ï¼šReact Server Components (RSC) â­â­â­â­â­

> é¢è¯•çƒ­ç‚¹ + æœªæ¥è¶‹åŠ¿

**å­¦ä¹ ç›®æ ‡ï¼š**
- ä»€ä¹ˆæ˜¯ Server Componentsï¼Ÿä¸ SSR çš„åŒºåˆ«
- "use client" / "use server" æŒ‡ä»¤çš„ä½œç”¨
- RSC çš„åºåˆ—åŒ–åè®® - å¦‚ä½•æŠŠç»„ä»¶æ ‘ä¼ è¾“åˆ°å®¢æˆ·ç«¯
- Server Actions - æœåŠ¡ç«¯å‡½æ•°è°ƒç”¨
- Next.js App Router å¦‚ä½•åˆ©ç”¨ RSC

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-server/
packages/react-server-dom-webpack/
packages/react-client/
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `15-server-components/01-rsc-overview-vs-ssr.ts`
- `15-server-components/02-use-client-use-server-directives.ts`
- `15-server-components/03-rsc-serialization-protocol.ts`
- `15-server-components/04-server-actions.ts`
- `15-server-components/05-nextjs-app-router-integration.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### Phase 13ï¼šè‡ªå®šä¹‰ Rendererï¼ˆHostConfig æ¥å£ï¼‰â­â­â­â­

> æ·±å…¥ç†è§£ React æ¶æ„

**å­¦ä¹ ç›®æ ‡ï¼š**
- react-reconciler çš„ HostConfig æ¥å£
- å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼ˆå¦‚æ¸²æŸ“åˆ° Canvas/Terminalï¼‰
- react-dom / react-native / react-three-fiber çš„å®ç°å¯¹æ¯”
- ç†è§£"React æ˜¯æ¸²æŸ“å™¨æ— å…³çš„"è¿™ä¸€è®¾è®¡

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-reconciler/src/ReactFiberHostConfig.js
packages/react-reconciler/src/forks/ReactFiberHostConfig.*.js
packages/react-dom/src/client/ReactDOMHostConfig.js
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `16-custom-renderer/01-hostconfig-interface.ts`
- `16-custom-renderer/02-building-simple-renderer.ts`
- `16-custom-renderer/03-react-dom-vs-react-native.ts`
- `16-custom-renderer/04-renderer-agnostic-design.ts`

**å®è·µé¡¹ç›®ï¼š**
- å°è¯•å®ç°ä¸€ä¸ªç®€å•çš„ Terminal Renderer

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### Phase 14ï¼šReact DevTools åŸç† â­â­â­

> è°ƒè¯•å¿…å¤‡

**å­¦ä¹ ç›®æ ‡ï¼š**
- DevTools å¦‚ä½•è·å– Fiber æ ‘ä¿¡æ¯
- `__REACT_DEVTOOLS_GLOBAL_HOOK__` æ³¨å…¥æœºåˆ¶
- Fiber æ ‘çš„åºåˆ—åŒ–ä¸ä¼ è¾“
- Component Profiler çš„æ•°æ®æ”¶é›†
- Highlight Updates çš„å®ç°

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/react-devtools-shared/
packages/react-devtools-core/
packages/react-reconciler/src/ReactFiberDevToolsHook.new.js
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `17-devtools/01-devtools-overview.ts`
- `17-devtools/02-global-hook-injection.ts`
- `17-devtools/03-fiber-tree-serialization.ts`
- `17-devtools/04-profiler-data-collection.ts`
- `17-devtools/05-highlight-updates.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### Phase 15ï¼šReact æ€§èƒ½ä¼˜åŒ–åŸç† â­â­â­â­â­

> å®æˆ˜å¿…å¤‡

**å­¦ä¹ ç›®æ ‡ï¼š**
- React.memo çš„å®ç°ï¼ˆshallowEqualï¼‰
- useMemo / useCallback çš„ç¼“å­˜å¤±æ•ˆåœºæ™¯
- ä¸ºä»€ä¹ˆ Context ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“
- Suspense å¦‚ä½•ä¼˜åŒ–ç€‘å¸ƒæµè¯·æ±‚
- Concurrent ç‰¹æ€§å¦‚ä½•æå‡æ„ŸçŸ¥æ€§èƒ½
- å¸¸è§æ€§èƒ½é—®é¢˜çš„æºç çº§è§£é‡Š

**å®è·µæ¡ˆä¾‹ï¼š**
- å¤§åˆ—è¡¨ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ + React åä½œï¼‰
- è¡¨å•æ€§èƒ½ä¼˜åŒ–ï¼ˆå—æ§ vs éå—æ§ï¼‰
- åŠ¨ç”»æ€§èƒ½ï¼ˆuseLayoutEffect + RAFï¼‰

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `18-performance/01-memo-shallow-equal.ts`
- `18-performance/02-cache-invalidation-scenarios.ts`
- `18-performance/03-context-rerender-problem.ts`
- `18-performance/04-suspense-waterfall-optimization.ts`
- `18-performance/05-concurrent-perceived-performance.ts`
- `18-performance/06-practical-optimization-cases.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### Phase 16ï¼šçŠ¶æ€ç®¡ç†åº“æ•´åˆåŸç† â­â­â­â­

> ç”Ÿæ€ç†è§£

**å­¦ä¹ ç›®æ ‡ï¼š**
- useSyncExternalStore çš„è®¾è®¡åŠ¨æœº
- Redux / Zustand / Jotai å¦‚ä½•ä¸ React æ•´åˆ
- "Tearing"é—®é¢˜ - å¹¶å‘æ¸²æŸ“ä¸‹çš„çŠ¶æ€ä¸€è‡´æ€§
- Proxy-based çŠ¶æ€ç®¡ç†ï¼ˆMobX/Valtioï¼‰çš„åŸç†
- Signals æ¨¡å¼ä¸ React çš„å¯¹æ¯”

**æ ¸å¿ƒæºç ä½ç½®ï¼š**
```
packages/use-sync-external-store/src/
packages/react-reconciler/src/ReactFiberHooks.new.js (useSyncExternalStore)
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `19-state-management/01-useSyncExternalStore-design.ts`
- `19-state-management/02-redux-zustand-integration.ts`
- `19-state-management/03-tearing-problem.ts`
- `19-state-management/04-proxy-based-state.ts`
- `19-state-management/05-signals-vs-react.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

### Phase 17ï¼šReact 19 æ–°ç‰¹æ€§é¢„è§ˆ â­â­â­â­

> ç´§è·Ÿå‰æ²¿

**å­¦ä¹ ç›®æ ‡ï¼š**
- React Compilerï¼ˆåŸ React Forgetï¼‰- è‡ªåŠ¨ memo
- Actions - è¡¨å•å¤„ç†æ–°èŒƒå¼
- useFormStatus / useFormState
- useOptimistic - ä¹è§‚æ›´æ–°
- use() Hook - Promise è§£åŒ…
- Document Metadata - å†…ç½® `<title>`/`<meta>` æ”¯æŒ

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `20-react19/01-react-compiler-auto-memo.ts`
- `20-react19/02-actions-form-handling.ts`
- `20-react19/03-useFormStatus-useFormState.ts`
- `20-react19/04-useOptimistic.ts`
- `20-react19/05-use-hook-promise.ts`
- `20-react19/06-document-metadata.ts`

**çŠ¶æ€ï¼š** â¬œ å¾…å­¦ä¹ 

---

## ğŸ“Š æ¨èå­¦ä¹ è·¯çº¿

### è·¯çº¿ Aï¼šé¢è¯•å‡†å¤‡ï¼ˆæ¨èï¼‰

```
Phase 15 æ€§èƒ½ä¼˜åŒ–åŸç†
    â†“
æ·±å…¥ A: Hooks æ·±å…¥
    â†“
Phase 12: React Server Components
    â†“
æ·±å…¥ C: æ¸²æŸ“ä¼˜åŒ–æ·±å…¥
```

### è·¯çº¿ Bï¼šæ·±å…¥ç†è§£æ¶æ„

```
Phase 13: è‡ªå®šä¹‰ Renderer
    â†“
æ·±å…¥ B: å¹¶å‘ç‰¹æ€§æ·±å…¥ï¼ˆLane æ¨¡å‹ï¼‰
    â†“
Phase 14: DevTools åŸç†
```

### è·¯çº¿ Cï¼šç´§è·Ÿå‰æ²¿

```
Phase 17: React 19 æ–°ç‰¹æ€§
    â†“
Phase 12: React Server Components
    â†“
Phase 16: çŠ¶æ€ç®¡ç†åº“æ•´åˆ
```

### è·¯çº¿ Dï¼šå®æˆ˜åº”ç”¨

```
Phase 15: æ€§èƒ½ä¼˜åŒ–åŸç†
    â†“
Phase 16: çŠ¶æ€ç®¡ç†åº“æ•´åˆ
    â†“
æ·±å…¥ A: Hooks æ·±å…¥
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ 

**å½“å‰æ¨èå¼€å§‹ï¼š** æ·±å…¥ A - Hooks æ·±å…¥

> é€‰æ‹©ç†ç”±ï¼šHooks æ˜¯æ—¥å¸¸å¼€å‘æœ€å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œæ·±å…¥ç†è§£å¯ä»¥å¸®åŠ©å†™å‡ºæ›´å¥½çš„ä»£ç ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é¢è¯•é«˜é¢‘è€ƒç‚¹ã€‚

---

## ğŸ“ å­¦ä¹ è¿›åº¦è¿½è¸ª

| é˜¶æ®µ | å¼€å§‹æ—¥æœŸ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|------|----------|----------|------|
| æ·±å…¥ A: Hooks æ·±å…¥ | - | - | - |
| æ·±å…¥ B: å¹¶å‘ç‰¹æ€§æ·±å…¥ | - | - | - |
| æ·±å…¥ C: æ¸²æŸ“ä¼˜åŒ–æ·±å…¥ | - | - | - |
| Phase 12: RSC | - | - | - |
| Phase 13: è‡ªå®šä¹‰ Renderer | - | - | - |
| Phase 14: DevTools | - | - | - |
| Phase 15: æ€§èƒ½ä¼˜åŒ– | - | - | - |
| Phase 16: çŠ¶æ€ç®¡ç† | - | - | - |
| Phase 17: React 19 | - | - | - |

