/**
 * ============================================================
 * ğŸ“š React æ¶æ„è®¾è®¡æ·±åº¦è§£æ
 * ============================================================
 *
 * ğŸ¯ å­¦ä¹ ç›®æ ‡ï¼š
 * 1. ç†è§£ React é¡¹ç›®çš„å·¥ç¨‹åŒ–æ¶æ„
 * 2. ç†è§£ Monorepo å¤šåŒ…è®¾è®¡ç†å¿µ
 * 3. æŒæ¡æ ¸å¿ƒåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»
 * 4. å­¦ä¹ é¡¶çº§å¼€æºé¡¹ç›®çš„è®¾è®¡æ€æƒ³
 *
 * ğŸ“ æ ¸å¿ƒç›®å½•ï¼š
 * - packages/       # æ‰€æœ‰åŒ…
 * - scripts/        # æ„å»ºå’Œå·¥å…·è„šæœ¬
 * - fixtures/       # æµ‹è¯•ç”¨ä¾‹å’Œç¤ºä¾‹
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š4-6 å°æ—¶
 */

// ============================================================
// Part 1: å·¥ç¨‹åŒ–æ¶æ„è®¾è®¡
// ============================================================

/**
 * =====================================================
 * 1.1 Monorepo æ¶æ„
 * =====================================================
 *
 * React é‡‡ç”¨ Monorepoï¼ˆå•ä»“å¤šåŒ…ï¼‰æ¶æ„
 *
 * ğŸ“Š ä¸ºä»€ä¹ˆé€‰æ‹© Monorepoï¼Ÿ
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                    Monorepo vs Multirepo                        â”‚
 * â”‚                                                                 â”‚
 * â”‚  Monorepo ä¼˜åŠ¿ï¼š                                                â”‚
 * â”‚  âœ… ä»£ç å…±äº«æ–¹ä¾¿ï¼ˆshared åŒ…ï¼‰                                    â”‚
 * â”‚  âœ… ç»Ÿä¸€çš„æ„å»ºæµç¨‹                                               â”‚
 * â”‚  âœ… åŸå­åŒ–çš„ä»£ç æäº¤ï¼ˆä¸€æ¬¡æäº¤å¯è·¨å¤šä¸ªåŒ…ï¼‰                         â”‚
 * â”‚  âœ… ä¾èµ–å…³ç³»æ¸…æ™°å¯è§                                             â”‚
 * â”‚  âœ… ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†                                               â”‚
 * â”‚                                                                 â”‚
 * â”‚  é€‚ç”¨åœºæ™¯ï¼š                                                      â”‚
 * â”‚  - åŒ…ä¹‹é—´æœ‰ç´§å¯†çš„ä¾èµ–å…³ç³»                                        â”‚
 * â”‚  - éœ€è¦é¢‘ç¹è·¨åŒ…ä¿®æ”¹                                              â”‚
 * â”‚  - ç»Ÿä¸€çš„å‘å¸ƒèŠ‚å¥                                                â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * ğŸ“Š React çš„ Monorepo ç»“æ„
 *
 * react/
 * â”œâ”€â”€ packages/          # 40+ ä¸ªåŒ…
 * â”‚   â”œâ”€â”€ react/         # æ ¸å¿ƒ API
 * â”‚   â”œâ”€â”€ react-dom/     # DOM æ¸²æŸ“å™¨
 * â”‚   â”œâ”€â”€ react-reconciler/  # åè°ƒå™¨ï¼ˆå¯å¤ç”¨ï¼‰
 * â”‚   â”œâ”€â”€ scheduler/     # è°ƒåº¦å™¨ï¼ˆç‹¬ç«‹åŒ…ï¼‰
 * â”‚   â””â”€â”€ shared/        # å…±äº«ä»£ç 
 * â”œâ”€â”€ scripts/           # æ„å»ºè„šæœ¬
 * â””â”€â”€ fixtures/          # æµ‹è¯•ç¤ºä¾‹
 */

/**
 * =====================================================
 * 1.2 æ„å»ºç³»ç»Ÿï¼ˆRollup + Babelï¼‰
 * =====================================================
 *
 * ğŸ“Š ä¸ºä»€ä¹ˆé€‰æ‹© Rollup è€Œä¸æ˜¯ Webpackï¼Ÿ
 *
 * | ç‰¹æ€§ | Rollup | Webpack |
 * |------|--------|---------|
 * | é€‚ç”¨åœºæ™¯ | åº“æ‰“åŒ… | åº”ç”¨æ‰“åŒ… |
 * | Tree-shaking | åŸç”Ÿæ”¯æŒ | éœ€é…ç½® |
 * | è¾“å‡ºæ ¼å¼ | å¤šç§ï¼ˆESM/CJS/UMDï¼‰ | ä¸»è¦ CJS |
 * | ä»£ç ä½“ç§¯ | æ›´å° | è¾ƒå¤§ |
 * | æ„å»ºé€Ÿåº¦ | å¿« | è¾ƒæ…¢ |
 *
 * ğŸ’¡ ç»“è®ºï¼šåº“æ‰“åŒ…é€‰ Rollupï¼Œåº”ç”¨æ‰“åŒ…é€‰ Webpack/Vite
 *
 * ğŸ“ æ„å»ºè„šæœ¬ä½ç½®ï¼šscripts/rollup/
 *
 * ```
 * scripts/rollup/
 * â”œâ”€â”€ build.js              # æ„å»ºå…¥å£
 * â”œâ”€â”€ bundles.js            # åŒ…é…ç½®ï¼ˆå®šä¹‰æ¯ä¸ªåŒ…çš„æ„å»ºé€‰é¡¹ï¼‰
 * â”œâ”€â”€ modules.js            # æ¨¡å—æ˜ å°„
 * â”œâ”€â”€ packaging.js          # æ‰“åŒ…é…ç½®
 * â”œâ”€â”€ plugins/              # Rollup æ’ä»¶
 * â”‚   â”œâ”€â”€ closure-plugin.js # Google Closure Compiler
 * â”‚   â”œâ”€â”€ sizes-plugin.js   # ä½“ç§¯ç»Ÿè®¡
 * â”‚   â””â”€â”€ ...
 * â””â”€â”€ shims/                # å«ç‰‡
 * ```
 */

// æ„å»ºé…ç½®ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰
const bundleConfig = {
  // åŒ…å
  bundleTypes: [
    'NODE',           // CommonJS for Node
    'NODE_DEV',       // Development build
    'NODE_PROD',      // Production build (minified)
    'FB_WWW_DEV',     // Facebook internal
    'FB_WWW_PROD',
    'RN_OSS_DEV',     // React Native
    'RN_OSS_PROD',
  ],

  // è¾“å‡ºæ ¼å¼
  moduleTypes: {
    'NODE': 'cjs',    // CommonJS
    'ESM': 'esm',     // ES Modules
    'UMD': 'umd',     // Universal Module Definition
  },
};

/**
 * =====================================================
 * 1.3 Babel é…ç½®ï¼ˆç¼–è¯‘ç­–ç•¥ï¼‰
 * =====================================================
 *
 * ğŸ“ ä½ç½®ï¼šbabel.config.js, scripts/babel/
 *
 * React çš„ Babel é…ç½®ç‰¹ç‚¹ï¼š
 *
 * 1. æŒ‰ç¯å¢ƒç¼–è¯‘
 *    - DEV: ä¿ç•™è°ƒè¯•ä¿¡æ¯ã€è­¦å‘Š
 *    - PROD: ç§»é™¤ DEV-only ä»£ç 
 *
 * 2. æ¡ä»¶ç¼–è¯‘ï¼ˆç±»ä¼¼ C çš„å®ï¼‰
 *    ```js
 *    if (__DEV__) {
 *      console.warn('This is development only');
 *    }
 *    ```
 *    ç”Ÿäº§æ„å»ºæ—¶ï¼Œ__DEV__ è¢«æ›¿æ¢ä¸º falseï¼Œ
 *    ç„¶åè¢« Dead Code Elimination ç§»é™¤
 *
 * 3. Flow ç±»å‹ç§»é™¤
 *    React ä½¿ç”¨ Flow åšç±»å‹æ£€æŸ¥
 *    æ„å»ºæ—¶ç§»é™¤ Flow ç±»å‹æ³¨è§£
 */

/**
 * =====================================================
 * 1.4 æœ¬åœ°å¼€å‘æµç¨‹
 * =====================================================
 *
 * ğŸ“Š å¼€å‘å‘½ä»¤
 *
 * ```bash
 * # å®‰è£…ä¾èµ–
 * yarn install
 *
 * # æ„å»ºæ‰€æœ‰åŒ…
 * yarn build
 *
 * # æ„å»ºç‰¹å®šåŒ…
 * yarn build react react-dom
 *
 * # å¼€å‘æ¨¡å¼ï¼ˆwatchï¼‰
 * yarn build react react-dom --type=NODE_DEV
 *
 * # è¿è¡Œæµ‹è¯•
 * yarn test
 *
 * # è¿è¡Œç‰¹å®šæµ‹è¯•
 * yarn test ReactHooks
 *
 * # ç±»å‹æ£€æŸ¥
 * yarn flow
 *
 * # Lint
 * yarn lint
 * ```
 *
 * ğŸ“Š æœ¬åœ°è°ƒè¯•ï¼ˆfixturesï¼‰
 *
 * fixtures/ ç›®å½•æä¾›äº†å„ç§æµ‹è¯•åœºæ™¯ï¼š
 * - fixtures/dom/         # DOM ç›¸å…³æµ‹è¯•
 * - fixtures/concurrent/  # å¹¶å‘æ¨¡å¼æµ‹è¯•
 * - fixtures/ssr/         # SSR æµ‹è¯•
 *
 * ```bash
 * cd fixtures/dom
 * yarn install
 * yarn start
 * ```
 */

/**
 * =====================================================
 * 1.5 æ„å»ºä¼˜åŒ–ç­–ç•¥
 * =====================================================
 *
 * ğŸ“Š ä½“ç§¯ä¼˜åŒ–
 *
 * 1. Google Closure Compiler
 *    - æ¯” Terser æ›´æ¿€è¿›çš„å‹ç¼©
 *    - å±æ€§åæ··æ·†
 *    - æ­»ä»£ç æ¶ˆé™¤
 *
 * 2. æ¡ä»¶ç¼–è¯‘
 *    ```js
 *    // å¼€å‘ç‰ˆæœ¬ä¿ç•™
 *    if (__DEV__) {
 *      validateProps(props);
 *    }
 *    // ç”Ÿäº§ç‰ˆæœ¬è¢«ç§»é™¤
 *    ```
 *
 * 3. é”™è¯¯ç æ˜ å°„
 *    ```js
 *    // å¼€å‘ç‰ˆæœ¬
 *    throw new Error('Invalid hook call');
 *
 *    // ç”Ÿäº§ç‰ˆæœ¬
 *    throw new Error(formatProdErrorMessage(321));
 *    // é”™è¯¯ç  321 å¯åœ¨å®˜ç½‘æŸ¥è¯¢è¯¦ç»†ä¿¡æ¯
 *    ```
 *    ğŸ“ ä½ç½®ï¼šscripts/error-codes/
 *
 * 4. Tree-shaking å‹å¥½
 *    - ä½¿ç”¨ ES Modules å¯¼å‡º
 *    - é¿å…å‰¯ä½œç”¨
 *
 * ğŸ“Š æ„å»ºäº§ç‰©åˆ†æ
 *
 * ```
 * react.development.js     # å¼€å‘ç‰ˆï¼ˆå¸¦è­¦å‘Šï¼‰
 * react.production.min.js  # ç”Ÿäº§ç‰ˆï¼ˆå‹ç¼©ï¼‰
 * react.profiling.min.js   # æ€§èƒ½åˆ†æç‰ˆ
 * ```
 */

/**
 * =====================================================
 * 1.6 æµ‹è¯•ä½“ç³»
 * =====================================================
 *
 * ğŸ“ æµ‹è¯•é…ç½®ï¼šscripts/jest/
 *
 * ğŸ“Š æµ‹è¯•ç±»å‹
 *
 * 1. å•å…ƒæµ‹è¯•
 *    - æ¯ä¸ªåŒ…çš„ __tests__/ ç›®å½•
 *    - Jest + React Testing Library
 *
 * 2. é›†æˆæµ‹è¯•
 *    - fixtures/ ç›®å½•
 *    - çœŸå® DOM ç¯å¢ƒ
 *
 * 3. æ¨¡ç³Šæµ‹è¯•ï¼ˆFuzz Testingï¼‰
 *    - éšæœºè¾“å…¥æµ‹è¯•
 *    - è¾¹ç•Œæƒ…å†µè¦†ç›–
 *
 * 4. æ€§èƒ½æµ‹è¯•
 *    - scripts/bench/
 *    - åŸºå‡†æµ‹è¯•å¯¹æ¯”
 */

/**
 * =====================================================
 * 1.7 CI/CD æµç¨‹
 * =====================================================
 *
 * ğŸ“ é…ç½®ï¼šscripts/circleci/
 *
 * ğŸ“Š æµæ°´çº¿
 *
 * ```
 * PR æäº¤
 *    â”‚
 *    â”œâ”€â”€ Lint Check
 *    â”œâ”€â”€ Flow Type Check
 *    â”œâ”€â”€ Unit Tests
 *    â”œâ”€â”€ Integration Tests
 *    â”œâ”€â”€ Build (å¤šç¯å¢ƒ)
 *    â””â”€â”€ Size Checkï¼ˆä½“ç§¯å¯¹æ¯”ï¼‰
 *    â”‚
 *    â–¼
 * åˆå¹¶åˆ° main
 *    â”‚
 *    â”œâ”€â”€ å‘å¸ƒåˆ° npmï¼ˆcanaryï¼‰
 *    â””â”€â”€ æ›´æ–°æ–‡æ¡£
 * ```
 */

// ============================================================
// Part 2: åŒ…è®¾è®¡ï¼ˆPackagesï¼‰
// ============================================================

/**
 * =====================================================
 * 2.1 åŒ…åˆ†ç±»æ¦‚è§ˆ
 * =====================================================
 *
 * ğŸ“Š æŒ‰åŠŸèƒ½åˆ†ç±»
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                     React åŒ…æ¶æ„                                â”‚
 * â”‚                                                                 â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚                    ç”¨æˆ· API å±‚                           â”‚   â”‚
 * â”‚  â”‚  react â”‚ react-dom â”‚ react-native-renderer              â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                           â”‚                                     â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚                    åè°ƒå™¨å±‚                              â”‚   â”‚
 * â”‚  â”‚              react-reconciler                            â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                           â”‚                                     â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚                    è°ƒåº¦å™¨å±‚                              â”‚   â”‚
 * â”‚  â”‚                  scheduler                               â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                                                                 â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚                    å·¥å…·/å…±äº«å±‚                           â”‚   â”‚
 * â”‚  â”‚  shared â”‚ react-is â”‚ use-sync-external-store            â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                                                                 â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

/**
 * =====================================================
 * 2.2 æ ¸å¿ƒåŒ…è¯¦è§£
 * =====================================================
 */

const corePackages = {
  // ========== æ ¸å¿ƒ API ==========
  'react': {
    description: 'React æ ¸å¿ƒ API',
    exports: [
      'createElement',
      'Component',
      'useState',
      'useEffect',
      'useContext',
      'useRef',
      'useMemo',
      'useCallback',
      'useReducer',
      'useTransition',
      'useDeferredValue',
      'Suspense',
      'lazy',
      'memo',
      'forwardRef',
      'createContext',
    ],
    dependencies: ['shared'],
    size: '~6KB (gzip)',
  },

  'react-dom': {
    description: 'DOM æ¸²æŸ“å™¨',
    exports: [
      'createRoot',
      'hydrateRoot',
      'render (legacy)',
      'hydrate (legacy)',
      'flushSync',
      'createPortal',
    ],
    subModules: {
      'react-dom/client': 'å®¢æˆ·ç«¯æ¸²æŸ“ API',
      'react-dom/server': 'æœåŠ¡ç«¯æ¸²æŸ“ API',
    },
    dependencies: ['react', 'react-reconciler', 'scheduler', 'shared'],
    size: '~40KB (gzip)',
  },

  'react-reconciler': {
    description: 'åè°ƒå™¨ï¼ˆFiber æ ¸å¿ƒï¼‰',
    purpose: [
      'å®ç° Fiber æ¶æ„',
      'å®ç° Diff ç®—æ³•',
      'å®ç° Hooks',
      'ç®¡ç†æ›´æ–°é˜Ÿåˆ—',
      'åè°ƒæ¸²æŸ“è¿‡ç¨‹',
    ],
    designPattern: 'å¹³å°æ— å…³çš„åè°ƒé€»è¾‘ï¼Œå¯è¢«ä¸åŒæ¸²æŸ“å™¨å¤ç”¨',
    dependencies: ['scheduler', 'shared'],
    note: 'è¿™æ˜¯ React æœ€æ ¸å¿ƒçš„åŒ…ï¼Œé˜…è¯»æºç é‡ç‚¹',
  },

  'scheduler': {
    description: 'è°ƒåº¦å™¨ï¼ˆç‹¬ç«‹åŒ…ï¼‰',
    purpose: [
      'ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†',
      'æ—¶é—´åˆ‡ç‰‡',
      'ä»»åŠ¡è°ƒåº¦',
    ],
    designPattern: 'ä¸ React è§£è€¦ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨',
    exports: [
      'unstable_scheduleCallback',
      'unstable_cancelCallback',
      'unstable_shouldYield',
      'unstable_now',
    ],
    note: 'å¯ä»¥åœ¨é React é¡¹ç›®ä¸­ä½¿ç”¨',
  },

  'shared': {
    description: 'å…±äº«å·¥å…·',
    contents: [
      'ReactSymbols.js - Symbol å®šä¹‰',
      'ReactTypes.js - ç±»å‹å®šä¹‰',
      'ReactFeatureFlags.js - ç‰¹æ€§å¼€å…³',
      'objectIs.js - Object.is polyfill',
      'shallowEqual.js - æµ…æ¯”è¾ƒ',
    ],
  },
};

/**
 * =====================================================
 * 2.3 æ¸²æŸ“å™¨åŒ…
 * =====================================================
 */

const rendererPackages = {
  'react-dom': 'Web DOM æ¸²æŸ“',
  'react-native-renderer': 'React Native æ¸²æŸ“',
  'react-art': 'Canvas/SVG æ¸²æŸ“',
  'react-test-renderer': 'æµ‹è¯•ç”¨æ¸²æŸ“å™¨ï¼ˆæ—  DOMï¼‰',
  'react-noop-renderer': 'ç©ºæ¸²æŸ“å™¨ï¼ˆæµ‹è¯•ç”¨ï¼‰',
};

/**
 * ğŸ“Š è‡ªå®šä¹‰æ¸²æŸ“å™¨
 *
 * React çš„æ¸²æŸ“å™¨æ˜¯å¯æ‰©å±•çš„ï¼
 *
 * react-reconciler æä¾›äº† HostConfig æ¥å£ï¼Œ
 * åªéœ€å®ç°è¿™äº›æ–¹æ³•ï¼Œå°±å¯ä»¥æ¸²æŸ“åˆ°ä»»ä½•å¹³å°ï¼š
 *
 * ```js
 * const hostConfig = {
 *   createInstance(type, props) { ... },
 *   appendChild(parent, child) { ... },
 *   removeChild(parent, child) { ... },
 *   commitUpdate(instance, updatePayload) { ... },
 *   // ... æ›´å¤šæ–¹æ³•
 * };
 *
 * const MyRenderer = ReactReconciler(hostConfig);
 * ```
 *
 * ç¤¾åŒºæ¡ˆä¾‹ï¼š
 * - react-three-fiber: æ¸²æŸ“åˆ° Three.js
 * - react-konva: æ¸²æŸ“åˆ° Canvas
 * - ink: æ¸²æŸ“åˆ°ç»ˆç«¯
 */

/**
 * =====================================================
 * 2.4 å¼€å‘å·¥å…·åŒ…
 * =====================================================
 */

const devtoolsPackages = {
  'react-devtools': 'DevTools ç‹¬ç«‹åº”ç”¨',
  'react-devtools-core': 'DevTools æ ¸å¿ƒ',
  'react-devtools-extensions': 'æµè§ˆå™¨æ‰©å±•',
  'react-devtools-inline': 'å†…è”ç‰ˆæœ¬',
  'react-devtools-shared': 'å…±äº«ç»„ä»¶',
  'react-devtools-timeline': 'æ—¶é—´çº¿åˆ†æ',
  'react-debug-tools': 'è°ƒè¯•å·¥å…·ï¼ˆHooks æ£€æŸ¥ï¼‰',
};

/**
 * =====================================================
 * 2.5 æœåŠ¡ç«¯æ¸²æŸ“åŒ…
 * =====================================================
 */

const ssrPackages = {
  'react-server': 'Server Components æ ¸å¿ƒ',
  'react-server-dom-webpack': 'Webpack é›†æˆ',
  'react-server-dom-relay': 'Relay é›†æˆ',
  'react-client': 'å®¢æˆ·ç«¯ RSC æ¶ˆè´¹',
};

/**
 * =====================================================
 * 2.6 å·¥å…·åŒ…
 * =====================================================
 */

const utilityPackages = {
  'react-is': {
    description: 'ç±»å‹åˆ¤æ–­å·¥å…·',
    exports: [
      'isElement',
      'isValidElementType',
      'isFragment',
      'isPortal',
      'isMemo',
      'isLazy',
    ],
    useCase: 'ç¬¬ä¸‰æ–¹åº“åˆ¤æ–­ React å…ƒç´ ç±»å‹',
  },

  'use-sync-external-store': {
    description: 'å¤–éƒ¨çŠ¶æ€åŒæ­¥ Hook',
    purpose: 'è§£å†³å¤–éƒ¨çŠ¶æ€ä¸ React å¹¶å‘æ¨¡å¼çš„å…¼å®¹é—®é¢˜',
    useCase: 'Reduxã€Zustand ç­‰çŠ¶æ€åº“ä½¿ç”¨',
  },

  'use-subscription': {
    description: 'è®¢é˜…ç®¡ç† Hook',
    purpose: 'å®‰å…¨åœ°è®¢é˜…å¤–éƒ¨æ•°æ®æº',
  },

  'eslint-plugin-react-hooks': {
    description: 'Hooks è§„åˆ™æ£€æŸ¥',
    rules: [
      'rules-of-hooks: Hooks è°ƒç”¨è§„åˆ™',
      'exhaustive-deps: ä¾èµ–æ•°ç»„æ£€æŸ¥',
    ],
  },

  'react-refresh': {
    description: 'å¿«é€Ÿåˆ·æ–°ï¼ˆHMRï¼‰',
    purpose: 'å¼€å‘æ—¶ç»„ä»¶çƒ­æ›´æ–°ï¼Œä¿ç•™çŠ¶æ€',
  },
};

// ============================================================
// Part 3: æ ¸å¿ƒåŒ…è®¾è®¡æ·±å…¥
// ============================================================

/**
 * =====================================================
 * 3.1 react åŒ…è®¾è®¡
 * =====================================================
 *
 * ğŸ“ packages/react/src/
 *
 * ```
 * react/src/
 * â”œâ”€â”€ React.js              # å…¥å£
 * â”œâ”€â”€ ReactElement.js       # createElement
 * â”œâ”€â”€ ReactHooks.js         # Hooks APIï¼ˆä»…å®šä¹‰ï¼Œå®ç°åœ¨ reconcilerï¼‰
 * â”œâ”€â”€ ReactContext.js       # Context API
 * â”œâ”€â”€ ReactLazy.js          # lazy()
 * â”œâ”€â”€ ReactMemo.js          # memo()
 * â”œâ”€â”€ ReactChildren.js      # Children å·¥å…·
 * â””â”€â”€ jsx/
 *     â””â”€â”€ ReactJSXElement.js # æ–° JSX è½¬æ¢
 * ```
 *
 * ğŸ“Š è®¾è®¡ç‰¹ç‚¹
 *
 * 1. API å®šä¹‰ä¸å®ç°åˆ†ç¦»
 *    ```js
 *    // react åŒ…åªå®šä¹‰ API
 *    export function useState(initialState) {
 *      const dispatcher = resolveDispatcher();
 *      return dispatcher.useState(initialState);
 *    }
 *
 *    // å®ç°åœ¨ react-reconciler
 *    ```
 *
 * 2. dispatcher æ¨¡å¼
 *    - å…è®¸ä¸åŒç¯å¢ƒæœ‰ä¸åŒå®ç°
 *    - æ”¯æŒ DEV/PROD ä¸åŒè¡Œä¸º
 */

/**
 * =====================================================
 * 3.2 react-reconciler åŒ…è®¾è®¡
 * =====================================================
 *
 * ğŸ“ packages/react-reconciler/src/
 *
 * ```
 * react-reconciler/src/
 * â”œâ”€â”€ ReactFiber.js              # Fiber èŠ‚ç‚¹
 * â”œâ”€â”€ ReactFiberWorkLoop.js      # å·¥ä½œå¾ªç¯ï¼ˆæ ¸å¿ƒï¼ï¼‰
 * â”œâ”€â”€ ReactFiberBeginWork.js     # beginWorkï¼ˆé€’ï¼‰
 * â”œâ”€â”€ ReactFiberCompleteWork.js  # completeWorkï¼ˆå½’ï¼‰
 * â”œâ”€â”€ ReactFiberCommitWork.js    # Commit é˜¶æ®µ
 * â”œâ”€â”€ ReactFiberHooks.js         # Hooks å®ç°ï¼ˆæ ¸å¿ƒï¼ï¼‰
 * â”œâ”€â”€ ReactChildFiber.js         # Diff ç®—æ³•
 * â”œâ”€â”€ ReactFiberLane.js          # Lane ä¼˜å…ˆçº§
 * â”œâ”€â”€ ReactFiberRoot.js          # FiberRoot
 * â”œâ”€â”€ ReactUpdateQueue.js        # æ›´æ–°é˜Ÿåˆ—
 * â””â”€â”€ ReactFiberReconciler.js    # åè°ƒå™¨å…¥å£
 * ```
 *
 * ğŸ“Š æ ¸å¿ƒæµç¨‹
 *
 * ```
 * æ›´æ–°è§¦å‘
 *    â”‚
 *    â–¼
 * scheduleUpdateOnFiber()
 *    â”‚
 *    â–¼
 * ensureRootIsScheduled()
 *    â”‚
 *    â–¼
 * performSyncWorkOnRoot() / performConcurrentWorkOnRoot()
 *    â”‚
 *    â”œâ”€â”€ renderRootSync() / renderRootConcurrent()
 *    â”‚       â”‚
 *    â”‚       â–¼
 *    â”‚   workLoopSync() / workLoopConcurrent()
 *    â”‚       â”‚
 *    â”‚       â”œâ”€â”€ beginWork()
 *    â”‚       â””â”€â”€ completeWork()
 *    â”‚
 *    â””â”€â”€ commitRoot()
 *            â”‚
 *            â”œâ”€â”€ commitBeforeMutationEffects()
 *            â”œâ”€â”€ commitMutationEffects()
 *            â””â”€â”€ commitLayoutEffects()
 * ```
 */

/**
 * =====================================================
 * 3.3 react-dom åŒ…è®¾è®¡
 * =====================================================
 *
 * ğŸ“ packages/react-dom/src/
 *
 * ```
 * react-dom/src/
 * â”œâ”€â”€ client/
 * â”‚   â”œâ”€â”€ ReactDOM.js            # å®¢æˆ·ç«¯å…¥å£
 * â”‚   â””â”€â”€ ReactDOMRoot.js        # createRoot
 * â”œâ”€â”€ server/
 * â”‚   â”œâ”€â”€ ReactDOMServer.js      # æœåŠ¡ç«¯å…¥å£
 * â”‚   â””â”€â”€ ReactDOMFizzServer.js  # æµå¼ SSR
 * â”œâ”€â”€ events/
 * â”‚   â”œâ”€â”€ DOMPluginEventSystem.js  # äº‹ä»¶ç³»ç»Ÿ
 * â”‚   â”œâ”€â”€ SyntheticEvent.js        # åˆæˆäº‹ä»¶
 * â”‚   â””â”€â”€ getEventPriority.js      # äº‹ä»¶ä¼˜å…ˆçº§
 * â””â”€â”€ shared/
 *     â”œâ”€â”€ DOMProperty.js         # DOM å±æ€§å¤„ç†
 *     â””â”€â”€ CSSProperty.js         # CSS å±æ€§å¤„ç†
 * ```
 *
 * ğŸ“Š react-dom æ˜¯å¦‚ä½•æ¥å…¥ react-reconciler çš„ï¼Ÿ
 *
 * ```js
 * // react-dom å®ç° HostConfig
 * const hostConfig = {
 *   // åˆ›å»º DOM èŠ‚ç‚¹
 *   createInstance(type, props) {
 *     const element = document.createElement(type);
 *     // è®¾ç½®å±æ€§...
 *     return element;
 *   },
 *
 *   // æ·»åŠ å­èŠ‚ç‚¹
 *   appendChild(parent, child) {
 *     parent.appendChild(child);
 *   },
 *
 *   // æ›´æ–°å±æ€§
 *   commitUpdate(domElement, updatePayload) {
 *     // æ›´æ–° DOM å±æ€§...
 *   },
 *
 *   // ... æ›´å¤šæ–¹æ³•
 * };
 *
 * // ä½¿ç”¨ hostConfig åˆ›å»ºæ¸²æŸ“å™¨
 * const DOMRenderer = ReactReconciler(hostConfig);
 * ```
 */

/**
 * =====================================================
 * 3.4 scheduler åŒ…è®¾è®¡
 * =====================================================
 *
 * ğŸ“ packages/scheduler/src/
 *
 * ```
 * scheduler/src/
 * â”œâ”€â”€ Scheduler.js              # è°ƒåº¦å™¨ä¸»æ–‡ä»¶
 * â”œâ”€â”€ SchedulerMinHeap.js       # å°é¡¶å †
 * â”œâ”€â”€ SchedulerPriorities.js    # ä¼˜å…ˆçº§å®šä¹‰
 * â””â”€â”€ forks/
 *     â”œâ”€â”€ Scheduler.js          # é€šç”¨å®ç°
 *     â””â”€â”€ SchedulerHostConfig.js  # å¹³å°é€‚é…
 * ```
 *
 * ğŸ“Š ä¸ºä»€ä¹ˆ Scheduler ç‹¬ç«‹æˆåŒ…ï¼Ÿ
 *
 * 1. å¯ä»¥è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼ˆä¸åªæ˜¯ Reactï¼‰
 * 2. æ–¹ä¾¿ç‹¬ç«‹æµ‹è¯•å’Œä¼˜åŒ–
 * 3. æœªæ¥å¯èƒ½æˆä¸ºæµè§ˆå™¨æ ‡å‡†ï¼ˆscheduler.postTaskï¼‰
 */

// ============================================================
// Part 4: å­¦ä¹ å»ºè®®ä¸å®è·µ
// ============================================================

/**
 * =====================================================
 * 4.1 æºç é˜…è¯»é¡ºåº
 * =====================================================
 *
 * ğŸ“Š æ¨èé¡ºåºï¼ˆç”±æµ…å…¥æ·±ï¼‰
 *
 * ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¦‚å¿µ
 * 1. shared/ReactSymbols.js - äº†è§£å„ç§ç±»å‹æ ‡è¯†
 * 2. react/src/ReactElement.js - ç†è§£å…ƒç´ ç»“æ„
 * 3. react/src/ReactHooks.js - ç†è§£ Hooks API
 *
 * ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒæœºåˆ¶
 * 4. react-reconciler/src/ReactFiber.js - Fiber ç»“æ„
 * 5. react-reconciler/src/ReactFiberWorkLoop.js - å·¥ä½œå¾ªç¯
 * 6. react-reconciler/src/ReactFiberHooks.js - Hooks å®ç°
 *
 * ç¬¬ä¸‰é˜¶æ®µï¼šè¿›é˜¶å†…å®¹
 * 7. react-reconciler/src/ReactChildFiber.js - Diff ç®—æ³•
 * 8. scheduler/src/Scheduler.js - è°ƒåº¦ç®—æ³•
 * 9. react-dom/src/events/ - äº‹ä»¶ç³»ç»Ÿ
 */

/**
 * =====================================================
 * 4.2 è°ƒè¯•æŠ€å·§
 * =====================================================
 *
 * 1. æ·»åŠ æ–­ç‚¹
 *    ```js
 *    // åœ¨å…³é”®å‡½æ•°å¼€å¤´æ·»åŠ  debugger
 *    function beginWork(current, workInProgress) {
 *      debugger; // æš‚åœåœ¨è¿™é‡Œ
 *      // ...
 *    }
 *    ```
 *
 * 2. ä½¿ç”¨ fixtures
 *    ```bash
 *    cd fixtures/dom
 *    yarn install
 *    yarn start
 *    ```
 *
 * 3. æ·»åŠ  console.log
 *    ```js
 *    console.log('beginWork', workInProgress.type);
 *    ```
 */

/**
 * =====================================================
 * 4.3 é¢è¯•åº”ç”¨
 * =====================================================
 *
 * ğŸ’¡ Q: React ä¸ºä»€ä¹ˆé€‰æ‹© Monorepoï¼Ÿ
 * A: ä»£ç å…±äº«æ–¹ä¾¿ã€ç»Ÿä¸€æ„å»ºã€åŸå­æäº¤ã€ä¾èµ–æ¸…æ™°
 *
 * ğŸ’¡ Q: React ä¸ºä»€ä¹ˆç”¨ Rollup è€Œä¸æ˜¯ Webpackï¼Ÿ
 * A: Rollup é€‚åˆåº“æ‰“åŒ…ï¼ŒTree-shaking æ›´å¥½ï¼Œäº§ç‰©æ›´å°
 *
 * ğŸ’¡ Q: Scheduler ä¸ºä»€ä¹ˆç‹¬ç«‹æˆåŒ…ï¼Ÿ
 * A: å¯å¤ç”¨ã€å¯ç‹¬ç«‹æµ‹è¯•ã€æœªæ¥å¯èƒ½æˆä¸ºæ ‡å‡†
 *
 * ğŸ’¡ Q: react å’Œ react-dom ä¸ºä»€ä¹ˆåˆ†ç¦»ï¼Ÿ
 * A: è·¨å¹³å°è®¾è®¡ï¼Œreact å®šä¹‰ APIï¼Œreact-dom/react-native å®ç°æ¸²æŸ“
 *
 * ğŸ’¡ Q: å¦‚ä½•å®ç°è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Ÿ
 * A: ä½¿ç”¨ react-reconcilerï¼Œå®ç° HostConfig æ¥å£
 */

/**
 * =====================================================
 * 4.4 å®é™…å¼€å‘ä»·å€¼
 * =====================================================
 *
 * ğŸ¢ ä»·å€¼ 1ï¼šç†è§£æ„å»ºä¼˜åŒ–
 * - å­¦ä¹ æ¡ä»¶ç¼–è¯‘
 * - å­¦ä¹  Tree-shaking å‹å¥½çš„å†™æ³•
 * - å­¦ä¹ é”™è¯¯ç å‹ç¼©
 *
 * ğŸ¢ ä»·å€¼ 2ï¼šç†è§£åŒ…è®¾è®¡
 * - å­¦ä¹ å¦‚ä½•è®¾è®¡å¯å¤ç”¨çš„åŒ…
 * - å­¦ä¹ ä¾èµ–ç®¡ç†
 * - å­¦ä¹  API è®¾è®¡
 *
 * ğŸ¢ ä»·å€¼ 3ï¼šç†è§£å¤§å‹é¡¹ç›®ç»„ç»‡
 * - å­¦ä¹  Monorepo å®è·µ
 * - å­¦ä¹ æµ‹è¯•ç­–ç•¥
 * - å­¦ä¹  CI/CD è®¾è®¡
 */

// ============================================================
// å¯¼å‡º
// ============================================================

export {
  bundleConfig,
  corePackages,
  rendererPackages,
  devtoolsPackages,
  ssrPackages,
  utilityPackages,
};

