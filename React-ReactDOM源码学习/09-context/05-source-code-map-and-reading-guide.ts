/**
 * ============================================================
 * ğŸ“š Phase 9: Context ä¸è·¨ç»„ä»¶çŠ¶æ€ä¼ æ’­ - Part 5: æºç å¯¼èˆªä¸é˜…è¯»æŒ‡å—
 * ============================================================
 *
 * ğŸ“ æ ¸å¿ƒæºç ç›®å½•:
 * - packages/react/src/ReactContext.js
 * - packages/react-reconciler/src/ReactFiberNewContext.new.js
 * - packages/react-reconciler/src/ReactFiberHooks.new.js
 *
 * â±ï¸ é¢„è®¡æ—¶é—´ï¼š1-2 å°æ—¶
 * ğŸ¯ é¢è¯•æƒé‡ï¼šâ­â­â­â­
 */

// ============================================================
// Part 1: æ ¸å¿ƒæ–‡ä»¶æ¦‚è§ˆ
// ============================================================

/**
 * ğŸ“Š Context ç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶
 */

const coreFiles = `
ğŸ“Š Context ç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶

packages/react/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                              â”‚ èŒè´£                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactContext.js                   â”‚ â­ createContext çš„å®ç°                 â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ æ ¸å¿ƒå‡½æ•°:                               â”‚
â”‚                                   â”‚ â€¢ createContext(defaultValue)           â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ åˆ›å»ºçš„ Context å¯¹è±¡ç»“æ„:                â”‚
â”‚                                   â”‚ â€¢ $$typeof: REACT_CONTEXT_TYPE         â”‚
â”‚                                   â”‚ â€¢ _currentValue: å½“å‰å€¼                 â”‚
â”‚                                   â”‚ â€¢ Provider: Provider ç»„ä»¶               â”‚
â”‚                                   â”‚ â€¢ Consumer: Consumer ç»„ä»¶               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


packages/react-reconciler/src/
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                              â”‚ èŒè´£                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberNewContext.new.js       â”‚ â­â­â­ Context æ ¸å¿ƒè¿è¡Œæ—¶é€»è¾‘           â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ Provider å€¼æ ˆç®¡ç†:                      â”‚
â”‚                                   â”‚ â€¢ pushProvider (Line 87)                â”‚
â”‚                                   â”‚ â€¢ popProvider (Line 129)                â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ Context è¯»å–:                           â”‚
â”‚                                   â”‚ â€¢ prepareToReadContext (Line 625)       â”‚
â”‚                                   â”‚ â€¢ readContext (Line 652)                â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ Context å˜æ›´ä¼ æ’­:                       â”‚
â”‚                                   â”‚ â€¢ propagateContextChange (Line 198)     â”‚
â”‚                                   â”‚ â€¢ propagateContextChange_eager (219)    â”‚
â”‚                                   â”‚ â€¢ scheduleContextWorkOnParentPath (156) â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ å˜åŒ–æ£€æµ‹:                               â”‚
â”‚                                   â”‚ â€¢ checkIfContextChanged (Line 601)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberHooks.new.js            â”‚ useContext Hook å…¥å£                    â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ HooksDispatcherOnMount/Update:          â”‚
â”‚                                   â”‚ â€¢ useContext: readContext (Line 2431)   â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ è¯´æ˜: useContext ç›´æ¥ä½¿ç”¨ readContext   â”‚
â”‚                                   â”‚ ä¸åƒå…¶ä»– Hook æœ‰ mount/update åŒºåˆ†      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactFiberBeginWork.new.js        â”‚ Provider/Consumer çš„ beginWork å¤„ç†     â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ updateContextProvider                 â”‚
â”‚                                   â”‚ â€¢ updateContextConsumer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactWorkTags.js                  â”‚ Fiber tag å®šä¹‰                          â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ ContextProvider = 10                  â”‚
â”‚                                   â”‚ â€¢ ContextConsumer = 9                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactInternalTypes.js             â”‚ ç±»å‹å®šä¹‰                                â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ â€¢ ContextDependency ç±»å‹                â”‚
â”‚                                   â”‚ â€¢ Dependencies ç±»å‹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 2: æ¨èé˜…è¯»é¡ºåº
// ============================================================

/**
 * ğŸ“Š æ¨èé˜…è¯»é¡ºåº
 */

const readingOrder = `
ğŸ“Š æ¨èé˜…è¯»é¡ºåº

Phase 9 æºç é˜…è¯»è·¯å¾„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸€é˜¶æ®µï¼šç†è§£ Context å¯¹è±¡ç»“æ„                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                             â”‚
â”‚   1. packages/react/src/ReactContext.js                                     â”‚
â”‚      â””â”€â”€ createContext å‡½æ•°                                                 â”‚
â”‚      â””â”€â”€ Context å¯¹è±¡çš„å„ä¸ªå­—æ®µ                                             â”‚
â”‚      â””â”€â”€ Provider/Consumer çš„åˆ›å»ºæ–¹å¼                                       â”‚
â”‚                                                                             â”‚
â”‚   2. packages/shared/ReactSymbols.js                                        â”‚
â”‚      â””â”€â”€ REACT_CONTEXT_TYPE                                                 â”‚
â”‚      â””â”€â”€ REACT_PROVIDER_TYPE                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬äºŒé˜¶æ®µï¼šç†è§£ Provider çš„å€¼æ ˆæœºåˆ¶                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚                                                                             â”‚
â”‚   3. ReactFiberNewContext.new.js - pushProvider (Line 87)                   â”‚
â”‚      â””â”€â”€ ç†è§£å€¼æ˜¯å¦‚ä½•è¢«"æ¨å…¥æ ˆ"çš„                                           â”‚
â”‚      â””â”€â”€ context._currentValue æ˜¯å¦‚ä½•è¢«ä¿®æ”¹çš„                               â”‚
â”‚                                                                             â”‚
â”‚   4. ReactFiberNewContext.new.js - popProvider (Line 129)                   â”‚
â”‚      â””â”€â”€ ç†è§£å€¼æ˜¯å¦‚ä½•è¢«"å¼¹å‡ºæ ˆ"æ¢å¤çš„                                       â”‚
â”‚                                                                             â”‚
â”‚   5. ReactFiberBeginWork.new.js - updateContextProvider                     â”‚
â”‚      â””â”€â”€ Provider åœ¨ beginWork ä¸­çš„å¤„ç†æµç¨‹                                 â”‚
â”‚      â””â”€â”€ ä½•æ—¶è°ƒç”¨ propagateContextChange                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬ä¸‰é˜¶æ®µï¼šç†è§£ Context è¯»å–æœºåˆ¶                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                             â”‚
â”‚   6. ReactFiberNewContext.new.js - prepareToReadContext (Line 625)          â”‚
â”‚      â””â”€â”€ æ¸²æŸ“å‰çš„å‡†å¤‡å·¥ä½œ                                                   â”‚
â”‚      â””â”€â”€ currentlyRenderingFiber çš„è®¾ç½®                                     â”‚
â”‚                                                                             â”‚
â”‚   7. ReactFiberNewContext.new.js - readContext (Line 652)                   â”‚
â”‚      â””â”€â”€ â­ æ ¸å¿ƒï¼ç†è§£ Context å€¼å¦‚ä½•è¢«è¯»å–                                 â”‚
â”‚      â””â”€â”€ ContextDependency å¦‚ä½•è¢«åˆ›å»ºå’Œé“¾æ¥                                 â”‚
â”‚      â””â”€â”€ ä¾èµ–æ˜¯å¦‚ä½•æŒ‚åˆ° Fiber ä¸Šçš„                                          â”‚
â”‚                                                                             â”‚
â”‚   8. ReactFiberHooks.new.js - HooksDispatcherOnMount (Line 2427)            â”‚
â”‚      â””â”€â”€ useContext ä¸ºä»€ä¹ˆç›´æ¥ä½¿ç”¨ readContext                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ç¬¬å››é˜¶æ®µï¼šç†è§£ Context å˜æ›´ä¼ æ’­                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                             â”‚
â”‚   9. ReactFiberNewContext.new.js - propagateContextChange_eager (Line 219)  â”‚
â”‚      â””â”€â”€ â­ æ ¸å¿ƒï¼ç†è§£å¦‚ä½•æ‰¾åˆ°ä¾èµ– Context çš„ç»„ä»¶                           â”‚
â”‚      â””â”€â”€ æ·±åº¦ä¼˜å…ˆéå†çš„å®ç°                                                 â”‚
â”‚      â””â”€â”€ å¦‚ä½•æ£€æŸ¥ fiber.dependencies                                        â”‚
â”‚                                                                             â”‚
â”‚   10. ReactFiberNewContext.new.js - scheduleContextWorkOnParentPath (156)   â”‚
â”‚       â””â”€â”€ ç†è§£ childLanes å‘ä¸Šæ ‡è®°çš„æœºåˆ¶                                    â”‚
â”‚       â””â”€â”€ ä¸ºä»€ä¹ˆè¦æ ‡è®° childLanes                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 3: å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
// ============================================================

/**
 * ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨
 */

const functionQuickRef = `
ğŸ“Š å…³é”®å‡½æ•°é€ŸæŸ¥è¡¨

Context åˆ›å»º
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                   â”‚ èŒè´£                                 â”‚ æ–‡ä»¶ä½ç½®     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ createContext          â”‚ åˆ›å»º Context å¯¹è±¡                    â”‚ ReactContext â”‚
â”‚                        â”‚ åŒ…å« Provider/Consumer/_currentValue â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Provider å€¼ç®¡ç†
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                   â”‚ èŒè´£                                 â”‚ æ–‡ä»¶ä½ç½®     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pushProvider           â”‚ è¿›å…¥ Provider æ—¶ï¼Œè®¾ç½® _currentValue â”‚ NewContext   â”‚
â”‚ popProvider            â”‚ ç¦»å¼€ Provider æ—¶ï¼Œæ¢å¤æ—§å€¼           â”‚ NewContext   â”‚
â”‚ updateContextProvider  â”‚ Provider çš„ beginWork å¤„ç†           â”‚ BeginWork    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Context è¯»å–
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                   â”‚ èŒè´£                                 â”‚ æ–‡ä»¶ä½ç½®     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ prepareToReadContext   â”‚ æ¸²æŸ“å‰å‡†å¤‡ï¼Œè®¾ç½® currentlyRenderingFiberâ”‚NewContext â”‚
â”‚ readContext            â”‚ è¯»å– Context å€¼ï¼Œè®°å½•ä¾èµ–            â”‚ NewContext   â”‚
â”‚ updateContextConsumer  â”‚ Consumer çš„ beginWork å¤„ç†           â”‚ BeginWork    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Context å˜æ›´ä¼ æ’­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡½æ•°                                â”‚ èŒè´£                       â”‚ æ–‡ä»¶ä½ç½®  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ propagateContextChange              â”‚ å…¥å£ï¼Œé€‰æ‹©ä¼ æ’­ç­–ç•¥         â”‚ NewContextâ”‚
â”‚ propagateContextChange_eager        â”‚ éå†å­æ ‘ï¼Œæ ‡è®°ä¾èµ–æ­¤ Ctx çš„â”‚ NewContextâ”‚
â”‚ scheduleContextWorkOnParentPath     â”‚ å‘ä¸Šæ ‡è®° childLanes        â”‚ NewContextâ”‚
â”‚ checkIfContextChanged               â”‚ æ£€æŸ¥ Context å€¼æ˜¯å¦å˜åŒ–    â”‚ NewContextâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 4: ä¸å…¶ä»– Phase çš„å…³è”
// ============================================================

/**
 * ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”
 */

const phaseConnections = `
ğŸ“Š ä¸å…¶ä»– Phase çš„å…³è”

Phase 2: Fiber æ¶æ„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Context ä¿¡æ¯å¦‚ä½•ç»‘å®šåˆ° Fiber æ ‘:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   Provider Fiber:                                                           â”‚
â”‚   â€¢ tag: ContextProvider (10)                                               â”‚
â”‚   â€¢ type: context.Providerï¼ˆåŒ…å« _context å¼•ç”¨ï¼‰                            â”‚
â”‚   â€¢ memoizedProps.value: Context å½“å‰å€¼                                     â”‚
â”‚                                                                             â”‚
â”‚   Consumer Fiber:                                                           â”‚
â”‚   â€¢ tag: ContextConsumer (9)                                                â”‚
â”‚   â€¢ type: Context å¯¹è±¡æœ¬èº«                                                  â”‚
â”‚                                                                             â”‚
â”‚   ä½¿ç”¨ useContext çš„ Fiber:                                                 â”‚
â”‚   â€¢ dependencies.firstContext â†’ ContextDependency é“¾è¡¨                     â”‚
â”‚   â€¢ ContextDependency: { context, memoizedValue, next }                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 3: æ¸²æŸ“æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Context è¯»å–å‘ç”Ÿåœ¨ beginWork é˜¶æ®µ:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   beginWork                                                                 â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”œâ”€â–¶ ContextProvider: updateContextProvider                           â”‚
â”‚       â”‚       â””â”€â”€ pushProvider (è®¾ç½® _currentValue)                         â”‚
â”‚       â”‚       â””â”€â”€ å€¼å˜åŒ–æ—¶ propagateContextChange                           â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”œâ”€â–¶ FunctionComponent: renderWithHooks                               â”‚
â”‚       â”‚       â””â”€â”€ prepareToReadContext                                      â”‚
â”‚       â”‚       â””â”€â”€ Component() æ‰§è¡Œ                                          â”‚
â”‚       â”‚           â””â”€â”€ useContext â†’ readContext (è¯»å–å€¼ï¼Œè®°å½•ä¾èµ–)           â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â””â”€â–¶ ContextConsumer: updateContextConsumer                           â”‚
â”‚               â””â”€â”€ readContext                                               â”‚
â”‚               â””â”€â”€ è°ƒç”¨ render prop                                          â”‚
â”‚                                                                             â”‚
â”‚   completeWork                                                              â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â””â”€â–¶ ContextProvider: popProvider (æ¢å¤æ—§å€¼)                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 4: Hooks
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

useContext ä¸å…¶ä»– Hooks çš„å…³ç³»:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   è°ƒç”¨é¡ºåº:                                                                 â”‚
â”‚   â€¢ useContext å¯ä»¥å’Œå…¶ä»– Hooks æ··ç”¨                                        â”‚
â”‚   â€¢ ä½† useContext ä¸éµå¾ª Hook é“¾è¡¨æœºåˆ¶                                      â”‚
â”‚   â€¢ å®ƒç›´æ¥è¯»å– Context._currentValueï¼Œä¸å­˜å‚¨åœ¨ memoizedState                â”‚
â”‚                                                                             â”‚
â”‚   ä¸ useState/useEffect çš„åŒºåˆ«:                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                             â”‚
â”‚   useState:                                                                 â”‚
â”‚   â€¢ mount æ—¶åˆ›å»º Hook èŠ‚ç‚¹                                                  â”‚
â”‚   â€¢ å­˜å‚¨åœ¨ fiber.memoizedState é“¾è¡¨                                         â”‚
â”‚   â€¢ update æ—¶æŒ‰é¡ºåºæ¶ˆè´¹                                                     â”‚
â”‚                                                                             â”‚
â”‚   useContext:                                                               â”‚
â”‚   â€¢ ä¸åˆ›å»º Hook èŠ‚ç‚¹                                                        â”‚
â”‚   â€¢ ç›´æ¥è¯»å– Context._currentValue                                          â”‚
â”‚   â€¢ ä¾èµ–å­˜å‚¨åœ¨ fiber.dependenciesï¼ˆä¸æ˜¯ memoizedStateï¼‰                    â”‚
â”‚   â€¢ mount å’Œ update è¡Œä¸ºç›¸åŒ                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Phase 7: å¹¶å‘ç‰¹æ€§
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å¹¶å‘æ¸²æŸ“ä¸‹çš„ Context:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   å¹¶å‘æ¨¡å¼çš„è€ƒè™‘:                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                             â”‚
â”‚   1. Context._currentValue æ˜¯"å…¨å±€"çš„                                       â”‚
â”‚      â€¢ åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¢« pushProvider/popProvider åŠ¨æ€ä¿®æ”¹                     â”‚
â”‚      â€¢ æ¸²æŸ“ä¸­æ–­æ—¶éœ€è¦æ­£ç¡®æ¢å¤                                               â”‚
â”‚                                                                             â”‚
â”‚   2. å€¼æ ˆæœºåˆ¶ä¿è¯æ­£ç¡®æ€§                                                     â”‚
â”‚      â€¢ å³ä½¿æ¸²æŸ“è¢«ä¸­æ–­ï¼ŒpopProvider ä¼šåœ¨ unwind æ—¶æ¢å¤                       â”‚
â”‚      â€¢ ä¸‹æ¬¡é‡æ–°å¼€å§‹æ¸²æŸ“ï¼ŒpushProvider ä¼šé‡æ–°è®¾ç½®                            â”‚
â”‚                                                                             â”‚
â”‚   3. ä¾èµ–æ”¶é›†ä¸ Lanes                                                       â”‚
â”‚      â€¢ dependencies.lanes è®°å½•éœ€è¦å¤„ç†çš„ä¼˜å…ˆçº§                              â”‚
â”‚      â€¢ ä¸åŒä¼˜å…ˆçº§çš„æ›´æ–°å¯ä»¥æ­£ç¡®å¤„ç†                                         â”‚
â”‚                                                                             â”‚
â”‚   4. Lazy Context Propagationï¼ˆå®éªŒæ€§ï¼‰                                     â”‚
â”‚      â€¢ enableLazyContextPropagation ç‰¹æ€§æ ‡å¿—                                â”‚
â”‚      â€¢ å»¶è¿Ÿä¼ æ’­ Context å˜æ›´ï¼Œå‡å°‘ä¸å¿…è¦çš„éå†                              â”‚
â”‚      â€¢ åœ¨æ¶ˆè´¹æ—¶æ‰æ£€æŸ¥æ˜¯å¦æœ‰å˜åŒ–                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`;

// ============================================================
// Part 5: é¢è¯•é«˜é¢‘é—®é¢˜æ±‡æ€»
// ============================================================

/**
 * ğŸ“Š é¢è¯•é«˜é¢‘é—®é¢˜æ±‡æ€»
 */

const interviewQuestions = `
ğŸ’¡ Phase 9 é¢è¯•é«˜é¢‘é—®é¢˜æ±‡æ€»

åŸºç¡€æ¦‚å¿µ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Q1: Context è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

Q2: createContext è¿”å›çš„å¯¹è±¡ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ

Q3: Provider å’Œ Consumer å¯¹åº”ä»€ä¹ˆ Fiber tagï¼Ÿ


å†…éƒ¨æœºåˆ¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Q4: useContext å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

Q5: Context._currentValue æ˜¯ä½•æ—¶è¢«ä¿®æ”¹çš„ï¼Ÿ

Q6: ä»€ä¹ˆæ˜¯ Context å€¼æ ˆï¼ŸpushProvider/popProvider çš„ä½œç”¨ï¼Ÿ


æ›´æ–°ä¼ æ’­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Q7: Context å€¼å˜åŒ–æ—¶ï¼ŒReact å¦‚ä½•æ‰¾åˆ°ä¾èµ–å®ƒçš„ç»„ä»¶ï¼Ÿ

Q8: ä¸ºä»€ä¹ˆè¦å‘ä¸Šæ ‡è®° childLanesï¼Ÿ

Q9: Context æ›´æ–°ä¼šå¯¼è‡´æ•´æ£µæ ‘é‡æ¸²æŸ“å—ï¼Ÿ


æ€§èƒ½ä¼˜åŒ–
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Q10: ä½¿ç”¨ Context æœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼Ÿ

Q11: ä¸ºä»€ä¹ˆ Provider value è¦ç”¨ useMemo åŒ…è£¹ï¼Ÿ


å‚è€ƒç­”æ¡ˆè¦ç‚¹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A1: è§£å†³ Props Drilling é—®é¢˜ï¼Œæä¾›è·¨å±‚çº§çŠ¶æ€å…±äº«ã€‚

A4: useContext ç›´æ¥è°ƒç”¨ readContextï¼š
    - è¯»å– context._currentValue
    - åˆ›å»º ContextDependency è®°å½•ä¾èµ–
    - æŒ‚åˆ° fiber.dependencies ä¸Š

A7: é€šè¿‡ propagateContextChange_eagerï¼š
    - æ·±åº¦ä¼˜å…ˆéå† Provider å­æ ‘
    - æ£€æŸ¥æ¯ä¸ª Fiber çš„ dependencies.firstContext
    - åŒ¹é…çš„æ ‡è®° lanesï¼Œå‘ä¸Šæ ‡è®° childLanes

A9: ä¸ä¼šã€‚é€šè¿‡ lanes + childLanes æœºåˆ¶ï¼š
    - åªæœ‰ä¾èµ–æ­¤ Context çš„ç»„ä»¶é‡æ–°æ‰§è¡Œ
    - ä¸­é—´ç»„ä»¶å¯ä»¥ bailout
    - ä¸ä¾èµ–çš„åˆ†æ”¯å®Œå…¨è·³è¿‡
`;

// ============================================================
// Part 6: å­¦ä¹ æ£€æŸ¥æ¸…å•
// ============================================================

const learningChecklist = `
ğŸ“‹ Phase 9 å­¦ä¹ æ£€æŸ¥æ¸…å•

Context å¯¹è±¡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ createContext è¿”å›çš„å¯¹è±¡ç»“æ„
â–¡ çŸ¥é“ _currentValue å­—æ®µçš„ä½œç”¨
â–¡ ç†è§£ Provider å’Œ Consumer çš„å…³ç³»


Fiber è¡¨ç¤º
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ çŸ¥é“ ContextProvider (tag=10) çš„ç»“æ„
â–¡ çŸ¥é“ ContextConsumer (tag=9) çš„ç»“æ„
â–¡ ç†è§£ fiber.dependencies çš„æ•°æ®ç»“æ„


å€¼æ ˆæœºåˆ¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ pushProvider çš„ä½œç”¨
â–¡ ç†è§£ popProvider çš„ä½œç”¨
â–¡ çŸ¥é“åµŒå¥— Provider æ—¶å€¼æ˜¯å¦‚ä½•ç®¡ç†çš„


è¯»å–æœºåˆ¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ useContext çš„å†…éƒ¨å®ç°
â–¡ ç†è§£ readContext å¦‚ä½•è¯»å–å€¼å’Œè®°å½•ä¾èµ–
â–¡ ç†è§£ ContextDependency é“¾è¡¨ç»“æ„


æ›´æ–°ä¼ æ’­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ ç†è§£ propagateContextChange_eager çš„éå†è¿‡ç¨‹
â–¡ ç†è§£ childLanes æ ‡è®°çš„ä½œç”¨
â–¡ çŸ¥é“ä¸ºä»€ä¹ˆ Context æ›´æ–°ä¸ä¼šå…¨æ ‘é‡æ¸²æŸ“


æ€§èƒ½ä¼˜åŒ–
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ çŸ¥é“å¸¸è§çš„æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
â–¡ ç†è§£ä¸ºä»€ä¹ˆè¦ç”¨ useMemo åŒ…è£¹ value
â–¡ çŸ¥é“ä½•æ—¶åº”è¯¥æ‹†åˆ† Context


ç»¼åˆç†è§£
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ èƒ½ç”»å‡º Context è¯»å†™çš„æ•´ä½“æµç¨‹å›¾
â–¡ ç†è§£ Context ä¸ Fiber/æ¸²æŸ“æµç¨‹çš„å…³ç³»
â–¡ èƒ½å›ç­”ç›¸å…³é¢è¯•é—®é¢˜
`;

export {
  coreFiles,
  readingOrder,
  functionQuickRef,
  phaseConnections,
  interviewQuestions,
  learningChecklist,
};

