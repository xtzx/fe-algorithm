/**
 * ğŸ“ é¢˜ç›®ï¼šäºŒè¿›åˆ¶æ‰‹è¡¨
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/binary-watch/
 * ğŸ·ï¸ éš¾åº¦ï¼šEasy
 * ğŸ·ï¸ æ ‡ç­¾ï¼šä½è¿ç®—ã€å›æº¯
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * äºŒè¿›åˆ¶æ‰‹è¡¨é¡¶éƒ¨æœ‰ 4 ä¸ª LED ä»£è¡¨å°æ—¶ï¼ˆ0-11ï¼‰ï¼Œåº•éƒ¨æœ‰ 6 ä¸ª LED ä»£è¡¨åˆ†é’Ÿï¼ˆ0-59ï¼‰ã€‚
 * æ¯ä¸ª LED ä»£è¡¨ä¸€ä¸ª 0 æˆ– 1ï¼Œæœ€ä½ä½åœ¨å³ä¾§ã€‚
 *
 * ç»™ä½ ä¸€ä¸ªæ•´æ•° turnedOnï¼Œè¡¨ç¤ºå½“å‰äº®ç€çš„ LED çš„æ•°é‡ï¼Œè¿”å›äºŒè¿›åˆ¶æ‰‹è¡¨å¯ä»¥è¡¨ç¤ºçš„æ‰€æœ‰å¯èƒ½æ—¶é—´ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šturnedOn = 1
 * è¾“å‡ºï¼š["0:01","0:02","0:04","0:08","0:16","0:32","1:00","2:00","4:00","8:00"]
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// æ–¹æ³•ä¸€ï¼šå›æº¯
// - ä» 10 ä¸ª LED ä¸­é€‰ turnedOn ä¸ªäº®èµ·æ¥
// - è¿™æ˜¯ä¸€ä¸ªç»„åˆé—®é¢˜
//
// æ–¹æ³•äºŒï¼šæšä¸¾
// - ç›´æ¥æšä¸¾æ‰€æœ‰æ—¶é—´ (0-11 å°æ—¶, 0-59 åˆ†é’Ÿ)
// - æ£€æŸ¥æ¯ä¸ªæ—¶é—´çš„äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°æ˜¯å¦ç­‰äº turnedOn

// ============================================================
// è§£æ³•ä¸€ï¼šå›æº¯ï¼ˆç»„åˆï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(C(10, turnedOn)) | ç©ºé—´å¤æ‚åº¦ï¼šO(turnedOn)

function readBinaryWatch(turnedOn: number): string[] {
  const result: string[] = [];
  // LED ä½ç½®ï¼šå‰ 4 ä¸ªæ˜¯å°æ—¶ï¼Œå 6 ä¸ªæ˜¯åˆ†é’Ÿ
  const leds = [1, 2, 4, 8, 1, 2, 4, 8, 16, 32];

  function backtrack(index: number, count: number, hour: number, minute: number) {
    // å‰ªæï¼šå°æ—¶æˆ–åˆ†é’Ÿè¶…å‡ºèŒƒå›´
    if (hour > 11 || minute > 59) return;

    // ç»“æŸæ¡ä»¶
    if (count === turnedOn) {
      result.push(`${hour}:${minute.toString().padStart(2, '0')}`);
      return;
    }

    // å‰ªæï¼šå‰©ä½™ LED ä¸å¤Ÿé€‰
    if (10 - index < turnedOn - count) return;

    for (let i = index; i < 10; i++) {
      if (i < 4) {
        // å°æ—¶ LED
        backtrack(i + 1, count + 1, hour + leds[i], minute);
      } else {
        // åˆ†é’Ÿ LED
        backtrack(i + 1, count + 1, hour, minute + leds[i]);
      }
    }
  }

  backtrack(0, 0, 0, 0);
  return result;
}

// ============================================================
// è§£æ³•äºŒï¼šæšä¸¾ï¼ˆæ¨èï¼Œæ›´ç®€æ´ï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(12 Ã— 60) = O(1) | ç©ºé—´å¤æ‚åº¦ï¼šO(1)

function readBinaryWatch_enum(turnedOn: number): string[] {
  const result: string[] = [];

  for (let h = 0; h < 12; h++) {
    for (let m = 0; m < 60; m++) {
      // è®¡ç®— h å’Œ m çš„äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
      if (countBits(h) + countBits(m) === turnedOn) {
        result.push(`${h}:${m.toString().padStart(2, '0')}`);
      }
    }
  }

  return result;
}

// è®¡ç®—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
function countBits(n: number): number {
  let count = 0;
  while (n > 0) {
    count += n & 1;
    n >>= 1;
  }
  return count;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³• | æ—¶é—´      | ç©ºé—´        | ç‰¹ç‚¹                |
 * |------|-----------|-------------|---------------------|
 * | å›æº¯ | O(C(10,k))| O(k)        | ç»„åˆæ€è·¯ï¼Œé€šç”¨       |
 * | æšä¸¾ | O(720)    | O(1)        | æ¨èï¼Œç®€æ´é«˜æ•ˆ       |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. æ—¶é—´æ ¼å¼ï¼š
 *    - å°æ—¶ä¸éœ€è¦è¡¥ 0
 *    - åˆ†é’Ÿéœ€è¦è¡¥ 0ï¼ˆç”¨ padStartï¼‰
 *
 * 2. èŒƒå›´é™åˆ¶ï¼š
 *    - å°æ—¶ 0-11ï¼ˆä¸æ˜¯ 0-23ï¼‰
 *    - åˆ†é’Ÿ 0-59
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - ç»„åˆ â†’ ä» n ä¸ªæ•°ä¸­é€‰ k ä¸ª
 * - ä½ 1 çš„ä¸ªæ•° â†’ è®¡ç®—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
 */

export { readBinaryWatch, readBinaryWatch_enum };
export default readBinaryWatch;

