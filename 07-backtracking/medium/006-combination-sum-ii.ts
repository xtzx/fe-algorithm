/**
 * ğŸ“ é¢˜ç›®ï¼šç»„åˆæ€»å’Œ II
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/combination-sum-ii/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šæ•°ç»„ã€å›æº¯
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° targetï¼Œ
 * æ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚
 *
 * candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ ä¸€æ¬¡ã€‚
 *
 * æ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
 * è¾“å‡º: [[1,1,6],[1,2,5],[1,7],[2,6]]
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// ä¸"ç»„åˆæ€»å’Œ"çš„åŒºåˆ«ï¼š
// 1. æ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡ â†’ backtrack(i+1, ...)
// 2. æ•°ç»„ä¸­æœ‰é‡å¤å…ƒç´  â†’ éœ€è¦å»é‡
//
// ä¸"å­é›† II"ç±»ä¼¼ï¼š
// - å…ˆæ’åº
// - åŒä¸€å±‚è·³è¿‡é‡å¤å…ƒç´ 

// ============================================================
// è§£æ³•ï¼šå›æº¯ + å»é‡
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— 2^n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * candidates = [1, 1, 2, 5, 6, 7, 10], target = 8
 * ï¼ˆæ’åºåï¼‰
 *
 * å»é‡è§„åˆ™ï¼šåŒä¸€å±‚ä¸é€‰é‡å¤çš„å…ƒç´ 
 *
 * ç¬¬ä¸€å±‚å¯é€‰ï¼š1, 2, 5, 6, 7, 10ï¼ˆç¬¬äºŒä¸ª 1 è·³è¿‡ï¼‰
 *
 * é€‰ 1ï¼š
 *   ç¬¬äºŒå±‚å¯é€‰ï¼š1, 2, 5, 6, 7ï¼ˆä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ï¼‰
 *   é€‰ 1,1ï¼šå‰©ä½™ 6
 *     é€‰ 1,1,6ï¼šå‰©ä½™ 0 âœ“
 *   é€‰ 1,2ï¼šå‰©ä½™ 5
 *     é€‰ 1,2,5ï¼šå‰©ä½™ 0 âœ“
 *   é€‰ 1,7ï¼šå‰©ä½™ 0 âœ“
 *
 * é€‰ 2ï¼š
 *   é€‰ 2,6ï¼šå‰©ä½™ 0 âœ“
 *
 * ç»“æœï¼š[[1,1,6], [1,2,5], [1,7], [2,6]]
 */
function combinationSum2(candidates: number[], target: number): number[][] {
  const result: number[][] = [];
  const path: number[] = [];

  // æ’åº
  candidates.sort((a, b) => a - b);

  function backtrack(start: number, remaining: number) {
    if (remaining === 0) {
      result.push([...path]);
      return;
    }

    for (let i = start; i < candidates.length; i++) {
      // å‰ªæï¼šå½“å‰å…ƒç´ å¤§äºå‰©ä½™ç›®æ ‡
      if (candidates[i] > remaining) {
        break;
      }

      // å»é‡ï¼šåŒä¸€å±‚è·³è¿‡é‡å¤å…ƒç´ 
      if (i > start && candidates[i] === candidates[i - 1]) {
        continue;
      }

      path.push(candidates[i]);

      // æ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡ï¼Œä» i+1 å¼€å§‹
      backtrack(i + 1, remaining - candidates[i]);

      path.pop();
    }
  }

  backtrack(0, target);
  return result;
}

// ============================================================
// ğŸ”‘ å»é‡ä¸"ç»„åˆæ€»å’Œ"çš„å¯¹æ¯”
// ============================================================

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚              â”‚   ç»„åˆæ€»å’Œ      â”‚   ç»„åˆæ€»å’Œ II   â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ å…ƒç´ é‡å¤ä½¿ç”¨ â”‚      å¯ä»¥       â”‚      ä¸å¯ä»¥     â”‚
 * â”‚ æ•°ç»„æœ‰é‡å¤   â”‚      æ²¡æœ‰       â”‚      æœ‰         â”‚
 * â”‚ é€’å½’èµ·ç‚¹     â”‚      i          â”‚      i + 1      â”‚
 * â”‚ å»é‡å¤„ç†     â”‚      ä¸éœ€è¦     â”‚      éœ€è¦       â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. é€’å½’èµ·ç‚¹ï¼š
 *    - ç»„åˆæ€»å’Œï¼šbacktrack(i, ...)ï¼ˆå¯é‡å¤ï¼‰
 *    - ç»„åˆæ€»å’Œ IIï¼šbacktrack(i+1, ...)ï¼ˆä¸å¯é‡å¤ï¼‰
 *
 * 2. å»é‡æ¡ä»¶ï¼š
 *    - i > startï¼ˆåŒä¸€å±‚ï¼‰
 *    - candidates[i] === candidates[i-1]
 *
 * 3. å‰ªæå’Œå»é‡çš„é¡ºåºï¼š
 *    - å…ˆåˆ¤æ–­å‰ªæï¼ˆbreakï¼‰
 *    - å†åˆ¤æ–­å»é‡ï¼ˆcontinueï¼‰
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - ç»„åˆæ€»å’Œ â†’ å…ƒç´ å¯é‡å¤ä½¿ç”¨
 * - ç»„åˆæ€»å’Œ III â†’ ä» 1-9 ä¸­é€‰ k ä¸ªæ•°
 * - å­é›† II â†’ æœ‰é‡å¤å…ƒç´ çš„å­é›†
 */

export { combinationSum2 };
export default combinationSum2;

