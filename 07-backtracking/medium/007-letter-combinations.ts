/**
 * ğŸ“ é¢˜ç›®ï¼šç”µè¯å·ç çš„å­—æ¯ç»„åˆ
 * ğŸ”— é“¾æ¥ï¼šhttps://leetcode.cn/problems/letter-combinations-of-a-phone-number/
 * ğŸ·ï¸ éš¾åº¦ï¼šMedium
 * ğŸ·ï¸ æ ‡ç­¾ï¼šå“ˆå¸Œè¡¨ã€å­—ç¬¦ä¸²ã€å›æº¯
 *
 * ğŸ“‹ é¢˜ç›®æè¿°ï¼š
 * ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚
 * ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚
 *
 * æ•°å­—åˆ°å­—æ¯çš„æ˜ å°„ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ï¼š
 * 2: abc, 3: def, 4: ghi, 5: jkl
 * 6: mno, 7: pqrs, 8: tuv, 9: wxyz
 *
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼šdigits = "23"
 * è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]
 */

// ============================================================
// ğŸ’¡ æ€è·¯åˆ†æï¼šè¿™é“é¢˜çš„è§£æ³•æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿ
// ============================================================
//
// æœ¬è´¨ï¼šç»„åˆé—®é¢˜çš„å˜ä½“
// - ç¬¬ä¸€ä¸ªæ•°å­—å¯¹åº”å‡ ä¸ªå­—æ¯
// - ç¬¬äºŒä¸ªæ•°å­—å¯¹åº”å‡ ä¸ªå­—æ¯
// - ç©·ä¸¾æ‰€æœ‰ç»„åˆ
//
// ä¸æ ‡å‡†ç»„åˆçš„åŒºåˆ«ï¼š
// - æ¯ä¸ªä½ç½®çš„é€‰æ‹©æ¥è‡ªä¸åŒçš„é›†åˆ

// ============================================================
// è§£æ³•ï¼šå›æº¯
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(4^n) | ç©ºé—´å¤æ‚åº¦ï¼šO(n)

/**
 * ğŸ“Š æ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š
 *
 * digits = "23"
 * 2 â†’ "abc"
 * 3 â†’ "def"
 *
 *                    ""
 *          /         |         \
 *        "a"        "b"        "c"
 *       / | \      / | \      / | \
 *     ad ae af   bd be bf   cd ce cf
 *
 * ç»“æœï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]
 */
function letterCombinations(digits: string): string[] {
  if (!digits) return [];

  const result: string[] = [];

  // æ•°å­—åˆ°å­—æ¯çš„æ˜ å°„
  const phoneMap: { [key: string]: string } = {
    '2': 'abc',
    '3': 'def',
    '4': 'ghi',
    '5': 'jkl',
    '6': 'mno',
    '7': 'pqrs',
    '8': 'tuv',
    '9': 'wxyz',
  };

  function backtrack(index: number, current: string) {
    // ç»“æŸæ¡ä»¶ï¼šå¤„ç†å®Œæ‰€æœ‰æ•°å­—
    if (index === digits.length) {
      result.push(current);
      return;
    }

    // å½“å‰æ•°å­—å¯¹åº”çš„å­—æ¯
    const letters = phoneMap[digits[index]];

    // éå†æ‰€æœ‰å¯èƒ½çš„å­—æ¯
    for (const letter of letters) {
      backtrack(index + 1, current + letter);
    }
  }

  backtrack(0, '');
  return result;
}

// ============================================================
// è§£æ³•äºŒï¼šè¿­ä»£ï¼ˆBFSï¼‰
// ============================================================
// â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(4^n) | ç©ºé—´å¤æ‚åº¦ï¼šO(4^n)
function letterCombinations_bfs(digits: string): string[] {
  if (!digits) return [];

  const phoneMap: { [key: string]: string } = {
    '2': 'abc',
    '3': 'def',
    '4': 'ghi',
    '5': 'jkl',
    '6': 'mno',
    '7': 'pqrs',
    '8': 'tuv',
    '9': 'wxyz',
  };

  let result: string[] = [''];

  for (const digit of digits) {
    const letters = phoneMap[digit];
    const newResult: string[] = [];

    for (const combination of result) {
      for (const letter of letters) {
        newResult.push(combination + letter);
      }
    }

    result = newResult;
  }

  return result;
}

// ============================================================
// ğŸ”„ è§£æ³•å¯¹æ¯”
// ============================================================
/**
 * | è§£æ³• | æ—¶é—´   | ç©ºé—´   | ç‰¹ç‚¹            |
 * |------|--------|--------|-----------------|
 * | å›æº¯ | O(4^n) | O(n)   | æ¨èï¼Œç©ºé—´æ›´ä¼˜   |
 * | BFS  | O(4^n) | O(4^n) | éœ€è¦å­˜å‚¨ä¸­é—´ç»“æœ |
 */

// ============================================================
// âš ï¸ æ˜“é”™ç‚¹
// ============================================================
/**
 * 1. ç©ºè¾“å…¥ï¼š
 *    - digits ä¸ºç©ºæ—¶è¿”å› []
 *
 * 2. 7 å’Œ 9 æœ‰ 4 ä¸ªå­—æ¯ï¼š
 *    - 7: pqrs
 *    - 9: wxyz
 *    - æœ€åæƒ…å†µæ˜¯ 4^n
 *
 * 3. å­—ç¬¦ä¸²æ‹¼æ¥ï¼š
 *    - JS ä¸­å¯ä»¥ç›´æ¥ current + letter
 *    - ä¸éœ€è¦æ˜¾å¼çš„æ’¤é”€æ“ä½œ
 */

// ============================================================
// ğŸ”— ä¸¾ä¸€åä¸‰ï¼šç›¸ä¼¼é¢˜ç›®
// ============================================================
/**
 * - æ‹¬å·ç”Ÿæˆ â†’ æ¯ä¸ªä½ç½®é€‰ '(' æˆ– ')'
 * - å­—æ¯å¤§å°å†™å…¨æ’åˆ— â†’ æ¯ä¸ªå­—æ¯é€‰å¤§å†™æˆ–å°å†™
 */

// ============================================================
// ğŸ¢ å‰ç«¯ä¸šåŠ¡åœºæ™¯
// ============================================================
/**
 * 1. ä¹å®«æ ¼è¾“å…¥æ³•ï¼šæ‰‹æœºé”®ç›˜è¾“å…¥è”æƒ³
 * 2. å¯†ç ç”Ÿæˆï¼šæ ¹æ®è§„åˆ™ç”Ÿæˆå¯†ç ç»„åˆ
 */

export { letterCombinations, letterCombinations_bfs };
export default letterCombinations;

