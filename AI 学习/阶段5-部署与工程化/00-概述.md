# ğŸš€ é˜¶æ®µ5ï¼šéƒ¨ç½²ä¸ MLOps / LLMOps

> å°† LLM åº”ç”¨ä»å¼€å‘ç¯å¢ƒæ¨å‘ç”Ÿäº§
> **å‰ç½®è¦æ±‚**ï¼šå®Œæˆé˜¶æ®µ4ï¼ˆLLM åº”ç”¨å¼€å‘åŸºç¡€ï¼‰

---

## ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡

å®Œæˆæœ¬é˜¶æ®µåï¼Œä½ å°†èƒ½å¤Ÿï¼š

1. **ç†è§£éƒ¨ç½²æ–¹æ¡ˆ**ï¼šæœ¬åœ°/ç§æœ‰åŒ–éƒ¨ç½² LLM çš„å¸¸è§æ–¹æ¡ˆå’Œæƒè¡¡
2. **æŒæ¡æ¨ç†å¼•æ“**ï¼šä½¿ç”¨ Ollama / vLLM æ­å»ºé«˜ååæœåŠ¡
3. **å®ç°æœåŠ¡åŒ–**ï¼šç”¨ FastAPI + Docker å°è£…å’Œéƒ¨ç½² LLM/RAG æ¥å£
4. **å»ºç«‹ç›‘æ§ä½“ç³»**ï¼šæ—¥å¿—è®°å½•ã€RAG è¯„ä¼°ã€è°ƒç”¨é“¾è¿½è¸ª
5. **ä¿éšœå®‰å…¨è¿è¡Œ**ï¼šPrompt æ³¨å…¥é˜²æŠ¤ã€æˆæœ¬æ§åˆ¶
6. **ä¼˜åŒ–è¿è¥æˆæœ¬**ï¼šToken ç›‘æ§ã€ç¼“å­˜ç­–ç•¥ã€æ¨¡å‹é€‰æ‹©

---

## ğŸ“ æœ¬é˜¶æ®µæ–‡ä»¶ç»“æ„

```
é˜¶æ®µ5-éƒ¨ç½²ä¸å·¥ç¨‹åŒ–/
â”œâ”€â”€ 00-æ¦‚è¿°.md                      # æœ¬æ–‡ä»¶
â”œâ”€â”€ 01-éƒ¨ç½²åŸºç¡€.md                  # æœ¬åœ° vs äº‘ç«¯ã€ç¡¬ä»¶é€‰æ‹©
â”œâ”€â”€ 02-æ¨¡å‹é‡åŒ–.md                  # FP16/INT8/INT4ã€GGUF/GPTQ/AWQ
â”œâ”€â”€ 03-æ¨ç†ä¼˜åŒ–.md                  # KV Cacheã€Flash Attentionã€æ‰¹å¤„ç†
â”œâ”€â”€ 04-Ollamaå…¥é—¨.md               # å…¥é—¨é¦–é€‰æ¨ç†å¼•æ“
â”œâ”€â”€ 05-vLLMé«˜åå.md               # ç”Ÿäº§çº§é«˜ååæ¨ç†
â”œâ”€â”€ 06-FastAPIæœåŠ¡.md              # API å°è£…ã€æµå¼è¾“å‡º
â”œâ”€â”€ 07-è®¤è¯ä¸é™æµ.md               # JWTã€API Keyã€é™æµ
â”œâ”€â”€ 08-Dockeréƒ¨ç½².md               # å®¹å™¨åŒ–ã€Docker Compose
â”œâ”€â”€ 09-ç›‘æ§ä¸æ—¥å¿—.md               # Prometheusã€æ—¥å¿—ã€è°ƒç”¨é“¾
â”œâ”€â”€ 10-RAGè¯„ä¼°.md                  # Ragasã€è¯„ä¼°æŒ‡æ ‡
â”œâ”€â”€ 11-å®‰å…¨é˜²æŠ¤.md                 # Prompt æ³¨å…¥ã€è¾“å‡ºå®‰å…¨
â”œâ”€â”€ 12-æˆæœ¬ä¼˜åŒ–.md                 # Tokenç›‘æ§ã€ç¼“å­˜ã€æ¨¡å‹é€‰æ‹© âœ¨ æ–°å¢
â”œâ”€â”€ 13-é¡¹ç›®-éƒ¨ç½²RAGæœåŠ¡.md         # å®Œæ•´ç”Ÿäº§éƒ¨ç½²é¡¹ç›®
â””â”€â”€ 14-è‡ªæµ‹æ¸…å•.md                 # æ ¸å¿ƒé—®é¢˜è‡ªæµ‹
```

---

## ğŸ—ºï¸ éƒ¨ç½²æ¶æ„å…¨æ™¯å›¾

```
LLM ç”Ÿäº§éƒ¨ç½²æ¶æ„
â”‚
â”œâ”€â”€ æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ æ¨¡å‹é€‰æ‹©ï¼ˆå¼€æº vs é—­æºï¼‰
â”‚   â”œâ”€â”€ é‡åŒ–æ–¹æ¡ˆï¼ˆFP16/INT8/INT4ï¼‰
â”‚   â””â”€â”€ æ¨ç†ä¼˜åŒ–ï¼ˆKV Cacheã€Flash Attentionï¼‰
â”‚
â”œâ”€â”€ æ¨ç†å¼•æ“å±‚
â”‚   â”œâ”€â”€ Ollamaï¼ˆå…¥é—¨é¦–é€‰ï¼‰
â”‚   â”œâ”€â”€ vLLMï¼ˆé«˜ååç”Ÿäº§ï¼‰
â”‚   â”œâ”€â”€ TGIï¼ˆHugging Faceï¼‰
â”‚   â””â”€â”€ llama.cppï¼ˆCPU å‹å¥½ï¼‰
â”‚
â”œâ”€â”€ æœåŠ¡å±‚
â”‚   â”œâ”€â”€ FastAPIï¼ˆAPI å°è£…ï¼‰
â”‚   â”œâ”€â”€ æµå¼è¾“å‡ºï¼ˆSSEï¼‰
â”‚   â”œâ”€â”€ è®¤è¯ä¸é™æµ
â”‚   â””â”€â”€ å¹¶å‘æ§åˆ¶
â”‚
â”œâ”€â”€ å®¹å™¨ä¸ç¼–æ’
â”‚   â”œâ”€â”€ Docker å®¹å™¨åŒ–
â”‚   â”œâ”€â”€ Docker Compose
â”‚   â”œâ”€â”€ GPU å®¹å™¨æ”¯æŒ
â”‚   â””â”€â”€ CI/CD æµæ°´çº¿
â”‚
â”œâ”€â”€ ç›‘æ§ä¸è¯„ä¼°
â”‚   â”œâ”€â”€ æ—¥å¿—è®°å½•ï¼ˆstructlogï¼‰
â”‚   â”œâ”€â”€ æŒ‡æ ‡ç›‘æ§ï¼ˆPrometheusï¼‰
â”‚   â”œâ”€â”€ è°ƒç”¨é“¾è¿½è¸ªï¼ˆLangSmith/LangFuseï¼‰
â”‚   â””â”€â”€ RAG è´¨é‡è¯„ä¼°ï¼ˆRagasï¼‰
â”‚
â”œâ”€â”€ å®‰å…¨ä¸åˆè§„
â”‚   â”œâ”€â”€ Prompt æ³¨å…¥é˜²æŠ¤
â”‚   â”œâ”€â”€ è¾“å‡ºå†…å®¹è¿‡æ»¤
â”‚   â”œâ”€â”€ æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
â”‚   â””â”€â”€ è®¿é—®æ§åˆ¶
â”‚
â””â”€â”€ æˆæœ¬ä¼˜åŒ– âœ¨
    â”œâ”€â”€ Token ä½¿ç”¨ç›‘æ§
    â”œâ”€â”€ è¯­ä¹‰ç¼“å­˜
    â”œâ”€â”€ æ¨¡å‹åˆ†å±‚ç­–ç•¥
    â””â”€â”€ æ‰¹é‡å¤„ç†ä¼˜åŒ–
```

---

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### åŸºç¡€ä¾èµ–

```bash
# åˆ›å»ºç¯å¢ƒ
conda create -n llm-deploy python=3.11 -y
conda activate llm-deploy

# æ ¸å¿ƒåº“
pip install fastapi uvicorn python-multipart
pip install openai httpx sse-starlette
pip install pydantic pydantic-settings
pip install python-jose[cryptography] passlib[bcrypt]

# ç›‘æ§æ—¥å¿—
pip install structlog prometheus-client
pip install langsmith langfuse

# RAG è¯„ä¼°
pip install ragas datasets

# ç¼“å­˜
pip install redis diskcache

# Dockerï¼ˆç³»ç»Ÿå®‰è£…ï¼‰
# macOS: brew install --cask docker
# Linux: curl -fsSL https://get.docker.com | sh
```

### æ¨ç†å¼•æ“å®‰è£…

```bash
# Ollamaï¼ˆæœ€ç®€å•ï¼‰
curl -fsSL https://ollama.com/install.sh | sh

# vLLMï¼ˆé«˜ååï¼Œéœ€è¦ GPUï¼‰
pip install vllm

# llama.cppï¼ˆCPU å‹å¥½ï¼‰
# ä» GitHub releases ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬
```

### GPU ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

```bash
# NVIDIA Container Toolkit
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | \
  sudo tee /etc/apt/sources.list.d/nvidia-docker.list
sudo apt-get update
sudo apt-get install -y nvidia-container-toolkit
sudo systemctl restart docker

# éªŒè¯
docker run --rm --gpus all nvidia/cuda:12.0-base nvidia-smi
```

---

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### æœ¬åœ°éƒ¨ç½² vs äº‘ API

```
æœ¬åœ°éƒ¨ç½²ï¼š
âœ… æ•°æ®éšç§ã€æ— ç½‘ç»œå»¶è¿Ÿã€æŒ‰éœ€å®šåˆ¶
âŒ éœ€è¦ GPUã€è¿ç»´æˆæœ¬ã€æ¨¡å‹èƒ½åŠ›å—é™

äº‘ APIï¼š
âœ… å³å¼€å³ç”¨ã€æœ€å¼ºæ¨¡å‹ã€å…è¿ç»´
âŒ æ•°æ®åˆè§„é£é™©ã€ç½‘ç»œå»¶è¿Ÿã€æˆæœ¬ç´¯ç§¯
```

### æ¨ç†å¼•æ“é€‰æ‹©

```
åœºæ™¯ â†’ æ¨ç†å¼•æ“

å¼€å‘è°ƒè¯• â†’ Ollamaï¼ˆç®€å•æ˜“ç”¨ï¼‰
ç”Ÿäº§é«˜å¹¶å‘ â†’ vLLMï¼ˆé«˜ååã€Continuous Batchingï¼‰
CPU éƒ¨ç½² â†’ llama.cppï¼ˆGGUF æ ¼å¼ä¼˜åŒ–ï¼‰
Hugging Face ç”Ÿæ€ â†’ TGI
```

### ç”Ÿäº§éƒ¨ç½²è€ƒé‡

```
å…³é”®æŒ‡æ ‡ï¼š
â”œâ”€â”€ ååé‡ï¼ˆQPSï¼‰
â”œâ”€â”€ å»¶è¿Ÿï¼ˆP50/P95/P99ï¼‰
â”œâ”€â”€ æˆæœ¬ï¼ˆ$/1M tokensï¼‰
â””â”€â”€ å¯ç”¨æ€§ï¼ˆSLAï¼‰

ä¼˜åŒ–æ–¹å‘ï¼š
â”œâ”€â”€ æ¨¡å‹é‡åŒ–ï¼ˆå‡å°‘æ˜¾å­˜ï¼‰
â”œâ”€â”€ Continuous Batchingï¼ˆæé«˜ååï¼‰
â”œâ”€â”€ KV Cacheï¼ˆå‡å°‘é‡å¤è®¡ç®—ï¼‰
â”œâ”€â”€ è¯­ä¹‰ç¼“å­˜ï¼ˆå‡å°‘é‡å¤è¯·æ±‚ï¼‰
â””â”€â”€ æ¨¡å‹åˆ†å±‚ï¼ˆç®€å•é—®é¢˜ç”¨å°æ¨¡å‹ï¼‰
```

---

## ğŸ“š æ¨èèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Ollama](https://ollama.com/)
- [vLLM](https://docs.vllm.ai/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Docker](https://docs.docker.com/)

### å·¥å…·æ–‡æ¡£
- [Ragas](https://docs.ragas.io/)
- [LangSmith](https://docs.smith.langchain.com/)
- [LangFuse](https://langfuse.com/docs)

---

## â¡ï¸ å¼€å§‹å­¦ä¹ 

ç»§ç»­ [01-éƒ¨ç½²åŸºç¡€.md](./01-éƒ¨ç½²åŸºç¡€.md)
